(function(){"use strict";function t(t){var r=typeof t;if("string"===r)return'"'+t.replace(/\\/g,"\\\\").replace(/\"/g,'\\"').replace(/\n/g,"\n ")+'"';if("number"===r||"boolean"===r||"undefined"===r||null===t)return""+t;var n=t[hr];if(null!=n)return n(t);var e="(Mutable "+ ++fr+")";return Object.defineProperty(t,hr,{configurable:!1,enumerable:!1,writable:!1,value:function(){return e}}),e}function r(t){return Object(t)===t}function n(t){if(r(t)){var n=t[ar];return null!=n?n(t):t}return t}function e(t){var r={};return t.forEach(function(t){var e=t[0],i=t[1];if("string"!=typeof e)throw Error("Cannot convert to JavaScript: expected string key but got "+e);r[e]=n(i)}),r}function i(t){var r=[];return t.forEach(function(t){r.push(n(t))}),r}function o(t,r){return t>r?t:r}function u(t,r,n){var e=r.depth,i=n.depth;if(e>i+1){var o=r.left,u=r.right;return u.depth>o.depth?u.copy(r.copy(o,u.left),t.copy(u.right,n)):r.copy(o,t.copy(u,n))}if(i>e+1){var h=n.right,f=n.left;return f.depth>h.depth?f.copy(t.copy(r,f.left),n.copy(f.right,h)):n.copy(t.copy(r,f),h)}return t.copy(r,n)}function h(t,r){if(t===sr)return r;if(r===sr)return t;if(t.depth<r.depth){var n=h(t,r.left);return u(r,n,r.right)}var e=h(t.right,r);return u(t,t.left,e)}function f(t,r){return t===sr?r:u(t,f(t.left,r),t.right)}function a(t,r){return t===sr?r:u(t,t.left,a(t.right,r))}function s(t,r){return t===r?0:r>t?-1:1}function c(r,n){return r=t(r),n=t(n),s(r,n)}function p(t,r,n){for(;t!==sr;){var e=r(n,t.key);if(0===e)break;t=0>e?t.left:t.right}return t}function l(t,r,n,e){if(t===sr)return e;var i=t.left,o=t.right,h=r(n,t.key);if(0===h)return t.modify(e);if(0>h){var f=l(i,r,n,e);return f===i?t:u(t,f,o)}var f=l(o,r,n,e);return f===o?t:u(t,i,f)}function y(t,r,n,e){if(t===sr)throw Error("Key "+n+" not found");var i=t.left,o=t.right,h=r(n,t.key);if(0===h)return t.modify({key:n,value:e(t.value)});if(0>h){var f=y(i,r,n,e);return f===i?t:u(t,f,o)}var f=y(o,r,n,e);return f===o?t:u(t,i,f)}function v(t,r,n){if(t===sr)return t;var e=t.left,i=t.right,o=r(n,t.key);if(0===o)return h(e,i);if(0>o){var f=v(e,r,n);return f===e?t:u(t,f,i)}var f=v(i,r,n);return f===i?t:u(t,e,f)}function g(t,r){return Array(r+1).join(t)}function w(t,r,n){var e=Math.max(0,r-t.length);return t+g(n,e)}function d(t,r){if(t.length){var n="\n"+r;return n+t.map(function(t){return t.replace(/\n/g,n)}).join(n)}return""}function E(t,r,n,e){this.left=t,this.right=r,this.key=n,this.value=e,this.depth=o(t.depth,r.depth)+1}function m(t,r){this.root=t,this.sort=r,this.hash=null}function z(t,r,n){this.left=t,this.right=r,this.key=n,this.depth=o(t.depth,r.depth)+1}function k(t,r){this.root=t,this.sort=r,this.hash=null}function b(t){for(var r=t.length,n=Array(r),e=0;r>e;++e)n[e]=t[e];return n}function S(t,r,n){for(var e=t.length+1,i=Array(e),o=0;r>o;)i[o]=t[o],++o;for(i[o]=n,++o;e>o;)i[o]=t[o-1],++o;return i}function _(t,r,n){var e=t[r],i=n(e);if(e===i)return t;var o=b(t);return o[r]=i,o}function j(t,r){for(var n=t.length-1,e=Array(n),i=0;r>i;)e[i]=t[i],++i;for(;n>i;)e[i]=t[i+1],++i;return e}function x(t,r){this.car=t,this.cdr=r}function C(t,r){if(t.length){var n=t[t.length-1];n.length+r.length<=pr?t[t.length-1]=n.concat(r):t.push(r)}else t.push(r)}function D(t,r,n){if(n>r){var e=yr((r+n)/2),i=D(t,r,e),o=D(t,e+1,n);return new M(i,o,t[e])}return sr}function O(t){return D(t,0,t.length)}function A(t,r,n){0>r&&(r=0);var e=t.length;return n>e&&(n=e),0===r&&n===e?t:t.slice(r,n)}function I(t,r){for(var n=Array(r);r--;)n[r]=t.car,t=t.cdr;return n}function R(t,r,n){for(;--r!==n;)t=t.cdr;return t.car}function M(t,r,n){this.left=t,this.right=r,this.array=n,this.size=t.size+r.size+n.length,this.depth=o(t.depth,r.depth)+1}function B(t,r){return t>=0&&r>t}function q(t,r){for(;;){var n=t.left,e=n.size;if(e>r)t=n;else{r-=e;var i=t.array,o=i.length;if(o>r)return i[r];r-=o,t=t.right}}}function J(t,r,n){if(t===sr)return new M(sr,sr,[n]);var e=t.left,i=t.right,o=e.size;if(o>r){var h=J(e,r,n);return u(t,h,i)}r-=o;var s=t.array,c=s.length;if(c>=r){if(s=S(s,r,n),c===pr){var p=lr(s.length/2),l=s.slice(0,p),y=s.slice(p);return e.depth<i.depth?new M(a(e,new M(sr,sr,l)),i,y):new M(e,f(i,new M(sr,sr,y)),l)}return new M(e,i,s)}var h=J(i,r-c,n);return u(t,e,h)}function L(t,r,n){var e=t.left,i=t.right,o=e.size;if(o>r){var u=L(e,r,n);return u===e?t:t.copy(u,i)}r-=o;var h=t.array,f=h.length;if(f>r){var a=_(h,r,n);return a===h?t:new M(e,i,a)}var u=L(i,r-f,n);return u===i?t:t.copy(e,u)}function Q(t,r){var n=t.left,e=t.right,i=n.size;if(i>r){var o=Q(n,r);return u(t,o,e)}r-=i;var f=t.array,a=f.length;if(a>r)return f=j(f,r),0===f.length?h(n,e):new M(n,e,f);var o=Q(e,r-a);return u(t,n,o)}function K(t,r,n,e){if(r!==sr){var i=r.left,o=i.size;o>n&&K(t,i,n,e);var u=r.array,h=u.length;n-=o,e-=o,h>n&&e>0&&C(t,A(u,n,e)),e>h&&K(t,r.right,n-h,e-h)}}function P(t,r,n){this.root=t,this.tail=r,this.tail_size=n,this.hash=null}function F(t,r,n){this.left=t,this.right=r,this.len=n,this.hash=null}function G(t,r){this.root=t,this.len=r,this.hash=null}function H(r,n){return r===n||t(r)===t(n)}function N(t){return t instanceof m}function T(t){return t instanceof k}function U(t){return N(t)&&t.sort!==c}function V(t){return T(t)&&t.sort!==c}function W(t){return t instanceof P}function X(t){return t instanceof F}function Y(t){return t instanceof G}function Z(t){return N(t)||T(t)||W(t)||X(t)||Y(t)}function $(t){var r=Object.getPrototypeOf(t);return null===r||r===Object.prototype}function tr(t,r){if(null!=r){if(r instanceof m&&r.sort===t)return r;var n=new m(sr,t);return $(r)?Object.keys(r).forEach(function(t){n=n.set(t,r[t])}):r.forEach(function(t){var r=t[0],e=t[1];n=n.set(r,e)}),n}return new m(sr,t)}function rr(t,r){if(null!=r){if(r instanceof k&&r.sort===t)return r;var n=new k(sr,t);return r.forEach(function(t){n=n.add(t)}),n}return new k(sr,t)}function nr(t){return tr(c,t)}function er(t){return rr(c,t)}function ir(t){if(null!=t){if(t instanceof P)return t;var r=new P(sr,sr,0);return t.forEach(function(t){r=r.insert(t)}),r}return new P(sr,sr,0)}function or(t){if(null!=t){if(t instanceof F)return t;var r=new F(sr,sr,0);return t.forEach(function(t){r=r.push(t)}),r}return new F(sr,sr,0)}function ur(t){if(null!=t){if(t instanceof G)return t;var r=new G(sr,0);return t.forEach(function(t){r=r.push(t)}),r}return new G(sr,0)}var hr="__CFB38D33-7CD8-419E-A1B6-61D1B8AC7C83_hash__",fr=0,ar="__DEE5921D-20A6-40D0-9A74-40C5BAC8C663_toJS__",sr={};sr.depth=0,sr.size=0,sr.forEach=function(){},sr.forEachRev=function(){};var cr={};cr.toString=function(){return t(this)},cr.inspect=cr.toString,E.prototype.copy=function(t,r){return new E(t,r,this.key,this.value)},E.prototype.modify=function(t){var r=t.key,n=t.value;return this.key===r&&this.value===n?this:new E(this.left,this.right,r,n)},E.prototype.forEach=function(t){this.left.forEach(t),t([this.key,this.value]),this.right.forEach(t)},m.prototype=Object.create(cr),m.prototype[hr]=function(r){if(null===r.hash){var n=[],e=0;r.forEach(function(r){var i=t(r[0]),o=t(r[1]);i=i.split(/\n/),i.forEach(function(t){e=Math.max(e,t.length)}),n.push({key:i,value:o})});var i="  ";n=n.map(function(t){var r=t.key.length-1;t.key[r]=w(t.key[r],e," ");var n=t.key.join("\n"),i=t.value.replace(/\n/g,"\n"+g(" ",e+3));return n+" = "+i}),r.hash=r.sort===c?"(Dict"+d(n,i)+")":"(SortedDict "+t(r.sort)+d(n,i)+")"}return r.hash},m.prototype[ar]=e,m.prototype.forEach=function(t){this.root.forEach(t)},m.prototype.isEmpty=function(){return this.root===sr},m.prototype.has=function(t){return p(this.root,this.sort,t)!==sr},m.prototype.get=function(t,r){var n=p(this.root,this.sort,t);if(n===sr){if(2===arguments.length)return r;throw Error("Key "+t+" not found")}return n.value},m.prototype.set=function(t,r){var n=this.root,e=this.sort,i=l(n,e,t,new E(sr,sr,t,r));return i===n?this:new m(i,e)},m.prototype.remove=function(t){var r=this.root,n=this.sort,e=v(r,n,t);return e===r?this:new m(e,n)},m.prototype.modify=function(t,r){var n=this.root,e=this.sort,i=y(n,e,t,r);return i===n?this:new m(i,e)},z.prototype.copy=function(t,r){return new z(t,r,this.key)},z.prototype.modify=function(t){var r=t.key;return this.key===r?this:new z(this.left,this.right,r)},z.prototype.forEach=function(t){this.left.forEach(t),t(this.key),this.right.forEach(t)},k.prototype=Object.create(cr),k.prototype[hr]=function(r){if(null===r.hash){var n=[];r.forEach(function(r){n.push(t(r))});var e="  ";r.hash=r.sort===c?"(Set"+d(n,e)+")":"(SortedSet "+t(r.sort)+d(n,e)+")"}return r.hash},k.prototype[ar]=i,k.prototype.forEach=function(t){this.root.forEach(t)},k.prototype.isEmpty=function(){return this.root===sr},k.prototype.has=function(t){return p(this.root,this.sort,t)!==sr},k.prototype.add=function(t){var r=this.root,n=this.sort,e=l(r,n,t,new z(sr,sr,t));return e===r?this:new k(e,n)},k.prototype.remove=function(t){var r=this.root,n=this.sort,e=v(r,n,t);return e===r?this:new k(e,n)},k.prototype.union=function(t){var r=this;return t.forEach(function(t){r=r.add(t)}),r},k.prototype.intersect=function(t){var r=this;if(r.root===sr)return r;var n=new k(sr,r.sort);return t.forEach(function(t){r.has(t)&&(n=n.add(t))}),n},k.prototype.disjoint=function(t){var r=this;return t.forEach(function(t){r=r.has(t)?r.remove(t):r.add(t)}),r},k.prototype.subtract=function(t){var r=this;return r.root!==sr&&t.forEach(function(t){r=r.remove(t)}),r},x.prototype.forEach=function(t){for(var r=this;r!==sr;)t(r.car),r=r.cdr},x.prototype.forEachRev=function(t){this.cdr.forEachRev(t),t(this.car)};var pr=125,lr=Math.ceil,yr=Math.floor;M.prototype.copy=function(t,r){return new M(t,r,this.array)},M.prototype.forEach=function(t){this.left.forEach(t),this.array.forEach(function(r){t(r)}),this.right.forEach(t)},P.prototype=Object.create(cr),P.prototype[hr]=function(r){if(null===r.hash){var n=[];r.forEach(function(r){n.push(t(r))}),r.hash="(List"+d(n,"  ")+")"}return r.hash},P.prototype[ar]=i,P.prototype.forEach=function(t){this.root.forEach(t),this.tail.forEachRev(t)},P.prototype.isEmpty=function(){return this.root===sr&&this.tail===sr},P.prototype.size=function(){return this.root.size+this.tail_size},P.prototype.has=function(t){var r=this.size();return 0>t&&(t+=r),B(t,r)},P.prototype.get=function(t,r){var n=this.size();if(0>t&&(t+=n),B(t,n)){var e=this.root,i=e.size;return i>t?q(e,t):R(this.tail,this.tail_size,t-i)}if(2===arguments.length)return r;throw Error("Index "+t+" is not valid")},P.prototype.insert=function(t,r){1===arguments.length&&(r=-1);var n=this.size();0>r&&(r+=n+1);var e=this.root,i=this.tail,o=this.tail_size;if(r===n){if(o===pr){var u=a(e,new M(sr,sr,I(i,o)));return new P(u,new x(t,sr),1)}return new P(e,new x(t,i),o+1)}if(B(r,n)){var h=e.size;if(h>r)return new P(J(e,r,t),i,o);var f=S(I(i,o),r-h,t),u=a(e,new M(sr,sr,f));return new P(u,sr,0)}throw Error("Index "+r+" is not valid")},P.prototype.remove=function(t){0===arguments.length&&(t=-1);var r=this.size();0>t&&(t+=r);var n=this.root,e=this.tail,i=this.tail_size;if(e!==sr&&t===r-1)return new P(n,e.cdr,i-1);if(B(t,r)){var o=n.size;if(o>t)return new P(Q(n,t),e,i);var u=j(I(e,i),t-o),h=a(n,new M(sr,sr,u));return new P(h,sr,0)}throw Error("Index "+t+" is not valid")},P.prototype.modify=function(t,r){var n=this.size();if(0>t&&(t+=n),B(t,n)){var e=this.root,i=this.tail,o=this.tail_size,u=e.size;if(i!==sr&&t===n-1){var h=r(i.car);return h===i.car?this:new P(e,new x(h,i.cdr),o)}if(u>t){var f=L(e,t,r);return f===e?this:new P(f,i,o)}var s=I(i,o),c=_(s,t-u,r);if(c===s)return this;var f=a(e,new M(sr,sr,c));return new P(f,sr,0)}throw Error("Index "+t+" is not valid")},P.prototype.slice=function(t,r){var n=this.size();if(null==t&&(t=0),null==r&&(r=n),0>t&&(t+=n),0>r&&(r+=n),0===t&&r===n)return this;if(t>r)throw Error("Index "+t+" is greater than index "+r);if(B(t,n)){if(t===r)return new P(sr,sr,0);if(r>0&&n>=r){var e=this.root,i=e.size,o=[];if(i>=t&&K(o,e,t,r),r>i){var u=I(this.tail,this.tail_size);C(o,A(u,t-i,r-i))}return new P(O(o),sr,0)}throw Error("Index "+r+" is not valid")}throw Error("Index "+t+" is not valid")},P.prototype.concat=function(t){if(t instanceof P){var r=this.root,n=this.tail,e=t.root,i=t.tail;if(e===sr&&i===sr)return this;if(r===sr&&n===sr)return t;n!==sr&&(r=a(r,new M(sr,sr,I(n,this.tail_size))));var o=h(r,e);return new P(o,i,t.tail_size)}var u=this;return t.forEach(function(t){u=u.insert(t)}),u},F.prototype=Object.create(cr),F.prototype[ar]=i,F.prototype.isEmpty=function(){return this.left===sr&&this.right===sr},F.prototype.forEach=function(t){this.left.forEach(t),this.right.forEachRev(t)},F.prototype[hr]=function(r){if(null===r.hash){var n=[];r.forEach(function(r){n.push(t(r))}),r.hash="(Queue"+d(n,"  ")+")"}return r.hash},F.prototype.size=function(){return this.len},F.prototype.peek=function(t){if(this.isEmpty()){if(1===arguments.length)return t;throw Error("Cannot peek from an empty queue")}return this.left.car},F.prototype.push=function(t){return this.isEmpty()?new F(new x(t,this.left),this.right,this.len+1):new F(this.left,new x(t,this.right),this.len+1)},F.prototype.pop=function(){if(this.isEmpty())throw Error("Cannot pop from an empty queue");var t=this.left.cdr;if(t===sr){var r=sr;return this.right.forEach(function(t){r=new x(t,r)}),new F(r,sr,this.len-1)}return new F(t,this.right,this.len-1)},F.prototype.concat=function(t){var r=this;return t.forEach(function(t){r=r.push(t)}),r},G.prototype=Object.create(cr),G.prototype[ar]=i,G.prototype.isEmpty=function(){return this.root===sr},G.prototype[hr]=function(r){if(null===r.hash){var n=[];r.forEach(function(r){n.push(t(r))}),r.hash="(Stack"+d(n,"  ")+")"}return r.hash},G.prototype.forEach=function(t){this.root.forEachRev(t)},G.prototype.size=function(){return this.len},G.prototype.peek=function(t){if(this.isEmpty()){if(1===arguments.length)return t;throw Error("Cannot peek from an empty stack")}return this.root.car},G.prototype.push=function(t){return new G(new x(t,this.root),this.len+1)},G.prototype.pop=function(){if(this.isEmpty())throw Error("Cannot pop from an empty stack");return new G(this.root.cdr,this.len-1)},G.prototype.concat=function(t){var r=this;return t.forEach(function(t){r=r.push(t)}),r},function(t,r){"function"==typeof define&&define.amd?define(["exports"],r):"object"==typeof exports?r(exports):(t.Immutable={},r(t.Immutable))}(this,function(t){t.equal=H,t.toJS=n,t.isDict=N,t.isSet=T,t.isSortedDict=U,t.isSortedSet=V,t.isList=W,t.isQueue=X,t.isStack=Y,t.isImmutable=Z,t.SortedDict=tr,t.SortedSet=rr,t.Dict=nr,t.Set=er,t.List=ir,t.Queue=or,t.Stack=ur,t.simpleSort=s,t.defaultSort=c,t._nil=sr})}).call(this);
//# sourceMappingURL=index.js.map