/**
 * @license
 *
 * Version 6.5.0
 *
 * (c) 2014, 2015 Oni Labs, http://onilabs.com
 *
 * This file is licensed under the terms of the MIT License:
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
(function(){"use strict";function t(t){for(var r=t.length,n=Array(r),e=0;r>e;++e)n[e]=t[e];return n}function r(t,r,n){for(var e=t.length+1,o=Array(e),i=0;r>i;)o[i]=t[i],++i;for(o[i]=n,++i;e>i;)o[i]=t[i-1],++i;return o}function n(r,n,e){var o=r[n],i=e(o);if(o===i)return r;var u=t(r);return u[n]=i,u}function e(t,r){for(var n=t.length-1,e=Array(n),o=0;r>o;)e[o]=t[o],++o;for(;n>o;)e[o]=t[o+1],++o;return e}function o(t){return"string"==typeof t&&Nn.test(t)}function i(t){return"string"==typeof t&&(Rn.test(t)||Mn.test(t))}function u(t){return"string"==typeof t&&Mn.test(t)}function f(){var t=arguments.length;if(0===t)return"(Tag "+Dn+" "+ ++Jn+")";throw Error("Expected 0 arguments but got "+t)}function a(t){var r=arguments.length;if(1===r){if(o(t))return"(UUIDTag "+t+")";throw Error("Expected a lower-case UUID, but got: "+t)}throw Error("Expected 1 argument but got "+r)}function s(t,r){return t===r||K(t)===K(r)}function h(t){var r=0;return{next:function(){return t.length>r?{value:t[r++]}:{done:!0}}}}function c(t){return rn(t)?null!=t[qn]||null!==Ln&&null!=t[Ln]||Array.isArray(t):"string"==typeof t&&!i(t)}function p(t){var r;if(null!=(r=t[qn]))return r.call(t);if(null!==Ln&&null!=(r=t[Ln]))return r.call(t);if(Array.isArray(t))return h(t);if("string"!=typeof t||i(t))throw Error("Cannot iter: "+t);return h(t)}function l(t){function r(){return t()}var n={};return n[qn]=r,null!==Ln&&(n[Ln]=r),n}function v(t,r){for(;;){var n=t.next();if(n.done)break;r(n.value)}}function y(t,r){return{next:function(){var n=t.next();return n.done?{done:!0}:{value:r(n.value)}}}}function g(t,r){var n=!1,e=!1;return{next:function(){for(;;)if(n){if(e)return{done:!0};var o=r.next();if(!o.done)return{value:o.value};e=!0}else{var o=t.next();if(!o.done)return{value:o.value};n=!0}}}}function d(t,r){for(var n=p(t);;){var e=n.next();if(e.done)return!1;if(r(e.value))return!0}}function w(t,r){for(var n=p(t);;){var e=n.next();if(e.done)return!0;if(!r(e.value))return!1}}function m(t,r,n){for(var e=p(t);;){var o=e.next();if(o.done){if(3===arguments.length)return n;throw Error("Did not find anything")}if(r(o.value))return o.value}}function b(t,r){var n=[],e=[],o=Hn,i=!1;return Wr([l(function(){return o===Hn&&(o=p(t)),{next:function(){for(;;){if(n.length)return n.shift();if(i)return{done:!0};var t=o.next();if(t.done)i=!0;else{if(r(t.value))return{value:t.value};e.push({value:t.value})}}}}}),l(function(){return o===Hn&&(o=p(t)),{next:function(){for(;;){if(e.length)return e.shift();if(i)return{done:!0};var t=o.next();if(t.done)i=!0;else{if(!r(t.value))return{value:t.value};n.push({value:t.value})}}}}})])}function E(t,r){var n=2===arguments.length;return l(function(){var e=_(t).map(function(t){return p(t)}),o=!1;return{next:function(){for(;;){if(o)return{done:!0};for(var t=[],i=!1,u=0,f=e.length;f>u;++u){var a=e[u].next();if(a.done){if(!n){i=!1;break}t.push(r)}else i=!0,t.push(a.value)}if(i)return{value:Wr(t)};o=!0}}}})}function x(t){var r=[];v(t,function(t){r.push(t)});var n=r.length;return{next:function(){return n?{value:r[--n]}:{done:!0}}}}function k(t,r,n){return I(t,function(t){r=n(r,t)}),r}function S(t,r,n){return k(R(t),r,function(t,r){return n(r,t)})}function _(t){if(Array.isArray(t))return t;var r=[];return I(t,function(t){r.push(t)}),r}function z(t,r){var n=1===arguments.length?"":r;return"string"==typeof t&&""===n?t:_(t).join(n)}function O(t,r){var n=!1,e=Hn;return{next:function(){for(;;){if(n)return{done:!0};if(e===Hn){var o=t.next();o.done?n=!0:e=r(o.value)}else{var o=e.next();if(!o.done)return{value:o.value};e=Hn}}}}}function A(t){return nn(t)?N(Object.keys(t),function(r){return[r,t[r]]}):t}function I(t,r){v(p(t),r)}function j(t,r,n){for(var e=p(t),o=0;;){var i=e.next();if(i.done){if(3===arguments.length)return n;throw Error("Did not find anything")}if(r(i.value))return o;++o}}function T(t,r,n){return 3===arguments.length?j(t,function(t){return s(t,r)},n):j(t,function(t){return s(t,r)})}function C(t,r){if(!Zr(r))throw Error("Count must be an integer: "+r);if(0>r)throw Error("Count cannot be negative: "+r);return l(function(){var n=p(t),e=!1;return{next:function(){for(;;){if(0>r)throw Error("Invalid count: "+r);if(e)return{done:!0};var t=n.next();if(t.done)e=!0;else{if(0!==r)return--r,{value:t.value};e=!0}}}}})}function D(t,r){if(!Zr(r))throw Error("Count must be an integer: "+r);if(0>r)throw Error("Count cannot be negative: "+r);return l(function(){var n=p(t),e=!1;return{next:function(){for(;;){if(0>r)throw Error("Invalid count: "+r);if(e)return{done:!0};var t=n.next();if(t.done)e=!0;else{if(0===r)return{value:t.value};--r}}}}})}function J(t,r,n){var e=arguments.length,o=1>e?0:t,i=2>e?1/0:r,u=3>e?1:n;if(0>u)throw Error("Step cannot be negative: "+u);return l(function(){if(i>o)var t=function(){if(i>o){var t=o;return o+=u,{value:t}}return{done:!0}};else var t=function(){if(o>i){var t=o;return o-=u,{value:t}}return{done:!0}};return{next:t}})}function U(t,r){var n=arguments.length<2?1/0:r;if(!Zr(n))throw Error("Count must be an integer: "+n);if(0>n)throw Error("Count cannot be negative: "+n);return l(function(){return{next:function(){if(0>n)throw Error("Invalid count: "+n);return 0===n?{done:!0}:(--n,{value:t})}}})}function N(t,r){return l(function(){return y(p(t),r)})}function R(t){return l(function(){return x(p(t))})}function M(t,r){return l(function(){var n=p(t);return{next:function(){for(;;){var t=n.next();if(t.done)return{done:!0};if(r(t.value))return{value:t.value}}}}})}function L(t){return'"'+t.replace(/[\\\"\n]/g,function(t){return"\n"===t?t+" ":"\\"+t})+'"'}function Q(t){var r;return null!==Qn&&null!=(r=Qn(t))?"(Symbol.for "+K(r)+")":(r=Xn[t],null==r&&(r=Xn[t]=++Wn),"(Symbol "+r+")")}function K(t){var r=typeof t;if("string"===r)return i(t)?t:L(t);if("number"===r||"boolean"===r||"undefined"===r||null===t)return""+t;if("symbol"===r)return Q(t);var n=t[Kn];if(null!=n)return n(t);if(Object.isExtensible(t)){var e="(Mutable "+ ++Vn+")";return Object.defineProperty(t,Kn,{configurable:!1,enumerable:!1,writable:!1,value:function(){return e}}),e}throw Error("Cannot use a non-extensible object as a key: "+t)}function q(t,r){var n=0,e=[];I(t,function(t){an(t,function(t,r){t=K(t),r=K(r),t=t.split(/\n/),I(t,function(t){n=Math.max(n,t.length)}),e.push({key:t,value:r})})});var r="  ";return e=N(e,function(t){var r=t.key.length-1;t.key[r]=on(t.key[r],n," ");var e=z(t.key,"\n"),o=t.value.replace(/\n/g,"\n"+en(" ",n+3));return e+" = "+o}),$(e,r)}function F(t){return function(r){if(null===r.hash){var n=N(r,function(t){return K(t)});r.hash="("+t+$(n,"  ")+")"}return r.hash}}function $(t,r){var n="\n"+r;return z(N(t,function(t){return n+t.replace(/\n/g,n)}))}function P(t){var r=typeof t;if(i(t)){if(u(t))return t;throw Error("Cannot convert Tag from JSON, use UUIDTag instead: "+t)}if("string"===r||"boolean"===r||null===t||tn(t))return t;if(rn(t)){var r=t[$n];if(null!=r){var n=Bn[r];if(null!=n)return n(t);throw Error("Cannot handle type "+r)}if(Array.isArray(t))return t.map(P);if(nn(t)){var e={};return Object.keys(t).forEach(function(r){e[P(r)]=P(t[r])}),e}throw Error("Cannot convert from JSON: "+t)}throw Error("Cannot convert from JSON: "+t)}function B(t){var r=typeof t;if(i(t)){if(u(t))return t;throw Error("Cannot convert Tag to JSON, use UUIDTag instead: "+t)}if("string"===r||"boolean"===r||null===t||tn(t))return t;if(rn(t)){var n=t[Pn];if(null!=n)return n(t);if("function"==typeof t.toJSON)return B(t.toJSON());if(Array.isArray(t))return t.map(B);if(nn(t)){var e={};return Object.keys(t).forEach(function(r){e[B(r)]=B(t[r])}),e}throw Error("Cannot convert to JSON: "+t)}throw Error("Cannot convert to JSON: "+t)}function G(t,r){var n={};return n[$n]=t,n.keys=[],n.values=[],I(r,function(t){an(t,function(t,r){n.keys.push(B(t)),n.values.push(B(r))})}),n}function H(t,r){var n={};return n[$n]=t,n.values=[],I(r,function(t){n.values.push(B(t))}),n}function V(t){for(var r=t.keys,n=t.values,e=r.length,o=Array(e),i=0;e>i;++i)o[i]=[P(r[i]),P(n[i])];return o}function W(t){for(var r=t.values,n=r.length,e=Array(n),o=0;n>o;++o)e[o]=P(r[o]);return e}function X(t,r){return t>r?t:r}function Y(t,r,n){var e=r.depth,o=n.depth;if(e>o+1){var i=r.left,u=r.right;return u.depth>i.depth?u.copy(r.copy(i,u.left),t.copy(u.right,n)):r.copy(i,t.copy(u,n))}if(o>e+1){var f=n.right,a=n.left;return a.depth>f.depth?a.copy(t.copy(r,a.left),n.copy(a.right,f)):n.copy(t.copy(r,a),f)}return t.copy(r,n)}function Z(t,r){if(t===Gn)return r;if(r===Gn)return t;if(r.depth>t.depth){var n=Z(t,r.left);return Y(r,n,r.right)}var e=Z(t.right,r);return Y(t,t.left,e)}function tr(t,r){return t===Gn?r:Y(t,tr(t.left,r),t.right)}function rr(t,r){return t===Gn?r:Y(t,t.left,rr(t.right,r))}function nr(t){for(var r=[];t!==Gn;)r.push(t),t=t.left;return{next:function(){if(r.length){var n=r.pop();for(t=n.right;t!==Gn;)r.push(t),t=t.left;return{value:n}}return{done:!0}}}}function er(){return K(this)}function or(){return B(this)}function ir(t,r){return t>=0&&r>t}function ur(t,r){return t>=0&&r>=t}function fr(t){var r=this.size();return 0>t&&(t+=r),ir(t,r)}function ar(t,r){this.car=t,this.cdr=r}function sr(t){return{next:function(){if(t===Gn)return{done:!0};var r=t.car;return t=t.cdr,{value:r}}}}function hr(t,r){for(;t!==Gn;)r(t.car),t=t.cdr}function cr(t,r){if(t.length){var n=t[t.length-1];te>=n.length+r.length?t[t.length-1]=n.concat(r):t.push(r)}else t.push(r)}function pr(t,r,n){if(n>r){var e=ne((r+n)/2),o=pr(t,r,e),i=pr(t,e+1,n);return new dr(o,i,t[e])}return Gn}function lr(t){return pr(t,0,t.length)}function vr(t,r,n){0>r&&(r=0);var e=t.length;return n>e&&(n=e),0===r&&n===e?t:t.slice(r,n)}function yr(t,r){for(var n=Array(r);r--;)n[r]=t.car,t=t.cdr;return n}function gr(t,r,n){for(;--r!==n;)t=t.cdr;return t.car}function dr(t,r,n){this.left=t,this.right=r,this.array=n,this.size=t.size+r.size+n.length,this.depth=X(t.depth,r.depth)+1}function wr(t,r){for(;;){var n=t.left,e=n.size;if(e>r)t=n;else{r-=e;var o=t.array,i=o.length;if(i>r)return o[r];r-=i,t=t.right}}}function mr(t,n,e){if(t===Gn)return new dr(Gn,Gn,[e]);var o=t.left,i=t.right,u=o.size;if(u>n){var f=mr(o,n,e);return Y(t,f,i)}n-=u;var a=t.array,s=a.length;if(s>=n){if(a=r(a,n,e),s===te){var h=re(a.length/2),c=a.slice(0,h),p=a.slice(h);return i.depth>o.depth?new dr(rr(o,new dr(Gn,Gn,c)),i,p):new dr(o,tr(i,new dr(Gn,Gn,p)),c)}return new dr(o,i,a)}var f=mr(i,n-s,e);return Y(t,o,f)}function br(t,r,e){var o=t.left,i=t.right,u=o.size;if(u>r){var f=br(o,r,e);return f===o?t:t.copy(f,i)}r-=u;var a=t.array,s=a.length;if(s>r){var h=n(a,r,e);return h===a?t:new dr(o,i,h)}var f=br(i,r-s,e);return f===i?t:t.copy(o,f)}function Er(t,r){var n=t.left,o=t.right,i=n.size;if(i>r){var u=Er(n,r);return Y(t,u,o)}r-=i;var f=t.array,a=f.length;if(a>r)return f=e(f,r),0===f.length?Z(n,o):new dr(n,o,f);var u=Er(o,r-a);return Y(t,n,u)}function xr(t,r,n,e){if(r!==Gn){var o=r.left,i=o.size;i>n&&xr(t,o,n,e);var u=r.array,f=u.length;n-=i,e-=i,f>n&&e>0&&cr(t,vr(u,n,e)),e>f&&xr(t,r.right,n-f,e-f)}}function kr(t,r){if(t===Gn)return new dr(Gn,Gn,r);var n=t.left,e=t.right,o=t.array;return e===Gn&&te>=o.length+r.length?new dr(n,e,o.concat(r)):Y(t,n,kr(e,r))}function Sr(t,r,n){this.root=t,this.tail=r,this.tail_size=n,this.hash=null}function _r(t){return t instanceof Sr}function zr(t){return 0===arguments.length?new Sr(Gn,Gn,0):t instanceof Sr?t:new Sr(Gn,Gn,0).concat(t)}function Or(t,r){return t===r?0:r>t?-1:1}function Ar(t,r,n){for(;t!==Gn;){var e=r(n,t.hash);if(0===e)break;t=0>e?t.left:t.right}return t}function Ir(t,r,n,e){if(t===Gn)return e;var o=t.left,i=t.right,u=r(n,t.hash);if(0===u)return t.modify(e);if(0>u){var f=Ir(o,r,n,e);return f===o?t:Y(t,f,i)}var f=Ir(i,r,n,e);return f===i?t:Y(t,o,f)}function jr(t,r,n,e,o){if(t===Gn)throw Error("Key "+e+" not found");var i=t.left,u=t.right,f=r(n,t.hash);if(0===f)return t.modify({key:e,hash:n,value:o(t.value)});if(0>f){var a=jr(i,r,n,e,o);return a===i?t:Y(t,a,u)}var a=jr(u,r,n,e,o);return a===u?t:Y(t,i,a)}function Tr(t,r,n){if(t===Gn)return t;var e=t.left,o=t.right,i=r(n,t.hash);if(0===i)return Z(e,o);if(0>i){var u=Tr(e,r,n);return u===e?t:Y(t,u,o)}var u=Tr(o,r,n);return u===o?t:Y(t,e,u)}function Cr(){return this.root===Gn}function Dr(t){return Ar(this.root,this.sort,this.hash_fn(t))!==Gn}function Jr(t){return function(r){var n=this.root,e=this.sort,o=this.hash_fn,i=Tr(n,e,o(r));return i===n?this:new t(i,e,o)}}function Ur(t){return k(A(t),this,function(t,r){return an(r,function(r,n){return t.set(r,n)})})}function Nr(){return this.len}function Rr(t){return k(t,this,function(t,r){return t.push(r)})}function Mr(t,r,n,e,o){this.left=t,this.right=r,this.hash=n,this.key=e,this.value=o,this.depth=X(t.depth,r.depth)+1}function Lr(t,r,n){this.root=t,this.sort=r,this.hash_fn=n,this.hash=null}function Qr(t){return t instanceof Lr}function Kr(t){return Qr(t)&&t.hash_fn===un}function qr(t,r){if(1===arguments.length)return new Lr(Gn,t,un);if(2===arguments.length)return Kr(r)&&r.sort===t?r:new Lr(Gn,t,un).merge(r);throw Error("Expected 1 to 2 arguments but got "+arguments.length)}function Fr(t){if(0===arguments.length)return new Lr(Gn,Or,K);if(1===arguments.length)return Qr(t)&&!Kr(t)?t:new Lr(Gn,Or,K).merge(t);throw Error("Expected 0 to 1 arguments but got "+arguments.length)}function $r(t){if(Array.isArray(t)){for(var r=zr(),n=0,e=t.length;e>n;++n)r=r.push($r(t[n]));return r}if(nn(t)){var r=Fr();return Object.keys(t).forEach(function(n){r=r.set($r(n),$r(t[n]))}),r}return t}function Pr(t){if(rn(t)){var r=t[Fn];if(null!=r)return r(t);if(Array.isArray(t))return t.map(Pr);if(nn(t)){var n={};return Object.keys(t).forEach(function(r){n[Pr(r)]=Pr(t[r])}),n}return t}return t}function Br(t){var r={};return I(t,function(t){an(t,function(t,n){if("string"!=typeof t)throw Error("Cannot convert to JavaScript: expected key to be string or Tag but got "+t);r[t]=Pr(n)})}),r}function Gr(t){var r=[];return I(t,function(t){r.push(Pr(t))}),r}function Hr(t){this._values=t,this.hash=null}function Vr(t){return t instanceof Hr}function Wr(t){return new Hr(t)}function Xr(t){if(0===arguments.length)return new Hr([]);if(Vr(t))return t;var r=[];return I(t,function(t){r.push(t)}),new Hr(r)}function Yr(t){return t!==t}function Zr(t){return Math.round(t)===t}function tn(t){return"number"==typeof t&&1/0!==t&&t!==-1/0&&!Yr(t)}function rn(t){return Object(t)===t}function nn(t){return rn(t)&&Object.getPrototypeOf(t)===Object.prototype}function en(t,r){return Array(r+1).join(t)}function on(t,r,n){var e=Math.max(0,r-t.length);return t+en(n,e)}function un(t){return t}function fn(t,r){return 1===t?r:r+"s"}function an(t,r){if(Array.isArray(t)){if(2===t.length)return r(t[0],t[1]);throw Error("Expected array with 2 elements but got "+t.length+" "+fn(t.length,"element"))}if(Vr(t)){if(2===t.size())return r(t.get(0),t.get(1));throw Error("Expected Tuple with 2 elements but got "+t.size()+" "+fn(t.size(),"element"))}throw Error("Expected array or Tuple but got: "+t)}function sn(t,r,n,e){this.left=t,this.right=r,this.hash=n,this.key=e,this.depth=X(t.depth,r.depth)+1}function hn(t,r,n){this.root=t,this.sort=r,this.hash_fn=n,this.hash=null}function cn(t){return t instanceof hn}function pn(t){return cn(t)&&t.hash_fn===un}function ln(t,r){if(1===arguments.length)return new hn(Gn,t,un);if(2===arguments.length)return pn(r)&&r.sort===t?r:new hn(Gn,t,un).union(r);throw Error("Expected 1 to 2 arguments but got "+arguments.length)}function vn(t){if(0===arguments.length)return new hn(Gn,Or,K);if(1===arguments.length)return cn(t)&&!pn(t)?t:new hn(Gn,Or,K).union(t);throw Error("Expected 0 to 1 arguments but got "+arguments.length)}function yn(t,r){this._type=t,this._values=r,this.hash=null}function gn(t){return t instanceof yn}function dn(t,r){if(1===arguments.length)return new yn(t,[]);if(2===arguments.length){if(gn(r)&&r._type===t)return r;var n=[];return I(r,function(t){n.push(t)}),new yn(t,n)}throw Error("Expected 1 to 2 arguments but got "+arguments.length)}function wn(t,r,n){this.left=t,this.right=r,this.len=n,this.hash=null}function mn(t){return t instanceof wn}function bn(t){return 0===arguments.length?new wn(Gn,Gn,0):t instanceof wn?t:new wn(Gn,Gn,0).concat(t)}function En(t,r){this.root=t,this.len=r,this.hash=null}function xn(t){return t instanceof En}function kn(t){return 0===arguments.length?new En(Gn,0):t instanceof En?t:new En(Gn,0).concat(t)}function Sn(t){if("string"!=typeof t)throw Error("Expected key to be a string or Tag but got "+t)}function _n(t,r){this.keys=t,this.values=r,this.hash=null}function zn(t){return t instanceof _n}function On(t){if(0===arguments.length)return new _n({},[]);if(zn(t))return t;var r={},n=[],e=N(A(t),function(t){return an(t,function(t,r){return Sn(t),[t,r]})}),o=_(e).sort(function(t,r){return Or(t[0],r[0])});return I(o,function(t){var e=t[0],o=t[1],i=r[e];null==i?r[e]=n.push(o)-1:n[i]=o}),new _n(r,n)}function An(t,r){this._id=++ee,this._value=t,this._onchange=r}function In(t){return jn(t)?t.get():t}function jn(t){return t instanceof An}function Tn(t,r){var n=arguments.length;if(1>n||n>2)throw Error("Expected 1 to 2 arguments but got "+n);return new An(t,r)}function Cn(t){if(rn(t))return Object.isFrozen(t)||Qr(t)||cn(t)||_r(t)||Vr(t)||mn(t)||xn(t)||zn(t)||gn(t);var r=typeof t;return"string"===r||"number"===r||"boolean"===r||"symbol"===r||null==t}var Dn="48de6fff-9d11-472d-a76f-ed77a59a5cbc",Jn=0,Un="[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}",Nn=RegExp("^"+Un+"$"),Rn=RegExp("^\\(Tag "+Dn+" [0-9]+\\)$"),Mn=RegExp("^\\(UUIDTag "+Un+"\\)$"),Ln="undefined"!=typeof Symbol&&void 0!==Symbol.iterator?Symbol.iterator:null,Qn="undefined"!=typeof Symbol&&void 0!==Symbol.keyFor?Symbol.keyFor:null,Kn=a("e1c3818d-4c4f-4703-980a-00969e4ca900"),qn=a("6199065c-b518-4cb3-8b41-ab70a9769ec3"),Fn=a("1b75a273-16bd-4248-be8a-e4b5e8c4b523"),$n=a("89d8297c-d95e-4ce9-bc9b-6b6f73fa6a37"),Pn=a("99e14916-bc99-4c48-81aa-299cf1ad6de3"),Bn={},Gn={};Gn.depth=0,Gn.size=0;var Hn={},Vn=0,Wn=0,Xn={},Yn={},Zn={};Yn.toString=Zn.toString=er,Yn.inspect=Zn.inspect=er,Zn.toJSON=or,null!==Ln&&(Yn[Ln]=Zn[Ln]=function(){return p(this)});var te=125,re=Math.ceil,ne=Math.floor;dr.prototype.copy=function(t,r){return new dr(t,r,this.array)},Sr.prototype=Object.create(Zn),Sr.prototype[Kn]=F("List"),Sr.prototype[Fn]=Gr,Sr.prototype.has=fr,Bn.List=function(t){return zr(W(t))},Sr.prototype[Pn]=function(t){return H("List",t)},Sr.prototype[qn]=function(){var t=O(nr(this.root),function(t){return p(t.array)});return g(t,x(sr(this.tail)))},Sr.prototype.isEmpty=function(){return this.root===Gn&&this.tail===Gn},Sr.prototype.removeAll=function(){return new Sr(Gn,Gn,0)},Sr.prototype.size=function(){return this.root.size+this.tail_size},Sr.prototype.get=function(t,r){var n=this.size(),e=0>t?t+n:t;if(ir(e,n)){var o=this.root,i=o.size;return i>e?wr(o,e):gr(this.tail,this.tail_size,e-i)}if(2===arguments.length)return r;throw Error("Index "+e+" is not valid")},Sr.prototype.insert=function(t,n){var e=arguments.length;if(2!==e)throw Error("Expected 2 arguments but got "+e);var o=this.size(),i=0>t?t+(o+1):t;if(i===o)return this.push(n);var u=this.root,f=this.tail,a=this.tail_size;if(ir(i,o)){var s=u.size;if(s>=i)return new Sr(mr(u,i,n),f,a);var h=r(yr(f,a),i-s,n);return new Sr(kr(u,h),Gn,0)}throw Error("Index "+i+" is not valid")},Sr.prototype.push=function(t){var r=this.root,n=this.tail,e=this.tail_size;if(e===te){var o=kr(r,yr(n,e));return new Sr(o,new ar(t,Gn),1)}return new Sr(r,new ar(t,n),e+1)},Sr.prototype.remove=function(t){var r=arguments.length;if(1!==r)throw Error("Expected 1 argument but got "+r);var n=this.size(),o=0>t?t+n:t,i=this.root,u=this.tail,f=this.tail_size;if(u!==Gn&&o===n-1)return new Sr(i,u.cdr,f-1);if(ir(o,n)){var a=i.size;if(a>o)return new Sr(Er(i,o),u,f);var s=e(yr(u,f),o-a);return new Sr(kr(i,s),Gn,0)}throw Error("Index "+o+" is not valid")},Sr.prototype.modify=function(t,r){var e=this.size(),o=0>t?t+e:t;if(ir(o,e)){var i=this.root,u=this.tail,f=this.tail_size,a=i.size;if(u!==Gn&&o===e-1){var s=r(u.car);return s===u.car?this:new Sr(i,new ar(s,u.cdr),f)}if(a>o){var h=br(i,o,r);return h===i?this:new Sr(h,u,f)}var c=yr(u,f),p=n(c,o-a,r);return p===c?this:new Sr(kr(i,p),Gn,0)}throw Error("Index "+o+" is not valid")},Sr.prototype.set=function(t,r){return this.modify(t,function(){return r})},Sr.prototype.slice=function(t,r){var n=this.size(),e=arguments.length,o=1>e?0:t,i=2>e?n:r;if("number"!=typeof o)throw Error("Expected a number but got "+o);if("number"!=typeof i)throw Error("Expected a number but got "+i);var u=0>o?o+n:o,f=0>i?i+n:i;if(0===u&&f===n)return this;if(u>f)throw Error("Index "+u+" is greater than index "+f);if(ur(u,n)){if(u===f)return new Sr(Gn,Gn,0);if(ur(f,n)){var a=this.root,s=a.size,h=[];if(s>=u&&xr(h,a,u,f),f>s){var c=yr(this.tail,this.tail_size);cr(h,vr(c,u-s,f-s))}return new Sr(lr(h),Gn,0)}throw Error("Index "+f+" is not valid")}throw Error("Index "+u+" is not valid")},Sr.prototype.concat=function(t){if(t instanceof Sr){var r=this.root,n=this.tail,e=t.root,o=t.tail;if(e===Gn&&o===Gn)return this;if(r===Gn&&n===Gn)return t;n!==Gn&&(r=kr(r,yr(n,this.tail_size)));var i=Z(r,e);return new Sr(i,o,t.tail_size)}return k(t,this,function(t,r){return t.push(r)})},Mr.prototype.copy=function(t,r){return new Mr(t,r,this.hash,this.key,this.value)},Mr.prototype.modify=function(t){var r=t.hash,n=t.key,e=t.value;return this.hash===r&&this.key===n&&this.value===e?this:new Mr(this.left,this.right,r,n,e)},Lr.prototype=Object.create(Zn),Lr.prototype[Fn]=Br,Lr.prototype.isEmpty=Cr,Lr.prototype.has=Dr,Lr.prototype.remove=Jr(Lr),Lr.prototype.merge=Ur,Lr.prototype[qn]=function(){return y(nr(this.root),function(t){return Wr([t.key,t.value])})},Lr.prototype[Kn]=function(t){return null===t.hash&&(t.hash=Qr(t)&&!Kr(t)?"(Dict"+q(t,"  ")+")":"(SortedDict "+K(t.sort)+q(t,"  ")+")"),t.hash},Bn.Dict=function(t){return Fr(V(t))},Lr.prototype[Pn]=function(t){if(Qr(t)&&!Kr(t))return G("Dict",t);throw Error("Cannot convert SortedDict to JSON")},Lr.prototype.removeAll=function(){return new Lr(Gn,this.sort,this.hash_fn)},Lr.prototype.get=function(t,r){var n=Ar(this.root,this.sort,this.hash_fn(t));if(n===Gn){if(2===arguments.length)return r;throw Error("Key "+t+" not found")}return n.value},Lr.prototype.set=function(t,r){var n=this.root,e=this.sort,o=this.hash_fn,i=o(t),u=Ir(n,e,i,new Mr(Gn,Gn,i,t,r));return u===n?this:new Lr(u,e,o)},Lr.prototype.modify=function(t,r){var n=this.root,e=this.sort,o=this.hash_fn,i=jr(n,e,o(t),t,r);return i===n?this:new Lr(i,e,o)},Hr.prototype=Object.create(Zn),Hr.prototype[Kn]=F("Tuple"),Hr.prototype[Fn]=Gr,Bn.Tuple=function(t){return Xr(W(t))},Hr.prototype[Pn]=function(t){return H("Tuple",t)},Hr.prototype[qn]=function(){return p(this._values)},Hr.prototype.size=function(){return this._values.length},Hr.prototype.isEmpty=function(){return 0===this._values.length},Hr.prototype.get=function(t){var r=this.size();if(ir(t,r))return this._values[t];throw Error("Index "+t+" is not valid")},Hr.prototype.modify=function(t,r){var e=this.size();if(ir(t,e)){var o=this._values,i=n(o,t,r);return i===o?this:new Hr(i)}throw Error("Index "+t+" is not valid")},Hr.prototype.set=function(t,r){return this.modify(t,function(){return r})},sn.prototype.copy=function(t,r){return new sn(t,r,this.hash,this.key)},sn.prototype.modify=function(t){var r=t.hash,n=t.key;return this.hash===r&&this.key===n?this:new sn(this.left,this.right,r,n)},hn.prototype=Object.create(Zn),hn.prototype[Fn]=Gr,hn.prototype.isEmpty=Cr,hn.prototype.has=Dr,hn.prototype.remove=Jr(hn),Bn.Set=function(t){return vn(W(t))},hn.prototype[qn]=function(){return y(nr(this.root),function(t){return t.key})},hn.prototype[Pn]=function(t){if(cn(t)&&!pn(t))return H("Set",t);throw Error("Cannot convert SortedSet to JSON")},hn.prototype[Kn]=function(t){if(null===t.hash){var r=N(t,function(t){return K(t)}),n="  ";t.hash=cn(t)&&!pn(t)?"(Set"+$(r,n)+")":"(SortedSet "+K(t.sort)+$(r,n)+")"}return t.hash},hn.prototype.removeAll=function(){return new hn(Gn,this.sort,this.hash_fn)},hn.prototype.add=function(t){var r=this.root,n=this.sort,e=this.hash_fn,o=e(t),i=Ir(r,n,o,new sn(Gn,Gn,o,t));return i===r?this:new hn(i,n,e)},hn.prototype.union=function(t){return k(t,this,function(t,r){return t.add(r)})},hn.prototype.intersect=function(t){var r=this;if(r.isEmpty())return r;var n=r.removeAll();return k(t,n,function(t,n){return r.has(n)?t.add(n):t})},hn.prototype.disjoint=function(t){var r=this;return k(t,r,function(t,n){return r.has(n)?t.remove(n):t.add(n)})},hn.prototype.subtract=function(t){return this.isEmpty()?this:k(t,this,function(t,r){return t.remove(r)})},yn.prototype=Object.create(Hr.prototype),yn.prototype[Kn]=function(t){if(null===t.hash){var r=N(t,function(t){return K(t)});t.hash="(Type "+K(t._type)+$(r,"  ")+")"}return t.hash},yn.prototype[Fn]=function(t){return{type:Pr(t._type),values:Gr(t)}},Bn.Type=function(t){return dn(P(t.type),W(t))},yn.prototype[Pn]=function(t){var r=H("Type",t);return r.type=B(t._type),r},yn.prototype.type=function(){return this._type},yn.prototype.modify=function(t,r){var e=this.size();if(ir(t,e)){var o=this._values,i=n(o,t,r);return i===o?this:new yn(this._type,i)}throw Error("Index "+t+" is not valid")},wn.prototype=Object.create(Zn),wn.prototype[Fn]=Gr,wn.prototype[Kn]=F("Queue"),wn.prototype.size=Nr,wn.prototype.concat=Rr,Bn.Queue=function(t){return bn(W(t))},wn.prototype[Pn]=function(t){return H("Queue",t)},wn.prototype.isEmpty=function(){return this.left===Gn&&this.right===Gn},wn.prototype.removeAll=function(){return new wn(Gn,Gn,0)},wn.prototype[qn]=function(){return g(sr(this.left),x(sr(this.right)))},wn.prototype.peek=function(t){var r=this.left;if(r===Gn){if(1===arguments.length)return t;throw Error("Cannot peek from an empty queue")}return r.car},wn.prototype.push=function(t){var r=this.left,n=this.right;return r===Gn&&n===Gn?new wn(new ar(t,r),n,this.len+1):new wn(r,new ar(t,n),this.len+1)},wn.prototype.pop=function(){var t=this.left,r=this.right;if(t===Gn)throw Error("Cannot pop from an empty queue");return t=t.cdr,t===Gn&&r!==Gn&&(hr(r,function(r){t=new ar(r,t)}),r=Gn),new wn(t,r,this.len-1)},En.prototype=Object.create(Zn),En.prototype[Fn]=Gr,En.prototype[Kn]=F("Stack"),En.prototype.isEmpty=Cr,En.prototype.size=Nr,En.prototype.concat=Rr,Bn.Stack=function(t){return kn(W(t))},En.prototype[qn]=function(){return x(sr(this.root))},En.prototype[Pn]=function(t){return H("Stack",t)},En.prototype.removeAll=function(){return new En(Gn,0)},En.prototype.peek=function(t){if(this.isEmpty()){if(1===arguments.length)return t;throw Error("Cannot peek from an empty stack")}return this.root.car},En.prototype.push=function(t){return new En(new ar(t,this.root),this.len+1)},En.prototype.pop=function(){if(this.isEmpty())throw Error("Cannot pop from an empty stack");return new En(this.root.cdr,this.len-1)},_n.prototype=Object.create(Zn),_n.prototype.update=Ur,_n.prototype[Fn]=Br,Bn.Record=function(t){return On(V(t))},_n.prototype[Pn]=function(t){return G("Record",t)},_n.prototype[Kn]=function(t){return null===t.hash&&(t.hash="(Record"+q(t,"  ")+")"),t.hash},_n.prototype[qn]=function(){var t=this.keys,r=this.values;return p(N(A(t),function(t){return an(t,function(t,n){return Wr([t,r[n]])})}))},_n.prototype.has=function(t){return Sn(t),null!=this.keys[t]},_n.prototype.isEmpty=function(){return 0===this.values.length},_n.prototype.get=function(t,r){Sn(t);var n=this.keys[t];if(null==n){if(2===arguments.length)return r;throw Error("Key "+t+" not found")}return this.values[n]},_n.prototype.set=function(t,r){return this.modify(t,function(){return r})},_n.prototype.modify=function(t,r){Sn(t);var e=this.keys,o=e[t];if(null==o)throw Error("Key "+t+" not found");var i=this.values,u=n(i,o,r);return u===i?this:new _n(e,u)};var ee=0;An.prototype=Object.create(Yn),An.prototype[Kn]=function(t){return"(Ref "+K(t._id)+")"},An.prototype.get=function(){return this._value},An.prototype.set=function(t){var r=this._value,n=this._onchange;this._value=null!=n?n(r,t):t},An.prototype.modify=function(t){this.set(t(this.get()))},function(t,r){"function"==typeof define&&define.amd?define(["exports"],r):"object"==typeof exports?r(exports):(t.Immutable={},r(t.Immutable))}(this,function(t){t.equal=s,t.fromJS=$r,t.toJS=Pr,t.isDict=Qr,t.isSet=cn,t.isSortedDict=Kr,t.isSortedSet=pn,t.isList=_r,t.isQueue=mn,t.isTuple=Vr,t.isStack=xn,t.isImmutable=Cn,t.SortedDict=qr,t.SortedSet=ln,t.isIterable=c,t.Dict=Fr,t.Set=vn,t.List=zr,t.Tuple=Xr,t.Queue=bn,t.Stack=kn,t.simpleSort=Or,t.isRecord=zn,t.Record=On,t.toJSON=B,t.fromJSON=P,t.deref=In,t.Ref=Tn,t.isRef=jn,t.isTag=i,t.isUUIDTag=u,t.Tag=f,t.UUIDTag=a,t.each=I,t.map=N,t.keep=M,t.findIndex=j,t.reverse=R,t.foldl=k,t.foldr=S,t.join=z,t.zip=E,t.toArray=_,t.any=d,t.all=w,t.find=m,t.partition=b,t.range=J,t.take=C,t.indexOf=T,t.toIterator=p,t.Iterable=l,t.repeat=U,t.skip=D,t.isType=gn,t.Type=dn})}).call(this);