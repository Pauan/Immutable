(function(){"use strict";function t(t,n){return Array(t+1).join(n)}function n(n,r){return(n+t(r," ")).slice(0,r)}function r(n,r){return(t(r," ")+n).slice(-r)}function e(t){t.forEach(function(t){console.log(t)})}function o(){var r=0;Xr.forEach(function(t){r=Math.max(r,t.name.length)}),Xr.forEach(function(o){Gr.add(t(Wr," ")+n(o.name,r),o.fn,{onStart:function(){e(o.messages)}})})}function i(n,r){u(t(70-Wr,"-")),u(n+":");var e=Wr,i=Xr;Wr+=2,Xr=[];try{r()}finally{o(),Wr=e,Xr=i}}function u(n){Yr.push(t(Wr," ")+n)}function a(t,n){n();var r=Yr;Yr=[],Xr.push({name:t,fn:n,messages:r})}function f(){o(),Gr.run()}function c(t){for(var n=t.length,r=Array(n),e=0;n>e;++e)r[e]=t[e];return r}function s(t,n,r){for(var e=t.length+1,o=Array(e),i=0;n>i;)o[i]=t[i],++i;for(o[i]=r,++i;e>i;)o[i]=t[i-1],++i;return o}function h(t,n,r){var e=t[n],o=r(e);if(e===o)return t;var i=c(t);return i[n]=o,i}function l(t,n){for(var r=t.length-1,e=Array(r),o=0;n>o;)e[o]=t[o],++o;for(;r>o;)e[o]=t[o+1],++o;return e}function p(t){return"string"==typeof t&&re.test(t)}function v(t){return"string"==typeof t&&(ee.test(t)||oe.test(t))}function m(t){return"string"==typeof t&&oe.test(t)}function g(){if(0===arguments.length)return"(Tag "+Zr+" "+ ++te+")";throw Error("Expected 0 arguments but got "+arguments.length)}function y(t){if(1===arguments.length){if(p(t))return"(UUIDTag "+t+")";throw Error("Expected a lower-case UUID, but got: "+t)}throw Error("Expected 1 argument but got "+arguments.length)}function d(t,n){return t===n||B(t)===B(n)}function b(t){var n=0;return{next:function(){return n<t.length?{value:t[n++]}:{done:!0}}}}function w(t){return ur(t)?null!=t[fe]||null!==ie&&null!=t[ie]||Array.isArray(t):"string"==typeof t&&!v(t)}function S(t){var n;if(null!=(n=t[fe]))return n.call(t);if(null!==ie&&null!=(n=t[ie]))return n.call(t);if(Array.isArray(t))return b(t);if("string"!=typeof t||v(t))throw Error("Cannot iter: "+t);return b(t)}function j(t){function n(){return t()}var r={};return r[fe]=n,null!==ie&&(r[ie]=n),r}function M(t,n){for(;;){var r=t.next();if(r.done)break;n(r.value)}}function I(t,n){return{next:function(){var r=t.next();return r.done?{done:!0}:{value:n(r.value)}}}}function E(t,n){var r=!1,e=!1;return{next:function(){for(;;)if(r){if(e)return{done:!0};var o=n.next();if(!o.done)return{value:o.value};e=!0}else{var o=t.next();if(!o.done)return{value:o.value};r=!0}}}}function x(t,n){for(var r=S(t);;){var e=r.next();if(e.done)return!1;if(n(e.value))return!0}}function A(t,n){for(var r=S(t);;){var e=r.next();if(e.done)return!0;if(!n(e.value))return!1}}function J(t,n,r){for(var e=S(t);;){var o=e.next();if(o.done){if(3===arguments.length)return r;throw Error("Did not find anything")}if(n(o.value))return o.value}}function L(t,n){var r=[],e=[],o=ve,i=!1;return rr([j(function(){return o===ve&&(o=S(t)),{next:function(){for(;;){if(r.length)return r.shift();if(i)return{done:!0};var t=o.next();if(t.done)i=!0;else{if(n(t.value))return{value:t.value};e.push({value:t.value})}}}}}),j(function(){return o===ve&&(o=S(t)),{next:function(){for(;;){if(e.length)return e.shift();if(i)return{done:!0};var t=o.next();if(t.done)i=!0;else{if(!n(t.value))return{value:t.value};r.push({value:t.value})}}}}})])}function k(t,n){var r=2===arguments.length;return j(function(){var e=_(t).map(function(t){return S(t)}),o=!1;return{next:function(){for(;;){if(o)return{done:!0};for(var t=[],i=!1,u=0,a=e.length;a>u;++u){var f=e[u].next();if(f.done){if(!r){i=!1;break}t.push(n)}else i=!0,t.push(f.value)}if(i)return{value:rr(t)};o=!0}}}})}function O(t){var n=[];M(t,function(t){n.push(t)});var r=n.length;return{next:function(){return r?{value:n[--r]}:{done:!0}}}}function z(t,n,r){return V(t,function(t){n=r(n,t)}),n}function C(t,n,r){return z(K(t),n,function(t,n){return r(n,t)})}function _(t){if(Array.isArray(t))return t;var n=[];return V(t,function(t){n.push(t)}),n}function R(t,n){return 1===arguments.length&&(n=""),"string"==typeof t&&""===n?t:_(t).join(n)}function D(t,n){var r=!1,e=ve;return{next:function(){for(;;){if(r)return{done:!0};if(e===ve){var o=t.next();o.done?r=!0:e=n(o.value)}else{var o=e.next();if(!o.done)return{value:o.value};e=ve}}}}}function T(t){return ar(t)?Q(Object.keys(t),function(n){return[n,t[n]]}):t}function V(t,n){M(S(t),n)}function U(t,n,r){for(var e=S(t),o=0;;){var i=e.next();if(i.done){if(3===arguments.length)return r;throw Error("Did not find anything")}if(n(i.value))return o;++o}}function N(t,n,r){return 3===arguments.length?U(t,function(t){return d(t,n)},r):U(t,function(t){return d(t,n)})}function q(t,n){if(Math.round(n)!==n)throw Error("Count must be an integer");if(0>n)throw Error("Count cannot be negative");return j(function(){var r=S(t);return{next:function(){for(;;){if(0>n)throw Error("Invalid count");if(0===n)return{done:!0};var t=r.next();if(!t.done)return--n,{value:t.value};n=0}}}})}function H(t,n,r){if(arguments.length<1&&(t=0),arguments.length<2&&(n=1/0),arguments.length<3&&(r=1),0>r)throw Error("Step cannot be negative");return j(function(){if(n>t)var e=function(){if(n>t){var e=t;return t+=r,{value:e}}return{done:!0}};else var e=function(){if(t>n){var e=t;return t-=r,{value:e}}return{done:!0}};return{next:e}})}function Q(t,n){return j(function(){return I(S(t),n)})}function K(t){return j(function(){return O(S(t))})}function $(t,n){return j(function(){var r=S(t);return{next:function(){for(;;){var t=r.next();if(t.done)return{done:!0};if(n(t.value))return{value:t.value}}}}})}function F(t){return'"'+t.replace(/[\\\"\n]/g,function(t){return"\n"===t?t+" ":"\\"+t})+'"'}function P(t){var n;return null!==ue&&null!=(n=ue(t))?"(Symbol.for "+B(n)+")":(n=ye[t],null==n&&(n=ye[t]=++ge),"(Symbol "+n+")")}function B(t){var n=typeof t;if("string"===n)return v(t)?t:F(t);if("number"===n||"boolean"===n||"undefined"===n||null===t)return""+t;if("symbol"===n)return P(t);var r=t[ae];if(null!=r)return r(t);if(Object.isExtensible(t)){var e="(Mutable "+ ++me+")";return Object.defineProperty(t,ae,{configurable:!1,enumerable:!1,writable:!1,value:function(){return e}}),e}throw Error("Cannot use a non-extensible object as a key: "+t)}function G(t,n){var r=0,e=[];V(t,function(t){lr(t,function(t,n){t=B(t),n=B(n),t=t.split(/\n/),V(t,function(t){r=Math.max(r,t.length)}),e.push({key:t,value:n})})});var n="  ";return e=Q(e,function(t){var n=t.key.length-1;t.key[n]=cr(t.key[n],r," ");var e=R(t.key,"\n"),o=t.value.replace(/\n/g,"\n"+fr(" ",r+3));return e+" = "+o}),X(e,n)}function W(t){return function(n){if(null===n.hash){var r=Q(n,function(t){return B(t)});n.hash="("+t+X(r,"  ")+")"}return n.hash}}function X(t,n){var r="\n"+n;return R(Q(t,function(t){return r+t.replace(/\n/g,r)}))}function Y(t){var n=typeof t;if(v(t)){if(m(t))return t;throw Error("Cannot convert Tag from JSON, use UUIDTag instead: "+t)}if("string"===n||"boolean"===n||null===t||ir(t))return t;if(ur(t)){var n=t[se];if(null!=n){var r=le[n];if(null!=r)return r(t);throw Error("Cannot handle type "+n)}if(Array.isArray(t))return t.map(Y);if(ar(t)){var e={};return Object.keys(t).forEach(function(n){e[Y(n)]=Y(t[n])}),e}throw Error("Cannot convert from JSON: "+t)}throw Error("Cannot convert from JSON: "+t)}function Z(t){var n=typeof t;if(v(t)){if(m(t))return t;throw Error("Cannot convert Tag to JSON, use UUIDTag instead: "+t)}if("string"===n||"boolean"===n||null===t||ir(t))return t;if(ur(t)){var r=t[he];if(null!=r)return r(t);if("function"==typeof t.toJSON)return Z(t.toJSON());if(Array.isArray(t))return t.map(Z);if(ar(t)){var e={};return Object.keys(t).forEach(function(n){e[Z(n)]=Z(t[n])}),e}throw Error("Cannot convert to JSON: "+t)}throw Error("Cannot convert to JSON: "+t)}function tn(t,n){var r={};return r[se]=t,r.keys=[],r.values=[],V(n,function(t){lr(t,function(t,n){r.keys.push(Z(t)),r.values.push(Z(n))})}),r}function nn(t,n){var r={};return r[se]=t,r.values=[],V(n,function(t){r.values.push(Z(t))}),r}function rn(t){for(var n=t.keys,r=t.values,e=n.length,o=Array(e),i=0;e>i;++i)o[i]=[Y(n[i]),Y(r[i])];return o}function en(t){for(var n=t.values,r=n.length,e=Array(r),o=0;r>o;++o)e[o]=Y(n[o]);return e}function on(t,n){return t>n?t:n}function un(t,n,r){var e=n.depth,o=r.depth;if(e>o+1){var i=n.left,u=n.right;return u.depth>i.depth?u.copy(n.copy(i,u.left),t.copy(u.right,r)):n.copy(i,t.copy(u,r))}if(o>e+1){var a=r.right,f=r.left;return f.depth>a.depth?f.copy(t.copy(n,f.left),r.copy(f.right,a)):r.copy(t.copy(n,f),a)}return t.copy(n,r)}function an(t,n){if(t===pe)return n;if(n===pe)return t;if(t.depth<n.depth){var r=an(t,n.left);return un(n,r,n.right)}var e=an(t.right,n);return un(t,t.left,e)}function fn(t,n){return t===pe?n:un(t,fn(t.left,n),t.right)}function cn(t,n){return t===pe?n:un(t,t.left,cn(t.right,n))}function sn(t){for(var n=[];t!==pe;)n.push(t),t=t.left;return{next:function(){if(n.length){var r=n.pop();for(t=r.right;t!==pe;)n.push(t),t=t.left;return{value:r}}return{done:!0}}}}function hn(){return B(this)}function ln(){return Z(this)}function pn(t,n){return t>=0&&n>t}function vn(t){var n=this.size();return 0>t&&(t+=n),pn(t,n)}function mn(t,n){this.car=t,this.cdr=n}function gn(t){return{next:function(){if(t===pe)return{done:!0};var n=t.car;return t=t.cdr,{value:n}}}}function yn(t,n){for(;t!==pe;)n(t.car),t=t.cdr}function dn(t,n){if(t.length){var r=t[t.length-1];r.length+n.length<=we?t[t.length-1]=r.concat(n):t.push(n)}else t.push(n)}function bn(t,n,r){if(r>n){var e=je((n+r)/2),o=bn(t,n,e),i=bn(t,e+1,r);return new In(o,i,t[e])}return pe}function wn(t){return bn(t,0,t.length)}function Sn(t,n,r){0>n&&(n=0);var e=t.length;return r>e&&(r=e),0===n&&r===e?t:t.slice(n,r)}function jn(t,n){for(var r=Array(n);n--;)r[n]=t.car,t=t.cdr;return r}function Mn(t,n,r){for(;--n!==r;)t=t.cdr;return t.car}function In(t,n,r){this.left=t,this.right=n,this.array=r,this.size=t.size+n.size+r.length,this.depth=on(t.depth,n.depth)+1}function En(t,n){for(;;){var r=t.left,e=r.size;if(e>n)t=r;else{n-=e;var o=t.array,i=o.length;if(i>n)return o[n];n-=i,t=t.right}}}function xn(t,n,r){if(t===pe)return new In(pe,pe,[r]);var e=t.left,o=t.right,i=e.size;if(i>n){var u=xn(e,n,r);return un(t,u,o)}n-=i;var a=t.array,f=a.length;if(f>=n){if(a=s(a,n,r),f===we){var c=Se(a.length/2),h=a.slice(0,c),l=a.slice(c);return e.depth<o.depth?new In(cn(e,new In(pe,pe,h)),o,l):new In(e,fn(o,new In(pe,pe,l)),h)}return new In(e,o,a)}var u=xn(o,n-f,r);return un(t,e,u)}function An(t,n,r){var e=t.left,o=t.right,i=e.size;if(i>n){var u=An(e,n,r);return u===e?t:t.copy(u,o)}n-=i;var a=t.array,f=a.length;if(f>n){var c=h(a,n,r);return c===a?t:new In(e,o,c)}var u=An(o,n-f,r);return u===o?t:t.copy(e,u)}function Jn(t,n){var r=t.left,e=t.right,o=r.size;if(o>n){var i=Jn(r,n);return un(t,i,e)}n-=o;var u=t.array,a=u.length;if(a>n)return u=l(u,n),0===u.length?an(r,e):new In(r,e,u);var i=Jn(e,n-a);return un(t,r,i)}function Ln(t,n,r,e){if(n!==pe){var o=n.left,i=o.size;i>r&&Ln(t,o,r,e);var u=n.array,a=u.length;r-=i,e-=i,a>r&&e>0&&dn(t,Sn(u,r,e)),e>a&&Ln(t,n.right,r-a,e-a)}}function kn(t,n,r){this.root=t,this.tail=n,this.tail_size=r,this.hash=null}function On(t){return t instanceof kn}function zn(t){return null!=t?t instanceof kn?t:new kn(pe,pe,0).concat(t):new kn(pe,pe,0)}function Cn(t,n){return t===n?0:n>t?-1:1}function _n(t,n,r){for(;t!==pe;){var e=n(r,t.hash);if(0===e)break;t=0>e?t.left:t.right}return t}function Rn(t,n,r,e){if(t===pe)return e;var o=t.left,i=t.right,u=n(r,t.hash);if(0===u)return t.modify(e);if(0>u){var a=Rn(o,n,r,e);return a===o?t:un(t,a,i)}var a=Rn(i,n,r,e);return a===i?t:un(t,o,a)}function Dn(t,n,r,e,o){if(t===pe)throw Error("Key "+e+" not found");var i=t.left,u=t.right,a=n(r,t.hash);if(0===a)return t.modify({key:e,hash:r,value:o(t.value)});if(0>a){var f=Dn(i,n,r,e,o);return f===i?t:un(t,f,u)}var f=Dn(u,n,r,e,o);return f===u?t:un(t,i,f)}function Tn(t,n,r){if(t===pe)return t;var e=t.left,o=t.right,i=n(r,t.hash);if(0===i)return an(e,o);if(0>i){var u=Tn(e,n,r);return u===e?t:un(t,u,o)}var u=Tn(o,n,r);return u===o?t:un(t,e,u)}function Vn(){return this.root===pe}function Un(t){return _n(this.root,this.sort,this.hash_fn(t))!==pe}function Nn(t){return function(n){var r=this.root,e=this.sort,o=this.hash_fn,i=Tn(r,e,o(n));return i===r?this:new t(i,e,o)}}function qn(t){return z(T(t),this,function(t,n){return lr(n,function(n,r){return t.set(n,r)})})}function Hn(){return this.len}function Qn(t){return z(t,this,function(t,n){return t.push(n)})}function Kn(t,n,r,e,o){this.left=t,this.right=n,this.hash=r,this.key=e,this.value=o,this.depth=on(t.depth,n.depth)+1}function $n(t,n,r){this.root=t,this.sort=n,this.hash_fn=r,this.hash=null}function Fn(t){return t instanceof $n}function Pn(t){return Fn(t)&&t.hash_fn===sr}function Bn(t,n){return null!=n?Pn(n)&&n.sort===t?n:new $n(pe,t,sr).merge(n):new $n(pe,t,sr)}function Gn(t){return null!=t?Fn(t)&&!Pn(t)?t:new $n(pe,Cn,B).merge(t):new $n(pe,Cn,B)}function Wn(t){if(Array.isArray(t)){for(var n=zn(),r=0,e=t.length;e>r;++r)n=n.insert(Wn(t[r]));return n}if(ar(t)){var n=Gn();return Object.keys(t).forEach(function(r){n=n.set(Wn(r),Wn(t[r]))}),n}return t}function Xn(t){if(ur(t)){var n=t[ce];if(null!=n)return n(t);if(Array.isArray(t))return t.map(Xn);if(ar(t)){var r={};return Object.keys(t).forEach(function(n){r[Xn(n)]=Xn(t[n])}),r}return t}return t}function Yn(t){var n={};return V(t,function(t){lr(t,function(t,r){if("string"!=typeof t)throw Error("Cannot convert to JavaScript: expected key to be string or Tag but got "+t);n[t]=Xn(r)})}),n}function Zn(t){var n=[];return V(t,function(t){n.push(Xn(t))}),n}function tr(t){this.values=t,this.hash=null}function nr(t){return t instanceof tr}function rr(t){return new tr(t)}function er(t){if(null!=t){if(nr(t))return t;var n=[];return V(t,function(t){n.push(t)}),new tr(n)}return new tr([])}function or(t){return t!==t}function ir(t){return"number"==typeof t&&1/0!==t&&t!==-1/0&&!or(t)}function ur(t){return Object(t)===t}function ar(t){return ur(t)&&Object.getPrototypeOf(t)===Object.prototype}function fr(t,n){return Array(n+1).join(t)}function cr(t,n,r){var e=Math.max(0,n-t.length);return t+fr(r,e)}function sr(t){return t}function hr(t,n){return 1===t?n:n+"s"}function lr(t,n){if(Array.isArray(t)){if(2===t.length)return n(t[0],t[1]);throw Error("Expected array with 2 elements but got "+t.length+" "+hr(t.length,"element"))}if(nr(t)){if(2===t.size())return n(t.get(0),t.get(1));throw Error("Expected Tuple with 2 elements but got "+t.size()+" "+hr(t.size(),"element"))}throw Error("Expected array or Tuple but got: "+t)}function pr(t,n,r,e){this.left=t,this.right=n,this.hash=r,this.key=e,this.depth=on(t.depth,n.depth)+1}function vr(t,n,r){this.root=t,this.sort=n,this.hash_fn=r,this.hash=null}function mr(t){return t instanceof vr}function gr(t){return mr(t)&&t.hash_fn===sr}function yr(t,n){return null!=n?gr(n)&&n.sort===t?n:new vr(pe,t,sr).union(n):new vr(pe,t,sr)}function dr(t){return null!=t?mr(t)&&!gr(t)?t:new vr(pe,Cn,B).union(t):new vr(pe,Cn,B)}function br(t,n,r){this.left=t,this.right=n,this.len=r,this.hash=null}function wr(t){return t instanceof br}function Sr(t){return null!=t?t instanceof br?t:new br(pe,pe,0).concat(t):new br(pe,pe,0)}function jr(t,n){this.root=t,this.len=n,this.hash=null}function Mr(t){return t instanceof jr}function Ir(t){return null!=t?t instanceof jr?t:new jr(pe,0).concat(t):new jr(pe,0)}function Er(t){if("string"!=typeof t)throw Error("Expected key to be a string or Tag but got "+t)}function xr(t,n){this.keys=t,this.values=n,this.hash=null}function Ar(t){return t instanceof xr}function Jr(t){var n={},r=[];if(null!=t){if(Ar(t))return t;var e=Q(T(t),function(t){return lr(t,function(t,n){return Er(t),[t,n]})}),o=_(e).sort(function(t,n){return Cn(t[0],n[0])});V(o,function(t){var e=t[0],o=t[1],i=n[e];null==i?n[e]=r.push(o)-1:r[i]=o})}return new xr(n,r)}function Lr(t,n){this._id=++Me,this._value=t,this._onchange=n}function kr(t){return Or(t)?t.get():t}function Or(t){return t instanceof Lr}function zr(t,n){if(arguments.length<1||arguments.length>2)throw Error("Expected 1 to 2 arguments but got "+arguments.length);return new Lr(t,n)}function Cr(t){if(ur(t))return Object.isFrozen(t)||Fn(t)||mr(t)||On(t)||nr(t)||wr(t)||Mr(t)||Ar(t);var n=typeof t;return"string"===n||"number"===n||"boolean"===n||"symbol"===n||null==t}function _r(t,n){return t>=0&&n>t}function Rr(t,n,r){var e=t.length;if(0>n&&(n+=e),_r(n,e))return t[n];if(3===arguments.length)return r;throw Error("Invalid index: "+n)}function Dr(t,n,r){2===arguments.length&&(r=-1);var e=t.length;if(0>r&&(r+=e+1),r>=0&&e>=r)return s(t,r,n);throw Error("Invalid index: "+r)}function Tr(t,n,r){var e=t.length;if(0>n&&(n+=e),_r(n,e))return h(t,n,r);throw Error("Invalid index: "+n)}function Vr(t,n){1===arguments.length&&(n=-1);var r=t.length;if(0>n&&(n+=r),_r(n,r))return l(t,n);throw Error("Invalid index: "+n)}function Ur(t,n,r){var e=t.length;if(null==n&&(n=0),null==r&&(r=e),0>n&&(n+=e),0>r&&(r+=e),0===n&&r===e)return t;if(n>r)throw Error("Index "+n+" is greater than index "+r);if(_r(n,e)){if(n===r)return[];if(r>0&&e>=r)return t.slice(n,r);throw Error("Index "+r+" is not valid")}throw Error("Index "+n+" is not valid")}function Nr(t,n){return 0===t.length?n:0===n.length?t:t.concat(n)}function qr(t){Fr.group("List with "+t+" values",function(){Fr.group("Inserting at the end",function(){Fr.time("JavaScript Array",function(){for(var n=[],r=0;t>r;++r)n.push(r)}),Fr.time("JavaScript Array Copying",function(){for(var n=[],r=0;t>r;++r)n=Dr(n,r)}),Fr.time("Immutable-js List",function(){for(var n=Ie.List(),r=0;t>r;++r)n=n.push(r)}),Fr.time("Mori Vector",function(){for(var n=Ee.vector(),r=0;t>r;++r)n=Ee.conj(n,r)}),Fr.time("Immutable List",function(){for(var n=zn(),r=0;t>r;++r)n=n.insert(r)})}),Fr.group("Inserting at the start",function(){Fr.time("JavaScript Array",function(){for(var n=[],r=0;t>r;++r)n.unshift(r)}),Fr.time("JavaScript Array Copying",function(){for(var n=[],r=0;t>r;++r)n=Dr(n,r,0)}),Fr.time("Immutable-js List",function(){for(var n=Ie.List(),r=0;t>r;++r)n=n.unshift(r)}),Fr.message("Mori Vector"),Fr.time("Immutable List",function(){for(var n=zn(),r=0;t>r;++r)n=n.insert(r,0)})}),Fr.group("Inserting at random",function(){Fr.time("JavaScript Array",function(){for(var n=[],r=0;t>r;++r){var e=Math.floor(Math.random()*n.length);n.splice(e,0,r)}}),Fr.time("JavaScript Array Copying",function(){for(var n=[],r=0;t>r;++r){var e=Math.floor(Math.random()*n.length);n=Dr(n,r,e)}}),Fr.time("Immutable-js List",function(){for(var n=Ie.List(),r=0;t>r;++r){var e=Math.floor(Math.random()*n.size);n=n.splice(e,0,r)}}),Fr.message("Mori Vector"),Fr.time("Immutable List",function(){for(var n=zn(),r=0;t>r;++r){var e=Math.floor(Math.random()*n.size());n=n.insert(r,e)}})}),Fr.group("Retrieving at the end",function(){!function(){for(var n=[],r=0;t>r;++r)n.push(r);Fr.time("JavaScript Array",function(){n[n.length-1]})}(),function(){for(var n=[],r=0;t>r;++r)n=Dr(n,r);Fr.time("JavaScript Array Copying",function(){Rr(n,-1)})}(),function(){for(var n=Ie.List(),r=0;t>r;++r)n=n.push(r);Fr.time("Immutable-js List",function(){n.last()})}(),function(){for(var n=Ee.vector(),r=0;t>r;++r)n=Ee.conj(n,r);Fr.time("Mori Vector",function(){Ee.get(n,Ee.count(n)-1)})}(),function(){for(var n=zn(),r=0;t>r;++r)n=n.insert(r);Fr.time("Immutable List",function(){n.get(-1)})}()}),Fr.group("Retrieving at the start",function(){!function(){for(var n=[],r=0;t>r;++r)n.push(r);Fr.time("JavaScript Array",function(){n[0]})}(),function(){for(var n=[],r=0;t>r;++r)n=Dr(n,r);Fr.time("JavaScript Array Copying",function(){Rr(n,0)})}(),function(){for(var n=Ie.List(),r=0;t>r;++r)n=n.push(r);Fr.time("Immutable-js List",function(){n.first()})}(),function(){for(var n=Ee.vector(),r=0;t>r;++r)n=Ee.conj(n,r);Fr.time("Mori Vector",function(){Ee.get(n,0)})}(),function(){for(var n=zn(),r=0;t>r;++r)n=n.insert(r);Fr.time("Immutable List",function(){n.get(0)})}()}),Fr.group("Retrieving at random",function(){!function(){for(var n=[],r=0;t>r;++r)n.push(r);Fr.time("JavaScript Array",function(){var t=Math.floor(Math.random()*n.length);n[t]})}(),function(){for(var n=[],r=0;t>r;++r)n=Dr(n,r);Fr.time("JavaScript Array Copying",function(){var t=Math.floor(Math.random()*n.length);Rr(n,t)})}(),function(){for(var n=Ie.List(),r=0;t>r;++r)n=n.push(r);Fr.time("Immutable-js List",function(){var t=Math.floor(Math.random()*n.size);n.get(t)})}(),function(){for(var n=Ee.vector(),r=0;t>r;++r)n=Ee.conj(n,r);Fr.time("Mori Vector",function(){var t=Math.floor(Math.random()*Ee.count(n));Ee.get(n,t)})}(),function(){for(var n=zn(),r=0;t>r;++r)n=n.insert(r);Fr.time("Immutable List",function(){var t=Math.floor(Math.random()*n.size());n.get(t)})}()}),Fr.group("Removing at the end",function(){Fr.message("JavaScript Array"),function(){for(var n=[],r=0;t>r;++r)n=Dr(n,r);Fr.time("JavaScript Array Copying",function(){for(var r=n,e=0;t>e;++e)r=Vr(r)})}(),function(){for(var n=Ie.List(),r=0;t>r;++r)n=n.push(r);Fr.time("Immutable-js List",function(){for(var r=n,e=0;t>e;++e)r=r.pop()})}(),function(){for(var n=Ee.vector(),r=0;t>r;++r)n=Ee.conj(n,r);Fr.time("Mori Vector",function(){for(var r=n,e=0;t>e;++e)r=Ee.pop(r)})}(),function(){for(var n=zn(),r=0;t>r;++r)n=n.insert(r);Fr.time("Immutable List",function(){for(var r=n,e=0;t>e;++e)r=r.remove()})}()}),Fr.group("Removing at the start",function(){Fr.message("JavaScript Array"),function(){for(var n=[],r=0;t>r;++r)n=Dr(n,r);Fr.time("JavaScript Array Copying",function(){for(var r=n,e=0;t>e;++e)r=Vr(r,0)})}(),function(){for(var n=Ie.List(),r=0;t>r;++r)n=n.push(r);Fr.time("Immutable-js List",function(){for(var r=n,e=0;t>e;++e)r=r.shift()})}(),Fr.message("Mori Vector"),function(){for(var n=zn(),r=0;t>r;++r)n=n.insert(r);Fr.time("Immutable List",function(){for(var r=n,e=0;t>e;++e)r=r.remove(0)})}()}),Fr.group("Removing at random",function(){Fr.message("JavaScript Array"),function(){for(var n=[],r=0;t>r;++r)n=Dr(n,r);Fr.time("JavaScript Array Copying",function(){for(var r=n,e=0;t>e;++e){var o=Math.floor(Math.random()*r.length);r=Vr(r,o)}})}(),function(){for(var n=Ie.List(),r=0;t>r;++r)n=n.push(r);Fr.time("Immutable-js List",function(){for(var r=n,e=0;t>e;++e){var o=Math.floor(Math.random()*r.size);r=r.splice(o,1)}})}(),Fr.message("Mori Vector"),function(){for(var n=zn(),r=0;t>r;++r)n=n.insert(r);Fr.time("Immutable List",function(){for(var r=n,e=0;t>e;++e){var o=Math.floor(Math.random()*r.size());r=r.remove(o)}})}()}),Fr.group("Modifying at the end",function(){Fr.message("JavaScript Array"),function(){for(var n=[],r=0;t>r;++r)n=Dr(n,r);Fr.time("JavaScript Array Copying",function(){Tr(n,-1,function(){return-50})})}(),function(){for(var n=Ie.List(),r=0;t>r;++r)n=n.push(r);Fr.time("Immutable-js List",function(){n.set(-1,-50)})}(),function(){for(var n=Ee.vector(),r=0;t>r;++r)n=Ee.conj(n,r);Fr.time("Mori Vector",function(){Ee.assoc(n,Ee.count(n)-1,-50)})}(),function(){for(var n=zn(),r=0;t>r;++r)n=n.insert(r);Fr.time("Immutable List",function(){n.modify(-1,function(){return-50})})}()}),Fr.group("Modifying at the start",function(){Fr.message("JavaScript Array"),function(){for(var n=[],r=0;t>r;++r)n=Dr(n,r);Fr.time("JavaScript Array Copying",function(){Tr(n,0,function(){return-50})})}(),function(){for(var n=Ie.List(),r=0;t>r;++r)n=n.push(r);Fr.time("Immutable-js List",function(){n.set(0,-50)})}(),function(){for(var n=Ee.vector(),r=0;t>r;++r)n=Ee.conj(n,r);Fr.time("Mori Vector",function(){Ee.assoc(n,0,-50)})}(),function(){for(var n=zn(),r=0;t>r;++r)n=n.insert(r);Fr.time("Immutable List",function(){n.modify(0,function(){return-50})})}()}),Fr.group("Modifying at random",function(){Fr.message("JavaScript Array"),function(){for(var n=[],r=0;t>r;++r)n=Dr(n,r);Fr.time("JavaScript Array Copying",function(){var t=Math.floor(Math.random()*n.length);Tr(n,t,function(){return-50})})}(),function(){for(var n=Ie.List(),r=0;t>r;++r)n=n.push(r);Fr.time("Immutable-js List",function(){var t=Math.floor(Math.random()*n.size);n.set(t,-50)})}(),function(){for(var n=Ee.vector(),r=0;t>r;++r)n=Ee.conj(n,r);Fr.time("Mori Vector",function(){var t=Math.floor(Math.random()*Ee.count(n));Ee.assoc(n,t,-50)})}(),function(){for(var n=zn(),r=0;t>r;++r)n=n.insert(r);Fr.time("Immutable List",function(){var t=Math.floor(Math.random()*n.size());n.modify(t,function(){return-50})})}()}),Fr.group("Concatenating",function(){!function(){for(var n=[],r=0;t>r;++r)n.push(r);Fr.time("JavaScript Array",function(){n.concat(n)})}(),function(){for(var n=[],r=0;t>r;++r)n=Dr(n,r);Fr.time("JavaScript Array Copying",function(){Nr(n,n)})}(),function(){for(var n=Ie.List(),r=0;t>r;++r)n=n.push(r);Fr.time("Immutable-js List",function(){n.concat(n)})}(),function(){for(var n=Ee.vector(),r=0;t>r;++r)n=Ee.conj(n,r);Fr.time("Mori Vector",function(){Ee.concat(n,n)})}(),function(){for(var n=zn(),r=0;t>r;++r)n=n.insert(r);Fr.time("Immutable List",function(){n.concat(n)})}()}),Fr.group("Slicing small",function(){!function(){for(var n=[],r=0;t>r;++r)n.push(r);Fr.time("JavaScript Array",function(){n.slice(1,2)})}(),function(){for(var n=[],r=0;t>r;++r)n=Dr(n,r);Fr.time("JavaScript Array Copying",function(){Ur(n,1,2)})}(),function(){for(var n=Ie.List(),r=0;t>r;++r)n=n.push(r);Fr.time("Immutable-js List",function(){n.slice(1,2)})}(),function(){for(var n=Ee.vector(),r=0;t>r;++r)n=Ee.conj(n,r);Fr.time("Mori Vector",function(){Ee.subvec(n,1,2)})}(),function(){for(var n=zn(),r=0;t>r;++r)n=n.insert(r);Fr.time("Immutable List",function(){n.slice(1,2)})}()}),Fr.group("Slicing medium",function(){!function(){for(var n=[],r=0;t>r;++r)n.push(r);Fr.time("JavaScript Array",function(){n.slice(1,Math.floor(n.length/2))})}(),function(){for(var n=[],r=0;t>r;++r)n=Dr(n,r);Fr.time("JavaScript Array Copying",function(){Ur(n,1,Math.floor(n.length/2))})}(),function(){for(var n=Ie.List(),r=0;t>r;++r)n=n.push(r);Fr.time("Immutable-js List",function(){n.slice(1,Math.floor(n.size/2))})}(),function(){for(var n=Ee.vector(),r=0;t>r;++r)n=Ee.conj(n,r);Fr.time("Mori Vector",function(){Ee.subvec(n,1,Math.floor(Ee.count(n)/2))})}(),function(){for(var n=zn(),r=0;t>r;++r)n=n.insert(r);Fr.time("Immutable List",function(){n.slice(1,Math.floor(n.size()/2))})}()}),Fr.group("Slicing large",function(){!function(){for(var n=[],r=0;t>r;++r)n.push(r);Fr.time("JavaScript Array",function(){n.slice(1)})}(),function(){for(var n=[],r=0;t>r;++r)n=Dr(n,r);Fr.time("JavaScript Array Copying",function(){Ur(n,1)})}(),function(){for(var n=Ie.List(),r=0;t>r;++r)n=n.push(r);Fr.time("Immutable-js List",function(){n.slice(1)})}(),function(){for(var n=Ee.vector(),r=0;t>r;++r)n=Ee.conj(n,r);Fr.time("Mori Vector",function(){Ee.subvec(n,1)})}(),function(){for(var n=zn(),r=0;t>r;++r)n=n.insert(r);Fr.time("Immutable List",function(){n.slice(1)})}()})})}function Hr(t){var n={};for(var r in t)n[r]=t[r];return n}function Qr(t){return t[Math.floor(Math.random()*t.length)]}function Kr(t){for(var n=[],r=[],e={},o=[],i=0;t>i;++i)n.push("foo"+i),e["foo"+i]=i,r.push(["foo"+i,i]),o.push("foo"+i,i);var u=xe.Record(e);Fr.group("Record with "+t+" keys",function(){Fr.group("Creating",function(){Fr.message("JavaScript Object"),Fr.time("JavaScript Object Copying",function(){Hr(e)}),Fr.time("Immutable-js Map",function(){xe.Map(r)}),Fr.time("Immutable-js Record",function(){new u(e)}),Fr.time("Mori Hash Map",function(){Ae.hash_map.apply(null,o)}),Fr.time("Mori Sorted Map",function(){Ae.sorted_map.apply(null,o)}),Fr.time("Immutable Dict",function(){Gn(r)}),Fr.time("Immutable SortedDict",function(){Bn(Cn,r)}),Fr.time("Immutable Record",function(){Jr(r)})}),Fr.group("get first",function(){Fr.message("JavaScript Object"),function(){var t=e;Fr.time("JavaScript Object Copying",function(){t.foo0}),Fr.time("JavaScript Object Copying (prop)",function(){t.foo0})}(),function(){var t=xe.Map(r);Fr.time("Immutable-js Map",function(){t.get("foo0")})}(),function(){var t=new u(e);Fr.time("Immutable-js Record",function(){t.get("foo0")}),Fr.time("Immutable-js Record (prop)",function(){t.foo0})}(),function(){var t=Ae.hash_map.apply(null,o);Fr.time("Mori Hash Map",function(){Ae.get(t,"foo0")})}(),function(){var t=Ae.sorted_map.apply(null,o);Fr.time("Mori Sorted Map",function(){Ae.get(t,"foo0")})}(),function(){var t=Gn(r);Fr.time("Immutable Dict",function(){t.get("foo0")})}(),function(){var t=Bn(Cn,r);Fr.time("Immutable SortedDict",function(){t.get("foo0")})}(),function(){var t=Jr(r);Fr.time("Immutable Record",function(){t.get("foo0")})}()}),Fr.group("get random",function(){Fr.message("JavaScript Object"),function(){var t=e;Fr.time("JavaScript Object Copying",function(){t[Qr(n)]})}(),function(){var t=xe.Map(r);Fr.time("Immutable-js Map",function(){t.get(Qr(n))})}(),function(){var t=new u(e);Fr.time("Immutable-js Record",function(){t.get(Qr(n))})}(),function(){var t=Ae.hash_map.apply(null,o);Fr.time("Mori Hash Map",function(){Ae.get(t,Qr(n))})}(),function(){var t=Ae.sorted_map.apply(null,o);Fr.time("Mori Sorted Map",function(){Ae.get(t,Qr(n))})}(),function(){var t=Gn(r);Fr.time("Immutable Dict",function(){t.get(Qr(n))})}(),function(){var t=Bn(Cn,r);Fr.time("Immutable SortedDict",function(){t.get(Qr(n))})}(),function(){var t=Jr(r);Fr.time("Immutable Record",function(){t.get(Qr(n))})}()}),Fr.group("set first",function(){!function(){var t=Hr(e);Fr.time("JavaScript Object",function(){t.foo0=-1}),Fr.time("JavaScript Object (prop)",function(){t.foo0=-1})}(),function(){var t=e;Fr.time("JavaScript Object Copying",function(){var n=Hr(t);n.foo0=-1}),Fr.time("JavaScript Object Copying (prop)",function(){var n=Hr(t);n.foo0=-1})}(),function(){var t=xe.Map(r);Fr.time("Immutable-js Map",function(){t.set("foo0",-1)})}(),function(){var t=new u(e);Fr.time("Immutable-js Record",function(){t.set("foo0",-1)})}(),function(){var t=Ae.hash_map.apply(null,o);Fr.time("Mori Hash Map",function(){Ae.assoc(t,"foo0",-1)})}(),function(){var t=Ae.sorted_map.apply(null,o);Fr.time("Mori Sorted Map",function(){Ae.assoc(t,"foo0",-1)})}(),function(){var t=Gn(r);Fr.time("Immutable Dict",function(){t.set("foo0",-1)})}(),function(){var t=Bn(Cn,r);Fr.time("Immutable SortedDict",function(){t.set("foo0",-1)})}(),function(){var t=Jr(r);Fr.time("Immutable Record",function(){t.set("foo0",-1)})}()}),Fr.group("set random",function(){!function(){var t=Hr(e);Fr.time("JavaScript Object",function(){t[Qr(n)]=-1})}(),function(){var t=e;Fr.time("JavaScript Object Copying",function(){var r=Hr(t);r[Qr(n)]=-1})}(),function(){var t=xe.Map(r);Fr.time("Immutable-js Map",function(){t.set(Qr(n),-1)})}(),function(){var t=new u(e);Fr.time("Immutable-js Record",function(){t.set(Qr(n),-1)})}(),function(){var t=Ae.hash_map.apply(null,o);Fr.time("Mori Hash Map",function(){Ae.assoc(t,Qr(n),-1)})}(),function(){var t=Ae.sorted_map.apply(null,o);Fr.time("Mori Sorted Map",function(){Ae.assoc(t,Qr(n),-1)})}(),function(){var t=Gn(r);Fr.time("Immutable Dict",function(){t.set(Qr(n),-1)})}(),function(){var t=Bn(Cn,r);Fr.time("Immutable SortedDict",function(){t.set(Qr(n),-1)})}(),function(){var t=Jr(r);Fr.time("Immutable Record",function(){t.set(Qr(n),-1)})}()})})}function $r(){Fr.group("Information",function(){Fr.group("Node.js",function(){Fr.message("URL: http://nodejs.org/"),Fr.message("Version: 0.10.22")}),Fr.group("Benchmark.js",function(){Fr.message("URL: https://github.com/bestiejs/benchmark.js"),Fr.message("Version: 1.0.0")}),Fr.group("Immutable-js",function(){Fr.message("URL: https://github.com/facebook/immutable-js"),Fr.message("Version: 3.4.1")}),Fr.group("Mori",function(){Fr.message("URL: https://github.com/swannodette/mori"),Fr.message("Version: 0.2.9")}),Fr.group("Immutable",function(){Fr.message("URL: https://github.com/Pauan/Immutable"),Fr.message("Version: 4.0.0")})})}var Fr={get group(){return i},get message(){return u},get time(){return a},get run(){return f}},Pr=({get run(){return qr}},{get run(){return Kr}}),Br=require("benchmark"),Gr=new Br.Suite({onComplete:function(){e(Yr)},onCycle:function(t){var e=""+t.target;e=e.replace(/^(.+) x ([0-9,\.]+) ops\/sec ±\d+\.\d+% \(\d+ runs sampled\)$/g,function(t,e,o){return/\./.test(o)&&(o=""+Math.round(+o)),n(e,49)+r(" "+r(o,13)+" ops/sec",21)}),console.log(e)}}),Wr=0,Xr=[],Yr=[],Zr="48de6fff-9d11-472d-a76f-ed77a59a5cbc",te=0,ne="[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}",re=RegExp("^"+ne+"$"),ee=RegExp("^\\(Tag "+Zr+" [0-9]+\\)$"),oe=RegExp("^\\(UUIDTag "+ne+"\\)$"),ie="undefined"!=typeof Symbol&&void 0!==Symbol.iterator?Symbol.iterator:null,ue="undefined"!=typeof Symbol&&void 0!==Symbol.keyFor?Symbol.keyFor:null,ae=y("e1c3818d-4c4f-4703-980a-00969e4ca900"),fe=y("6199065c-b518-4cb3-8b41-ab70a9769ec3"),ce=y("1b75a273-16bd-4248-be8a-e4b5e8c4b523"),se=y("89d8297c-d95e-4ce9-bc9b-6b6f73fa6a37"),he=y("99e14916-bc99-4c48-81aa-299cf1ad6de3"),le={},pe={};
pe.depth=0,pe.size=0;var ve={},me=0,ge=0,ye={},de={},be={};de.toString=be.toString=hn,de.inspect=be.inspect=hn,be.toJSON=ln,null!==ie&&(de[ie]=be[ie]=function(){return S(this)});var we=125,Se=Math.ceil,je=Math.floor;In.prototype.copy=function(t,n){return new In(t,n,this.array)},kn.prototype=Object.create(be),kn.prototype[ae]=W("List"),kn.prototype[ce]=Zn,kn.prototype.has=vn,le.List=function(t){return zn(en(t))},kn.prototype[he]=function(t){return nn("List",t)},kn.prototype[fe]=function(){var t=D(sn(this.root),function(t){return S(t.array)});return E(t,O(gn(this.tail)))},kn.prototype.isEmpty=function(){return this.root===pe&&this.tail===pe},kn.prototype.removeAll=function(){return new kn(pe,pe,0)},kn.prototype.size=function(){return this.root.size+this.tail_size},kn.prototype.get=function(t,n){var r=this.size();if(0>t&&(t+=r),pn(t,r)){var e=this.root,o=e.size;return o>t?En(e,t):Mn(this.tail,this.tail_size,t-o)}if(2===arguments.length)return n;throw Error("Index "+t+" is not valid")},kn.prototype.insert=function(t,n){1===arguments.length&&(n=-1);var r=this.size();0>n&&(n+=r+1);var e=this.root,o=this.tail,i=this.tail_size;if(n===r){if(i===we){var u=cn(e,new In(pe,pe,jn(o,i)));return new kn(u,new mn(t,pe),1)}return new kn(e,new mn(t,o),i+1)}if(pn(n,r)){var a=e.size;if(a>n)return new kn(xn(e,n,t),o,i);var f=s(jn(o,i),n-a,t),u=cn(e,new In(pe,pe,f));return new kn(u,pe,0)}throw Error("Index "+n+" is not valid")},kn.prototype.remove=function(t){0===arguments.length&&(t=-1);var n=this.size();0>t&&(t+=n);var r=this.root,e=this.tail,o=this.tail_size;if(e!==pe&&t===n-1)return new kn(r,e.cdr,o-1);if(pn(t,n)){var i=r.size;if(i>t)return new kn(Jn(r,t),e,o);var u=l(jn(e,o),t-i),a=cn(r,new In(pe,pe,u));return new kn(a,pe,0)}throw Error("Index "+t+" is not valid")},kn.prototype.modify=function(t,n){var r=this.size();if(0>t&&(t+=r),pn(t,r)){var e=this.root,o=this.tail,i=this.tail_size,u=e.size;if(o!==pe&&t===r-1){var a=n(o.car);return a===o.car?this:new kn(e,new mn(a,o.cdr),i)}if(u>t){var f=An(e,t,n);return f===e?this:new kn(f,o,i)}var c=jn(o,i),s=h(c,t-u,n);if(s===c)return this;var f=cn(e,new In(pe,pe,s));return new kn(f,pe,0)}throw Error("Index "+t+" is not valid")},kn.prototype.set=function(t,n){return this.modify(t,function(){return n})},kn.prototype.slice=function(t,n){var r=this.size();if(null==t&&(t=0),null==n&&(n=r),0>t&&(t+=r),0>n&&(n+=r),0===t&&n===r)return this;if(t>n)throw Error("Index "+t+" is greater than index "+n);if(pn(t,r)){if(t===n)return new kn(pe,pe,0);if(n>0&&r>=n){var e=this.root,o=e.size,i=[];if(o>=t&&Ln(i,e,t,n),n>o){var u=jn(this.tail,this.tail_size);dn(i,Sn(u,t-o,n-o))}return new kn(wn(i),pe,0)}throw Error("Index "+n+" is not valid")}throw Error("Index "+t+" is not valid")},kn.prototype.concat=function(t){if(t instanceof kn){var n=this.root,r=this.tail,e=t.root,o=t.tail;if(e===pe&&o===pe)return this;if(n===pe&&r===pe)return t;r!==pe&&(n=cn(n,new In(pe,pe,jn(r,this.tail_size))));var i=an(n,e);return new kn(i,o,t.tail_size)}return z(t,this,function(t,n){return t.insert(n)})},Kn.prototype.copy=function(t,n){return new Kn(t,n,this.hash,this.key,this.value)},Kn.prototype.modify=function(t){var n=t.hash,r=t.key,e=t.value;return this.hash===n&&this.key===r&&this.value===e?this:new Kn(this.left,this.right,n,r,e)},$n.prototype=Object.create(be),$n.prototype[ce]=Yn,$n.prototype.isEmpty=Vn,$n.prototype.has=Un,$n.prototype.remove=Nn($n),$n.prototype.merge=qn,$n.prototype[fe]=function(){return I(sn(this.root),function(t){return rr([t.key,t.value])})},$n.prototype[ae]=function(t){return null===t.hash&&(t.hash=Fn(t)&&!Pn(t)?"(Dict"+G(t,"  ")+")":"(SortedDict "+B(t.sort)+G(t,"  ")+")"),t.hash},le.Dict=function(t){return Gn(rn(t))},$n.prototype[he]=function(t){if(Fn(t)&&!Pn(t))return tn("Dict",t);throw Error("Cannot convert SortedDict to JSON")},$n.prototype.removeAll=function(){return new $n(pe,this.sort,this.hash_fn)},$n.prototype.get=function(t,n){var r=_n(this.root,this.sort,this.hash_fn(t));if(r===pe){if(2===arguments.length)return n;throw Error("Key "+t+" not found")}return r.value},$n.prototype.set=function(t,n){var r=this.root,e=this.sort,o=this.hash_fn,i=o(t),u=Rn(r,e,i,new Kn(pe,pe,i,t,n));return u===r?this:new $n(u,e,o)},$n.prototype.modify=function(t,n){var r=this.root,e=this.sort,o=this.hash_fn,i=Dn(r,e,o(t),t,n);return i===r?this:new $n(i,e,o)},tr.prototype=Object.create(be),tr.prototype[ae]=W("Tuple"),tr.prototype[ce]=Zn,le.Tuple=function(t){return er(en(t))},tr.prototype[he]=function(t){return nn("Tuple",t)},tr.prototype[fe]=function(){return S(this.values)},tr.prototype.size=function(){return this.values.length},tr.prototype.get=function(t){var n=this.size();if(pn(t,n))return this.values[t];throw Error("Index "+t+" is not valid")},tr.prototype.modify=function(t,n){var r=this.size();if(pn(t,r)){var e=this.values,o=h(e,t,n);return o===e?this:new tr(o)}throw Error("Index "+t+" is not valid")},tr.prototype.set=function(t,n){return this.modify(t,function(){return n})},pr.prototype.copy=function(t,n){return new pr(t,n,this.hash,this.key)},pr.prototype.modify=function(t){var n=t.hash,r=t.key;return this.hash===n&&this.key===r?this:new pr(this.left,this.right,n,r)},vr.prototype=Object.create(be),vr.prototype[ce]=Zn,vr.prototype.isEmpty=Vn,vr.prototype.has=Un,vr.prototype.remove=Nn(vr),le.Set=function(t){return dr(en(t))},vr.prototype[fe]=function(){return I(sn(this.root),function(t){return t.key})},vr.prototype[he]=function(t){if(mr(t)&&!gr(t))return nn("Set",t);throw Error("Cannot convert SortedSet to JSON")},vr.prototype[ae]=function(t){if(null===t.hash){var n=Q(t,function(t){return B(t)}),r="  ";t.hash=mr(t)&&!gr(t)?"(Set"+X(n,r)+")":"(SortedSet "+B(t.sort)+X(n,r)+")"}return t.hash},vr.prototype.removeAll=function(){return new vr(pe,this.sort,this.hash_fn)},vr.prototype.add=function(t){var n=this.root,r=this.sort,e=this.hash_fn,o=e(t),i=Rn(n,r,o,new pr(pe,pe,o,t));return i===n?this:new vr(i,r,e)},vr.prototype.union=function(t){return z(t,this,function(t,n){return t.add(n)})},vr.prototype.intersect=function(t){var n=this;if(n.isEmpty())return n;var r=n.removeAll();return z(t,r,function(t,r){return n.has(r)?t.add(r):t})},vr.prototype.disjoint=function(t){var n=this;return z(t,n,function(t,r){return n.has(r)?t.remove(r):t.add(r)})},vr.prototype.subtract=function(t){return this.isEmpty()?this:z(t,this,function(t,n){return t.remove(n)})},br.prototype=Object.create(be),br.prototype[ce]=Zn,br.prototype[ae]=W("Queue"),br.prototype.size=Hn,br.prototype.concat=Qn,le.Queue=function(t){return Sr(en(t))},br.prototype[he]=function(t){return nn("Queue",t)},br.prototype.isEmpty=function(){return this.left===pe&&this.right===pe},br.prototype.removeAll=function(){return new br(pe,pe,0)},br.prototype[fe]=function(){return E(gn(this.left),O(gn(this.right)))},br.prototype.peek=function(t){if(this.isEmpty()){if(1===arguments.length)return t;throw Error("Cannot peek from an empty queue")}return this.left.car},br.prototype.push=function(t){return this.isEmpty()?new br(new mn(t,this.left),this.right,this.len+1):new br(this.left,new mn(t,this.right),this.len+1)},br.prototype.pop=function(){if(this.isEmpty())throw Error("Cannot pop from an empty queue");var t=this.left.cdr;if(t===pe){var n=pe;return yn(this.right,function(t){n=new mn(t,n)}),new br(n,pe,this.len-1)}return new br(t,this.right,this.len-1)},jr.prototype=Object.create(be),jr.prototype[ce]=Zn,jr.prototype[ae]=W("Stack"),jr.prototype.isEmpty=Vn,jr.prototype.size=Hn,jr.prototype.concat=Qn,le.Stack=function(t){return Ir(en(t))},jr.prototype[fe]=function(){return O(gn(this.root))},jr.prototype[he]=function(t){return nn("Stack",t)},jr.prototype.removeAll=function(){return new jr(pe,0)},jr.prototype.peek=function(t){if(this.isEmpty()){if(1===arguments.length)return t;throw Error("Cannot peek from an empty stack")}return this.root.car},jr.prototype.push=function(t){return new jr(new mn(t,this.root),this.len+1)},jr.prototype.pop=function(){if(this.isEmpty())throw Error("Cannot pop from an empty stack");return new jr(this.root.cdr,this.len-1)},xr.prototype=Object.create(be),xr.prototype.update=qn,xr.prototype[ce]=Yn,le.Record=function(t){return Jr(rn(t))},xr.prototype[he]=function(t){return tn("Record",t)},xr.prototype[ae]=function(t){return null===t.hash&&(t.hash="(Record"+G(t,"  ")+")"),t.hash},xr.prototype[fe]=function(){var t=this.keys,n=this.values;return S(Q(T(t),function(t){return lr(t,function(t,r){return rr([t,n[r]])})}))},xr.prototype.get=function(t){Er(t);var n=this.keys[t];if(null==n)throw Error("Key "+t+" not found");return this.values[n]},xr.prototype.set=function(t,n){return this.modify(t,function(){return n})},xr.prototype.modify=function(t,n){Er(t);var r=this.keys,e=r[t];if(null==e)throw Error("Key "+t+" not found");var o=this.values,i=h(o,e,n);return i===o?this:new xr(r,i)};var Me=0;Lr.prototype=Object.create(de),Lr.prototype[ae]=function(t){return"(Ref "+B(t._id)+")"},Lr.prototype.get=function(){return this._value},Lr.prototype.set=function(t){var n=this._value;t!==n&&(this._value=t,null!=this._onchange&&this._onchange(n,t))},Lr.prototype.modify=function(t){this.set(t(this.get()))},function(t,n){"function"==typeof define&&define.amd?define(["exports"],n):"object"==typeof exports?n(exports):(t.Immutable={},n(t.Immutable))}(this,function(t){t.equal=d,t.fromJS=Wn,t.toJS=Xn,t.isDict=Fn,t.isSet=mr,t.isSortedDict=Pn,t.isSortedSet=gr,t.isList=On,t.isQueue=wr,t.isTuple=nr,t.isStack=Mr,t.isImmutable=Cr,t.SortedDict=Bn,t.SortedSet=yr,t.isIterable=w,t.Dict=Gn,t.Set=dr,t.List=zn,t.Tuple=er,t.Queue=Sr,t.Stack=Ir,t.simpleSort=Cn,t.isRecord=Ar,t.Record=Jr,t.toJSON=Z,t.fromJSON=Y,t.deref=kr,t.Ref=zr,t.isRef=Or,t.isTag=v,t.isUUIDTag=m,t.Tag=g,t.UUIDTag=y,t.each=V,t.map=Q,t.keep=$,t.findIndex=U,t.reverse=K,t.foldl=z,t.foldr=C,t.join=R,t.zip=k,t.toArray=_,t.any=x,t.all=A,t.find=J,t.partition=L,t.range=H,t.take=q,t.indexOf=N,t.toIterator=S,t.Iterable=j});var Ie=require("immutable"),Ee=require("mori"),xe=require("immutable"),Ae=require("mori");$r(),Pr.run(1),Pr.run(10),Pr.run(100),Pr.run(1e3),Pr.run(1e4),Fr.run()}).call(this);