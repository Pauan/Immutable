/**
 * @license
 *
 * (c) 2014, 2015 Oni Labs, http://onilabs.com
 *
 * This file is licensed under the terms of the MIT License:
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
(function(){"use strict";function t(t){return"string"==typeof t&&We.test(t)}function n(t){return"string"==typeof t&&(Xe.test(t)||Ye.test(t))}function e(t){return"string"==typeof t&&Ye.test(t)}function o(){if(0===arguments.length)return"(Tag "+Ze+" "+ ++Be+")";throw Error("Expected 0 arguments but got "+arguments.length)}function r(n){if(1===arguments.length){if(t(n))return"(UUIDTag "+n+")";throw Error("Expected a lower-case UUID, but got: "+n)}throw Error("Expected 1 argument but got "+arguments.length)}function i(t){for(var n=t.length,e=Array(n),o=0;n>o;++o)e[o]=t[o];return e}function u(t,n,e){for(var o=t.length+1,r=Array(o),i=0;n>i;)r[i]=t[i],++i;for(r[i]=e,++i;o>i;)r[i]=t[i-1],++i;return r}function f(t,n,e){var o=t[n],r=e(o);if(o===r)return t;var u=i(t);return u[n]=r,u}function a(t,n){for(var e=t.length-1,o=Array(e),r=0;n>r;)o[r]=t[r],++r;for(;e>r;)o[r]=t[r+1],++r;return o}function c(t,n){return t===n||M(t)===M(n)}function s(t){var n=0;return{next:function(){return n<t.length?{value:t[n++]}:{done:!0}}}}function l(t){return Wn(t)?null!=t[oo]||null!==to&&null!=t[to]||Array.isArray(t):"string"==typeof t&&!n(t)}function h(t){var e;if(null!=(e=t[oo]))return e.call(t);if(null!==to&&null!=(e=t[to]))return e.call(t);if(Array.isArray(t))return s(t);if("string"!=typeof t||n(t))throw Error("Cannot iter: "+t);return s(t)}function v(t){function n(){return t()}var e={};return e[oo]=n,null!==to&&(e[to]=n),e}function d(t,n){for(;;){var e=t.next();if(e.done)break;n(e.value)}}function p(t,n){return{next:function(){var e=t.next();return e.done?{done:!0}:{value:n(e.value)}}}}function g(t,n){var e=!1,o=!1;return{next:function(){for(;;)if(e){if(o)return{done:!0};var r=n.next();if(!r.done)return{value:r.value};o=!0}else{var r=t.next();if(!r.done)return{value:r.value};e=!0}}}}function y(t,n){for(var e=h(t);;){var o=e.next();if(o.done)return!1;if(n(o.value))return!0}}function b(t,n){for(var e=h(t);;){var o=e.next();if(o.done)return!0;if(!n(o.value))return!1}}function m(t,n,e){for(var o=h(t);;){var r=o.next();if(r.done){if(3===arguments.length)return e;throw Error("Did not find anything")}if(n(r.value))return r.value}}function x(t,n){var e=[],o=[],r=co,i=!1;return Hn([v(function(){return r===co&&(r=h(t)),{next:function(){for(;;){if(e.length)return e.shift();if(i)return{done:!0};var t=r.next();if(t.done)i=!0;else{if(n(t.value))return{value:t.value};o.push({value:t.value})}}}}}),v(function(){return r===co&&(r=h(t)),{next:function(){for(;;){if(o.length)return o.shift();if(i)return{done:!0};var t=r.next();if(t.done)i=!0;else{if(!n(t.value))return{value:t.value};e.push({value:t.value})}}}}})])}function w(t,n){var e=2===arguments.length;return v(function(){var o=A(t).map(function(t){return h(t)}),r=!1;return{next:function(){for(;;){if(r)return{done:!0};for(var t=[],i=!1,u=0,f=o.length;f>u;++u){var a=o[u].next();if(a.done){if(!e){i=!1;break}t.push(n)}else i=!0,t.push(a.value)}if(i)return{value:Hn(t)};r=!0}}}})}function E(t){var n=[];d(t,function(t){n.push(t)});var e=n.length;return{next:function(){return e?{value:n[--e]}:{done:!0}}}}function S(t,n,e){return I(t,function(t){n=e(n,t)}),n}function O(t,n,e){return S(q(t),n,function(t,n){return e(n,t)})}function A(t){if(Array.isArray(t))return t;var n=[];return I(t,function(t){n.push(t)}),n}function T(t,n){return 1===arguments.length&&(n=""),"string"==typeof t&&""===n?t:A(t).join(n)}function k(t,n){var e=!1,o=co;return{next:function(){for(;;){if(e)return{done:!0};if(o===co){var r=t.next();r.done?e=!0:o=n(r.value)}else{var r=o.next();if(!r.done)return{value:r.value};o=co}}}}}function j(t){return Xn(t)?N(Object.keys(t),function(n){return[n,t[n]]}):t}function I(t,n){d(h(t),n)}function D(t,n,e){for(var o=h(t),r=0;;){var i=o.next();if(i.done){if(3===arguments.length)return e;throw Error("Did not find anything")}if(n(i.value))return r;++r}}function z(t,n,e){return 3===arguments.length?D(t,function(t){return c(t,n)},e):D(t,function(t){return c(t,n)})}function J(t,n){if(Math.round(n)!==n)throw Error("Count must be an integer");if(0>n)throw Error("Count cannot be negative");return v(function(){var e=h(t);return{next:function(){for(;;){if(0>n)throw Error("Invalid count");if(0===n)return{done:!0};var t=e.next();if(!t.done)return--n,{value:t.value};n=0}}}})}function C(t,n,e){if(arguments.length<1&&(t=0),arguments.length<2&&(n=1/0),arguments.length<3&&(e=1),0>e)throw Error("Step cannot be negative");return v(function(){if(n>t)var o=function(){if(n>t){var o=t;return t+=e,{value:o}}return{done:!0}};else var o=function(){if(t>n){var o=t;return t-=e,{value:o}}return{done:!0}};return{next:o}})}function N(t,n){return v(function(){return p(h(t),n)})}function q(t){return v(function(){return E(h(t))})}function U(t,n){return v(function(){var e=h(t);return{next:function(){for(;;){var t=e.next();if(t.done)return{done:!0};if(n(t.value))return{value:t.value}}}}})}function _(t){return'"'+t.replace(/[\\\"\n]/g,function(t){return"\n"===t?t+" ":"\\"+t})+'"'}function R(t){var n;return null!==no&&null!=(n=no(t))?"(Symbol.for "+M(n)+")":(n=ho[t],null==n&&(n=ho[t]=++lo),"(Symbol "+n+")")}function M(t){var e=typeof t;if("string"===e)return n(t)?t:_(t);if("number"===e||"boolean"===e||"undefined"===e||null===t)return""+t;if("symbol"===e)return R(t);var o=t[eo];if(null!=o)return o(t);if(Object.isExtensible(t)){var r="(Mutable "+ ++so+")";return Object.defineProperty(t,eo,{configurable:!1,enumerable:!1,writable:!1,value:function(){return r}}),r}throw Error("Cannot use a non-extensible object as a key: "+t)}function L(t,n){var e=0,o=[];I(t,function(t){oe(t,function(t,n){t=M(t),n=M(n),t=t.split(/\n/),I(t,function(t){e=Math.max(e,t.length)}),o.push({key:t,value:n})})});var n="  ";return o=N(o,function(t){var n=t.key.length-1;t.key[n]=te(t.key[n],e," ");var o=T(t.key,"\n"),r=t.value.replace(/\n/g,"\n"+Yn(" ",e+3));return o+" = "+r}),Q(o,n)}function K(t){return function(n){if(null===n.hash){var e=N(n,function(t){return M(t)});n.hash="("+t+Q(e,"  ")+")"}return n.hash}}function Q(t,n){var e="\n"+n;return T(N(t,function(t){return e+t.replace(/\n/g,e)}))}function F(t){var o=typeof t;if(n(t)){if(e(t))return t;throw Error("Cannot convert Tag from JSON, use UUIDTag instead: "+t)}if("string"===o||"boolean"===o||null===t||Vn(t))return t;if(Wn(t)){var o=t[io];if(null!=o){var r=fo[o];if(null!=r)return r(t);throw Error("Cannot handle type "+o)}if(Array.isArray(t))return t.map(F);if(Xn(t)){var i={};return Object.keys(t).forEach(function(n){i[F(n)]=F(t[n])}),i}throw Error("Cannot convert from JSON: "+t)}throw Error("Cannot convert from JSON: "+t)}function P(t){var o=typeof t;if(n(t)){if(e(t))return t;throw Error("Cannot convert Tag to JSON, use UUIDTag instead: "+t)}if("string"===o||"boolean"===o||null===t||Vn(t))return t;if(Wn(t)){var r=t[uo];if(null!=r)return r(t);if("function"==typeof t.toJSON)return P(t.toJSON());if(Array.isArray(t))return t.map(P);if(Xn(t)){var i={};return Object.keys(t).forEach(function(n){i[P(n)]=P(t[n])}),i}throw Error("Cannot convert to JSON: "+t)}throw Error("Cannot convert to JSON: "+t)}function $(t,n){var e={};return e[io]=t,e.keys=[],e.values=[],I(n,function(t){oe(t,function(t,n){e.keys.push(P(t)),e.values.push(P(n))})}),e}function G(t,n){var e={};return e[io]=t,e.values=[],I(n,function(t){e.values.push(P(t))}),e}function H(t){for(var n=t.keys,e=t.values,o=n.length,r=Array(o),i=0;o>i;++i)r[i]=[F(n[i]),F(e[i])];return r}function Z(t){for(var n=t.values,e=n.length,o=Array(e),r=0;e>r;++r)o[r]=F(n[r]);return o}function B(t,n){return t>n?t:n}function V(t,n,e){var o=n.depth,r=e.depth;if(o>r+1){var i=n.left,u=n.right;return u.depth>i.depth?u.copy(n.copy(i,u.left),t.copy(u.right,e)):n.copy(i,t.copy(u,e))}if(r>o+1){var f=e.right,a=e.left;return a.depth>f.depth?a.copy(t.copy(n,a.left),e.copy(a.right,f)):e.copy(t.copy(n,a),f)}return t.copy(n,e)}function W(t,n){if(t===ao)return n;if(n===ao)return t;if(t.depth<n.depth){var e=W(t,n.left);return V(n,e,n.right)}var o=W(t.right,n);return V(t,t.left,o)}function X(t,n){return t===ao?n:V(t,X(t.left,n),t.right)}function Y(t,n){return t===ao?n:V(t,t.left,Y(t.right,n))}function tn(t){for(var n=[];t!==ao;)n.push(t),t=t.left;return{next:function(){if(n.length){var e=n.pop();for(t=e.right;t!==ao;)n.push(t),t=t.left;return{value:e}}return{done:!0}}}}function nn(){return M(this)}function en(){return P(this)}function on(t,n){return t>=0&&n>t}function rn(t){var n=this.size();return 0>t&&(t+=n),on(t,n)}function un(t,n){this.car=t,this.cdr=n}function fn(t){return{next:function(){if(t===ao)return{done:!0};var n=t.car;return t=t.cdr,{value:n}}}}function an(t,n){for(;t!==ao;)n(t.car),t=t.cdr}function cn(t,n){if(t.length){var e=t[t.length-1];e.length+n.length<=go?t[t.length-1]=e.concat(n):t.push(n)}else t.push(n)}function sn(t,n,e){if(e>n){var o=bo((n+e)/2),r=sn(t,n,o),i=sn(t,o+1,e);return new pn(r,i,t[o])}return ao}function ln(t){return sn(t,0,t.length)}function hn(t,n,e){0>n&&(n=0);var o=t.length;return e>o&&(e=o),0===n&&e===o?t:t.slice(n,e)}function vn(t,n){for(var e=Array(n);n--;)e[n]=t.car,t=t.cdr;return e}function dn(t,n,e){for(;--n!==e;)t=t.cdr;return t.car}function pn(t,n,e){this.left=t,this.right=n,this.array=e,this.size=t.size+n.size+e.length,this.depth=B(t.depth,n.depth)+1}function gn(t,n){for(;;){var e=t.left,o=e.size;if(o>n)t=e;else{n-=o;var r=t.array,i=r.length;if(i>n)return r[n];n-=i,t=t.right}}}function yn(t,n,e){if(t===ao)return new pn(ao,ao,[e]);var o=t.left,r=t.right,i=o.size;if(i>n){var f=yn(o,n,e);return V(t,f,r)}n-=i;var a=t.array,c=a.length;if(c>=n){if(a=u(a,n,e),c===go){var s=yo(a.length/2),l=a.slice(0,s),h=a.slice(s);return o.depth<r.depth?new pn(Y(o,new pn(ao,ao,l)),r,h):new pn(o,X(r,new pn(ao,ao,h)),l)}return new pn(o,r,a)}var f=yn(r,n-c,e);return V(t,o,f)}function bn(t,n,e){var o=t.left,r=t.right,i=o.size;if(i>n){var u=bn(o,n,e);return u===o?t:t.copy(u,r)}n-=i;var a=t.array,c=a.length;if(c>n){var s=f(a,n,e);return s===a?t:new pn(o,r,s)}var u=bn(r,n-c,e);return u===r?t:t.copy(o,u)}function mn(t,n){var e=t.left,o=t.right,r=e.size;if(r>n){var i=mn(e,n);return V(t,i,o)}n-=r;var u=t.array,f=u.length;if(f>n)return u=a(u,n),0===u.length?W(e,o):new pn(e,o,u);var i=mn(o,n-f);return V(t,e,i)}function xn(t,n,e,o){if(n!==ao){var r=n.left,i=r.size;i>e&&xn(t,r,e,o);var u=n.array,f=u.length;e-=i,o-=i,f>e&&o>0&&cn(t,hn(u,e,o)),o>f&&xn(t,n.right,e-f,o-f)}}function wn(t,n,e){this.root=t,this.tail=n,this.tail_size=e,this.hash=null}function En(t){return t instanceof wn}function Sn(t){return null!=t?t instanceof wn?t:new wn(ao,ao,0).concat(t):new wn(ao,ao,0)}function On(t,n){return t===n?0:n>t?-1:1}function An(t,n,e){for(;t!==ao;){var o=n(e,t.hash);if(0===o)break;t=0>o?t.left:t.right}return t}function Tn(t,n,e,o){if(t===ao)return o;var r=t.left,i=t.right,u=n(e,t.hash);if(0===u)return t.modify(o);if(0>u){var f=Tn(r,n,e,o);return f===r?t:V(t,f,i)}var f=Tn(i,n,e,o);return f===i?t:V(t,r,f)}function kn(t,n,e,o,r){if(t===ao)throw Error("Key "+o+" not found");var i=t.left,u=t.right,f=n(e,t.hash);if(0===f)return t.modify({key:o,hash:e,value:r(t.value)});if(0>f){var a=kn(i,n,e,o,r);return a===i?t:V(t,a,u)}var a=kn(u,n,e,o,r);return a===u?t:V(t,i,a)}function jn(t,n,e){if(t===ao)return t;var o=t.left,r=t.right,i=n(e,t.hash);if(0===i)return W(o,r);if(0>i){var u=jn(o,n,e);return u===o?t:V(t,u,r)}var u=jn(r,n,e);return u===r?t:V(t,o,u)}function In(){return this.root===ao}function Dn(t){return An(this.root,this.sort,this.hash_fn(t))!==ao}function zn(t){return function(n){var e=this.root,o=this.sort,r=this.hash_fn,i=jn(e,o,r(n));return i===e?this:new t(i,o,r)}}function Jn(t){return S(j(t),this,function(t,n){return oe(n,function(n,e){return t.set(n,e)})})}function Cn(){return this.len}function Nn(t){return S(t,this,function(t,n){return t.push(n)})}function qn(t,n,e,o,r){this.left=t,this.right=n,this.hash=e,this.key=o,this.value=r,this.depth=B(t.depth,n.depth)+1}function Un(t,n,e){this.root=t,this.sort=n,this.hash_fn=e,this.hash=null}function _n(t){return t instanceof Un}function Rn(t){return _n(t)&&t.hash_fn===ne}function Mn(t,n){return null!=n?Rn(n)&&n.sort===t?n:new Un(ao,t,ne).merge(n):new Un(ao,t,ne)}function Ln(t){return null!=t?_n(t)&&!Rn(t)?t:new Un(ao,On,M).merge(t):new Un(ao,On,M)}function Kn(t){if(Array.isArray(t)){for(var n=Sn(),e=0,o=t.length;o>e;++e)n=n.insert(Kn(t[e]));return n}if(Xn(t)){var n=Ln();return Object.keys(t).forEach(function(e){n=n.set(Kn(e),Kn(t[e]))}),n}return t}function Qn(t){if(Wn(t)){var n=t[ro];if(null!=n)return n(t);if(Array.isArray(t))return t.map(Qn);if(Xn(t)){var e={};return Object.keys(t).forEach(function(n){e[Qn(n)]=Qn(t[n])}),e}return t}return t}function Fn(t){var n={};return I(t,function(t){oe(t,function(t,e){if("string"!=typeof t)throw Error("Cannot convert to JavaScript: expected key to be string or Tag but got "+t);n[t]=Qn(e)})}),n}function Pn(t){var n=[];return I(t,function(t){n.push(Qn(t))}),n}function $n(t){this.values=t,this.hash=null}function Gn(t){return t instanceof $n}function Hn(t){return new $n(t)}function Zn(t){if(null!=t){if(Gn(t))return t;var n=[];return I(t,function(t){n.push(t)}),new $n(n)}return new $n([])}function Bn(t){return t!==t}function Vn(t){return"number"==typeof t&&1/0!==t&&t!==-1/0&&!Bn(t)}function Wn(t){return Object(t)===t}function Xn(t){return Wn(t)&&Object.getPrototypeOf(t)===Object.prototype}function Yn(t,n){return Array(n+1).join(t)}function te(t,n,e){var o=Math.max(0,n-t.length);return t+Yn(e,o)}function ne(t){return t}function ee(t,n){return 1===t?n:n+"s"}function oe(t,n){if(Array.isArray(t)){if(2===t.length)return n(t[0],t[1]);throw Error("Expected array with 2 elements but got "+t.length+" "+ee(t.length,"element"))}if(Gn(t)){if(2===t.size())return n(t.get(0),t.get(1));throw Error("Expected Tuple with 2 elements but got "+t.size()+" "+ee(t.size(),"element"))}throw Error("Expected array or Tuple but got: "+t)}function re(t,n,e,o){this.left=t,this.right=n,this.hash=e,this.key=o,this.depth=B(t.depth,n.depth)+1}function ie(t,n,e){this.root=t,this.sort=n,this.hash_fn=e,this.hash=null}function ue(t){return t instanceof ie}function fe(t){return ue(t)&&t.hash_fn===ne}function ae(t,n){return null!=n?fe(n)&&n.sort===t?n:new ie(ao,t,ne).union(n):new ie(ao,t,ne)}function ce(t){return null!=t?ue(t)&&!fe(t)?t:new ie(ao,On,M).union(t):new ie(ao,On,M)}function se(t,n,e){this.left=t,this.right=n,this.len=e,this.hash=null}function le(t){return t instanceof se}function he(t){return null!=t?t instanceof se?t:new se(ao,ao,0).concat(t):new se(ao,ao,0)}function ve(t,n){this.root=t,this.len=n,this.hash=null}function de(t){return t instanceof ve}function pe(t){return null!=t?t instanceof ve?t:new ve(ao,0).concat(t):new ve(ao,0)}function ge(t){if("string"!=typeof t)throw Error("Expected key to be a string or Tag but got "+t)}function ye(t,n){this.keys=t,this.values=n,this.hash=null}function be(t){return t instanceof ye}function me(t){var n={},e=[];if(null!=t){if(be(t))return t;var o=N(j(t),function(t){return oe(t,function(t,n){return ge(t),[t,n]})}),r=A(o).sort(function(t,n){return On(t[0],n[0])});I(r,function(t){var o=t[0],r=t[1],i=n[o];null==i?n[o]=e.push(r)-1:e[i]=r})}return new ye(n,e)}function xe(t,n){this._id=++mo,this._value=t,this._onchange=n}function we(t){return Ee(t)?t.get():t}function Ee(t){return t instanceof xe}function Se(t,n){if(arguments.length<1||arguments.length>2)throw Error("Expected 1 to 2 arguments but got "+arguments.length);return new xe(t,n)}function Oe(t){if(Wn(t))return Object.isFrozen(t)||_n(t)||ue(t)||En(t)||Gn(t)||le(t)||de(t)||be(t);var n=typeof t;return"string"===n||"number"===n||"boolean"===n||"symbol"===n||null==t}function Ae(t){if(1!==arguments.length)throw Error("Invalid argument length");if(!t)throw Error("Failed: "+t)}function Te(t,n){return Math.floor(Math.random()*(n-t))+t}function ke(t,n){return t===n?0:n>t?-1:1}function je(t){for(var n=t.length;n;){var e=Te(0,n);--n;var o=t[n];t[n]=t[e],t[e]=o}}function Ie(t,n){var e=So;So=t;try{n()}finally{So=e}}function De(t,n){try{n(),++wo}catch(n){++Eo,console.log(""),console.log("*** "+(So?So+".":"")+t+" FAILED"),console.log(n.stack?n.stack:n),console.log("")}}function ze(t,n){try{throw t(),Error("Expected an error, but it did not happen")}catch(t){if(t.message!==n)throw Error('Expected "'+n+'" but got "'+t.message+'"')}}function Je(t){return Object(t)===t}function Ce(t,n){if(t===n)return!0;if(Array.isArray(t)&&Array.isArray(n)){if(t.length===n.length){for(var e=0,o=t.length;o>e;++e)if(!Ce(t[e],n[e]))return!1;return!0}return!1}if(Je(t)&&Je(n)){if(Object.getPrototypeOf(t)===Object.getPrototypeOf(n)){for(var r=Object.getOwnPropertyNames(t),i=Object.getOwnPropertyNames(n),e=0,o=r.length;o>e;++e){var u=r[e];if(!Oo.call(n,u))return!1;if(!Ce(t[u],n[u]))return!1}for(var e=0,o=i.length;o>e;++e){var u=i[e];if(!Oo.call(t,u))return!1}return!0}return!1}return!1}function Ne(t,n){var e=[];I(t(n),function(t){e.push(t)}),Ae(Ce(e,n))}function qe(t,n){var e=[];I(t,function(t){Ae(Gn(t)),e.push(t.values)}),Ae(Ce(e,n))}function Ue(t){var n=P(t);Ae(n!==t);var e=F(n);Ae(e!==n),Ae(c(t,e))}function _e(t,n){var e=P(t);Ae(e!==t);var o=F(e);Ae(o!==e),Ae(c(t,o)),Ae(Ce(Qn(t),n)),Ae(Ce(Qn(o),n))}function Re(t){function n(t,r,i){if(t!==ao){var u=t.left,f=t.right;Ae(t.depth===Math.max(u.depth,f.depth)+1);var a=u.depth-f.depth;Ae(-1===a||0===a||1===a),r.forEach(function(n){Ae(e(o(t.key),o(n.key))<0)}),i.forEach(function(n){Ae(e(o(t.key),o(n.key))>0)}),n(u,r.concat([t]),i),n(f,r,i.concat([t]))}}var e=t.sort,o=t.hash_fn;n(t.root,[],[])}function Me(t,n){return Ae(_n(t)),Re(t),Ae(Ce(Qn(t),n)),t}function Le(t,n){return Ae(ue(t)),Re(t),Ae(Ce(Qn(t),n)),t}function Ke(t,n){function e(t){if(t!==ao){var n=t.left,o=t.right;Ae(t.depth===Math.max(n.depth,o.depth)+1);var r=n.depth-o.depth;Ae(-1===r||0===r||1===r),Ae(t.array.length<=125),Ae(t.size===n.size+o.size+t.array.length),e(n),e(o)}}Ae(En(t)),e(t.root);for(var o=0,r=t.tail;r!==ao;)++o,r=r.cdr;return Ae(o===t.tail_size),Ae(t.tail_size<=125),Ae(Ce(Qn(t),n)),t}function Qe(t,n){return Ae(Gn(t)),Ae(Ce(t.values,n)),Ae(Ce(Qn(t),n)),t}function Fe(t,n){return Ae(le(t)),t.isEmpty()||Ae(t.left!==ao),Ae(Ce(Qn(t),n)),t}function Pe(t,n){return Ae(de(t)),Ae(Ce(Qn(t),n)),t}function $e(t,n){Ae(be(t));var e=0;for(var o in t.keys)++e;return Ae(e===t.values.length),Ae(Ce(Qn(t),n)),t}function Ge(t){return Math.floor(Math.random()*t)}function He(t){for(var n=[],e=0;t>e;++e)n.push(e);return je(n),n}var Ze="48de6fff-9d11-472d-a76f-ed77a59a5cbc",Be=0,Ve="[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}",We=RegExp("^"+Ve+"$"),Xe=RegExp("^\\(Tag "+Ze+" [0-9]+\\)$"),Ye=RegExp("^\\(UUIDTag "+Ve+"\\)$"),to="undefined"!=typeof Symbol&&void 0!==Symbol.iterator?Symbol.iterator:null,no="undefined"!=typeof Symbol&&void 0!==Symbol.keyFor?Symbol.keyFor:null;void 0===global.Symbol&&(global.Symbol={iterator:r("4d6d99dc-20e8-4db1-8acd-c05c1121326e")});var eo=r("e1c3818d-4c4f-4703-980a-00969e4ca900"),oo=r("6199065c-b518-4cb3-8b41-ab70a9769ec3"),ro=r("1b75a273-16bd-4248-be8a-e4b5e8c4b523"),io=r("89d8297c-d95e-4ce9-bc9b-6b6f73fa6a37"),uo=r("99e14916-bc99-4c48-81aa-299cf1ad6de3"),fo={},ao={};ao.depth=0,ao.size=0;var co={},so=0,lo=0,ho={},vo={},po={};vo.toString=po.toString=nn,vo.inspect=po.inspect=nn,po.toJSON=en,null!==to&&(vo[to]=po[to]=function(){return h(this)});var go=125,yo=Math.ceil,bo=Math.floor;pn.prototype.copy=function(t,n){return new pn(t,n,this.array)},wn.prototype=Object.create(po),wn.prototype[eo]=K("List"),wn.prototype[ro]=Pn,wn.prototype.has=rn,fo.List=function(t){return Sn(Z(t))},wn.prototype[uo]=function(t){return G("List",t)},wn.prototype[oo]=function(){var t=k(tn(this.root),function(t){return h(t.array)});return g(t,E(fn(this.tail)))},wn.prototype.isEmpty=function(){return this.root===ao&&this.tail===ao},wn.prototype.removeAll=function(){return new wn(ao,ao,0)},wn.prototype.size=function(){return this.root.size+this.tail_size},wn.prototype.get=function(t,n){var e=this.size();if(0>t&&(t+=e),on(t,e)){var o=this.root,r=o.size;return r>t?gn(o,t):dn(this.tail,this.tail_size,t-r)}if(2===arguments.length)return n;throw Error("Index "+t+" is not valid")},wn.prototype.insert=function(t,n){1===arguments.length&&(n=-1);var e=this.size();0>n&&(n+=e+1);var o=this.root,r=this.tail,i=this.tail_size;if(n===e){if(i===go){var f=Y(o,new pn(ao,ao,vn(r,i)));return new wn(f,new un(t,ao),1)}return new wn(o,new un(t,r),i+1)}if(on(n,e)){var a=o.size;if(a>n)return new wn(yn(o,n,t),r,i);var c=u(vn(r,i),n-a,t),f=Y(o,new pn(ao,ao,c));return new wn(f,ao,0)}throw Error("Index "+n+" is not valid")},wn.prototype.remove=function(t){0===arguments.length&&(t=-1);var n=this.size();0>t&&(t+=n);var e=this.root,o=this.tail,r=this.tail_size;if(o!==ao&&t===n-1)return new wn(e,o.cdr,r-1);if(on(t,n)){var i=e.size;if(i>t)return new wn(mn(e,t),o,r);var u=a(vn(o,r),t-i),f=Y(e,new pn(ao,ao,u));return new wn(f,ao,0)}throw Error("Index "+t+" is not valid")},wn.prototype.modify=function(t,n){var e=this.size();if(0>t&&(t+=e),on(t,e)){var o=this.root,r=this.tail,i=this.tail_size,u=o.size;if(r!==ao&&t===e-1){var a=n(r.car);return a===r.car?this:new wn(o,new un(a,r.cdr),i)}if(u>t){var c=bn(o,t,n);return c===o?this:new wn(c,r,i)}var s=vn(r,i),l=f(s,t-u,n);if(l===s)return this;var c=Y(o,new pn(ao,ao,l));return new wn(c,ao,0)}throw Error("Index "+t+" is not valid")},wn.prototype.set=function(t,n){return this.modify(t,function(){return n})},wn.prototype.slice=function(t,n){var e=this.size();if(null==t&&(t=0),null==n&&(n=e),0>t&&(t+=e),0>n&&(n+=e),0===t&&n===e)return this;if(t>n)throw Error("Index "+t+" is greater than index "+n);if(on(t,e)){if(t===n)return new wn(ao,ao,0);if(n>0&&e>=n){var o=this.root,r=o.size,i=[];if(r>=t&&xn(i,o,t,n),n>r){var u=vn(this.tail,this.tail_size);cn(i,hn(u,t-r,n-r))}return new wn(ln(i),ao,0)}throw Error("Index "+n+" is not valid")}throw Error("Index "+t+" is not valid")},wn.prototype.concat=function(t){if(t instanceof wn){var n=this.root,e=this.tail,o=t.root,r=t.tail;if(o===ao&&r===ao)return this;if(n===ao&&e===ao)return t;e!==ao&&(n=Y(n,new pn(ao,ao,vn(e,this.tail_size))));var i=W(n,o);return new wn(i,r,t.tail_size)}return S(t,this,function(t,n){return t.insert(n)})},qn.prototype.copy=function(t,n){return new qn(t,n,this.hash,this.key,this.value)},qn.prototype.modify=function(t){var n=t.hash,e=t.key,o=t.value;return this.hash===n&&this.key===e&&this.value===o?this:new qn(this.left,this.right,n,e,o)},Un.prototype=Object.create(po),Un.prototype[ro]=Fn,Un.prototype.isEmpty=In,Un.prototype.has=Dn,Un.prototype.remove=zn(Un),Un.prototype.merge=Jn,Un.prototype[oo]=function(){return p(tn(this.root),function(t){return Hn([t.key,t.value])})},Un.prototype[eo]=function(t){return null===t.hash&&(t.hash=_n(t)&&!Rn(t)?"(Dict"+L(t,"  ")+")":"(SortedDict "+M(t.sort)+L(t,"  ")+")"),t.hash},fo.Dict=function(t){return Ln(H(t))},Un.prototype[uo]=function(t){if(_n(t)&&!Rn(t))return $("Dict",t);throw Error("Cannot convert SortedDict to JSON")},Un.prototype.removeAll=function(){return new Un(ao,this.sort,this.hash_fn)},Un.prototype.get=function(t,n){var e=An(this.root,this.sort,this.hash_fn(t));if(e===ao){if(2===arguments.length)return n;throw Error("Key "+t+" not found")}return e.value},Un.prototype.set=function(t,n){var e=this.root,o=this.sort,r=this.hash_fn,i=r(t),u=Tn(e,o,i,new qn(ao,ao,i,t,n));return u===e?this:new Un(u,o,r)},Un.prototype.modify=function(t,n){var e=this.root,o=this.sort,r=this.hash_fn,i=kn(e,o,r(t),t,n);return i===e?this:new Un(i,o,r)},$n.prototype=Object.create(po),$n.prototype[eo]=K("Tuple"),$n.prototype[ro]=Pn,fo.Tuple=function(t){return Zn(Z(t))},$n.prototype[uo]=function(t){return G("Tuple",t)},$n.prototype[oo]=function(){return h(this.values)},$n.prototype.size=function(){return this.values.length},$n.prototype.get=function(t){var n=this.size();if(on(t,n))return this.values[t];throw Error("Index "+t+" is not valid")},$n.prototype.modify=function(t,n){var e=this.size();if(on(t,e)){var o=this.values,r=f(o,t,n);return r===o?this:new $n(r)}throw Error("Index "+t+" is not valid")},$n.prototype.set=function(t,n){return this.modify(t,function(){return n})},re.prototype.copy=function(t,n){return new re(t,n,this.hash,this.key)},re.prototype.modify=function(t){var n=t.hash,e=t.key;return this.hash===n&&this.key===e?this:new re(this.left,this.right,n,e)},ie.prototype=Object.create(po),ie.prototype[ro]=Pn,ie.prototype.isEmpty=In,ie.prototype.has=Dn,ie.prototype.remove=zn(ie),fo.Set=function(t){return ce(Z(t))},ie.prototype[oo]=function(){return p(tn(this.root),function(t){return t.key})},ie.prototype[uo]=function(t){if(ue(t)&&!fe(t))return G("Set",t);throw Error("Cannot convert SortedSet to JSON")},ie.prototype[eo]=function(t){if(null===t.hash){var n=N(t,function(t){return M(t)}),e="  ";t.hash=ue(t)&&!fe(t)?"(Set"+Q(n,e)+")":"(SortedSet "+M(t.sort)+Q(n,e)+")"}return t.hash},ie.prototype.removeAll=function(){return new ie(ao,this.sort,this.hash_fn)},ie.prototype.add=function(t){var n=this.root,e=this.sort,o=this.hash_fn,r=o(t),i=Tn(n,e,r,new re(ao,ao,r,t));return i===n?this:new ie(i,e,o)},ie.prototype.union=function(t){return S(t,this,function(t,n){return t.add(n)})},ie.prototype.intersect=function(t){var n=this;if(n.isEmpty())return n;var e=n.removeAll();return S(t,e,function(t,e){return n.has(e)?t.add(e):t})},ie.prototype.disjoint=function(t){var n=this;return S(t,n,function(t,e){return n.has(e)?t.remove(e):t.add(e)})},ie.prototype.subtract=function(t){return this.isEmpty()?this:S(t,this,function(t,n){return t.remove(n)})},se.prototype=Object.create(po),se.prototype[ro]=Pn,se.prototype[eo]=K("Queue"),se.prototype.size=Cn,se.prototype.concat=Nn,fo.Queue=function(t){return he(Z(t))},se.prototype[uo]=function(t){return G("Queue",t)},se.prototype.isEmpty=function(){return this.left===ao&&this.right===ao},se.prototype.removeAll=function(){return new se(ao,ao,0)},se.prototype[oo]=function(){return g(fn(this.left),E(fn(this.right)))},se.prototype.peek=function(t){if(this.isEmpty()){if(1===arguments.length)return t;throw Error("Cannot peek from an empty queue")}return this.left.car},se.prototype.push=function(t){return this.isEmpty()?new se(new un(t,this.left),this.right,this.len+1):new se(this.left,new un(t,this.right),this.len+1)},se.prototype.pop=function(){if(this.isEmpty())throw Error("Cannot pop from an empty queue");var t=this.left.cdr;if(t===ao){var n=ao;return an(this.right,function(t){n=new un(t,n)}),new se(n,ao,this.len-1)}return new se(t,this.right,this.len-1)},ve.prototype=Object.create(po),ve.prototype[ro]=Pn,ve.prototype[eo]=K("Stack"),ve.prototype.isEmpty=In,ve.prototype.size=Cn,ve.prototype.concat=Nn,fo.Stack=function(t){return pe(Z(t))},ve.prototype[oo]=function(){return E(fn(this.root))},ve.prototype[uo]=function(t){return G("Stack",t)},ve.prototype.removeAll=function(){return new ve(ao,0)},ve.prototype.peek=function(t){if(this.isEmpty()){if(1===arguments.length)return t;throw Error("Cannot peek from an empty stack")}return this.root.car},ve.prototype.push=function(t){return new ve(new un(t,this.root),this.len+1)},ve.prototype.pop=function(){if(this.isEmpty())throw Error("Cannot pop from an empty stack");return new ve(this.root.cdr,this.len-1)},ye.prototype=Object.create(po),ye.prototype.update=Jn,ye.prototype[ro]=Fn,fo.Record=function(t){return me(H(t))},ye.prototype[uo]=function(t){return $("Record",t)},ye.prototype[eo]=function(t){return null===t.hash&&(t.hash="(Record"+L(t,"  ")+")"),t.hash},ye.prototype[oo]=function(){var t=this.keys,n=this.values;return h(N(j(t),function(t){return oe(t,function(t,e){return Hn([t,n[e]])})}))},ye.prototype.get=function(t){ge(t);var n=this.keys[t];if(null==n)throw Error("Key "+t+" not found");return this.values[n]},ye.prototype.set=function(t,n){return this.modify(t,function(){return n})},ye.prototype.modify=function(t,n){ge(t);var e=this.keys,o=e[t];if(null==o)throw Error("Key "+t+" not found");var r=this.values,i=f(r,o,n);return i===r?this:new ye(e,i)};var mo=0;xe.prototype=Object.create(vo),xe.prototype[eo]=function(t){return"(Ref "+M(t._id)+")"},xe.prototype.get=function(){return this._value},xe.prototype.set=function(t){var n=this._value;t!==n&&(this._value=t,null!=this._onchange&&this._onchange(n,t))},xe.prototype.modify=function(t){this.set(t(this.get()))},function(t,n){"function"==typeof define&&define.amd?define(["exports"],n):"object"==typeof exports?n(exports):(t.Immutable={},n(t.Immutable))}(this,function(t){t.equal=c,t.fromJS=Kn,t.toJS=Qn,t.isDict=_n,t.isSet=ue,t.isSortedDict=Rn,t.isSortedSet=fe,t.isList=En,t.isQueue=le,t.isTuple=Gn,t.isStack=de,t.isImmutable=Oe,t.SortedDict=Mn,t.SortedSet=ae,t.isIterable=l,t.Dict=Ln,t.Set=ce,t.List=Sn,t.Tuple=Zn,t.Queue=he,t.Stack=pe,t.simpleSort=On,t.isRecord=be,t.Record=me,t.toJSON=P,t.fromJSON=F,t.deref=we,t.Ref=Se,t.isRef=Ee,t.isTag=n,t.isUUIDTag=e,t.Tag=o,t.UUIDTag=r,t.each=I,t.map=N,t.keep=U,t.findIndex=D,t.reverse=q,t.foldl=S,t.foldr=O,t.join=T,t.zip=w,t.toArray=A,t.any=y,t.all=b,t.find=m,t.partition=x,t.range=C,t.take=J,t.indexOf=z,t.toIterator=h,t.Iterable=v});var xo=Date.now(),wo=0,Eo=0,So=null,Oo={}.hasOwnProperty;Ie("Dict",function(){var t=Ln(),n=Ln().set("foo",1);De("isDict",function(){Ae(!_n(ce())),Ae(_n(Ln())),Ae(_n(Mn(On))),Ae(Rn(Mn(On))),Ae(!Rn(Ln()))}),De("verify",function(){Me(t,{}),Me(n,{foo:1})}),De("init",function(){var t=Ln({foo:1});Me(t,{foo:1}),Ae(c(t,n)),Ae(c(n,t)),Me(Ln([["foo",2]]),{foo:2}),Me(Ln([Zn(["foo",2])]),{foo:2}),ze(function(){Ln(Object.create(null))},"Cannot convert object to primitive value"),ze(function(){Ln([Sn(["foo",2])])},'Expected array or Tuple but got: (List\n  "foo"\n  2)'),ze(function(){Ln([{}])},"Expected array or Tuple but got: [object Object]"),ze(function(){Ln([[]])},"Expected array with 2 elements but got 0 elements"),ze(function(){Ln([["foo"]])},"Expected array with 2 elements but got 1 element"),ze(function(){Ln([["foo",2,3]])},"Expected array with 2 elements but got 3 elements"),ze(function(){Ln([Zn([])])},"Expected Tuple with 2 elements but got 0 elements"),ze(function(){Ln([Zn(["foo"])])},"Expected Tuple with 2 elements but got 1 element"),ze(function(){Ln([Zn(["foo",2,3])])},"Expected Tuple with 2 elements but got 3 elements");var t={},e=N(Ln([[t,1]]),function(t){return Ae(Gn(t)),A(t)});Ae(Ce(A(e),[[t,1]])),ze(function(){Ln([[Object.preventExtensions({foo:1}),1]])},"Cannot use a non-extensible object as a key: [object Object]"),ze(function(){Ln([[Object.seal({foo:1}),1]])},"Cannot use a non-extensible object as a key: [object Object]"),ze(function(){Ln([[Object.freeze({foo:1}),1]])},"Cannot use a non-extensible object as a key: [object Object]")}),De("isEmpty",function(){Ae(t.isEmpty()),Ae(!n.isEmpty())}),De("has",function(){Ae(!t.has("foo")),Ae(!t.has("bar")),Ae(n.has("foo")),Ae(!n.has("bar"))}),De("get",function(){ze(function(){t.get("foo")},"Key foo not found"),Ae(50===t.get("foo",50)),Ae(1===n.get("foo")),Ae(1===n.get("foo",50))}),De("set",function(){var e=t.set("bar",2);Ae(!t.has("bar")),Ae(e.has("bar")),Ae(2===e.get("bar"));var o=n.set("foo",3);Ae(1===n.get("foo")),Ae(3===o.get("foo"))}),De("modify",function(){var e=!1;ze(function(){t.modify("foo",function(t){return e=!0,t+1})},"Key foo not found"),Ae(e===!1);var e=!1,o=n.modify("foo",function(t){return e=!0,Ae(1===t),t+5});Ae(e===!0),Ae(1===n.get("foo")),Ae(6===o.get("foo"))}),De("remove",function(){Ae(!t.has("foo"));var e=t.remove("foo");Ae(!e.has("foo"));var o=n.remove("foo");Ae(n.has("foo")),Ae(!o.has("foo"))}),De("merge",function(){Me(Ln({foo:1}),{foo:1}),Me(Ln({foo:1}).merge([]),{foo:1}),Me(Ln({foo:1}).merge([["bar",2]]),{foo:1,bar:2}),Me(Ln({foo:1}).merge(Ln({bar:2})),{foo:1,bar:2}),Me(Ln({foo:1}).merge(Ln({foo:2})),{foo:2}),Me(Ln({foo:1}).merge(Ln({foo:2,bar:3})),{foo:2,bar:3}),Me(Ln({foo:1}).merge({bar:2}),{foo:1,bar:2}),Me(Ln().merge([["foo",2]]),{foo:2}),Me(Ln().merge([Zn(["foo",2])]),{foo:2}),ze(function(){Ln().merge(Object.create(null))},"Cannot convert object to primitive value"),ze(function(){Ln().merge([Sn(["foo",2])])},'Expected array or Tuple but got: (List\n  "foo"\n  2)'),ze(function(){Ln().merge([{}])},"Expected array or Tuple but got: [object Object]"),ze(function(){Ln().merge([[]])},"Expected array with 2 elements but got 0 elements"),ze(function(){Ln().merge([["foo"]])
},"Expected array with 2 elements but got 1 element"),ze(function(){Ln().merge([["foo",2,3]])},"Expected array with 2 elements but got 3 elements"),ze(function(){Ln().merge([Zn([])])},"Expected Tuple with 2 elements but got 0 elements"),ze(function(){Ln().merge([Zn(["foo"])])},"Expected Tuple with 2 elements but got 1 element"),ze(function(){Ln().merge([Zn(["foo",2,3])])},"Expected Tuple with 2 elements but got 3 elements")}),De("complex keys",function(){var t=Ln(),n={},e={},o=Ln(),r=Ln(),i=Ln({foo:10});t=t.set(n,1),t=t.set(e,2),t=t.set(o,3),t=t.set(r,4),t=t.set(i,5),Ae(t.has(n)),Ae(t.has(e)),Ae(t.has(o)),Ae(t.has(r)),Ae(t.has(i)),Ae(1===t.get(n)),Ae(2===t.get(e)),Ae(4===t.get(o)),Ae(4===t.get(r)),Ae(5===t.get(i)),t=t.remove(n),t=t.remove(e),t=t.remove(o),t=t.remove(i),Ae(!t.has(n)),Ae(!t.has(e)),Ae(!t.has(o)),Ae(!t.has(r)),Ae(!t.has(i))}),De("=== when not modified",function(){Ae(Ln(n)===n);var e=Mn(On,n);Ae(e!==n),Ae(Ln(e)!==e),Ae(Mn(On,e)===e);var e=Mn(On,n);Ae(Mn(ke,e)!==e);var e=Mn(ke,n);Ae(Mn(On,e)!==e);var e=Mn(ke,n);Ae(Mn(ke,e)===e),Ae(t.remove("foo")===t),Ae(n.set("foo",1)===n),Ae(n.set("foo",2)!==n),Ae(n.set("bar",3)!==n),Ae(n.remove("foo")!==n);var o=Ln().set(Ln({foo:1}),Ln({bar:2}));Ae(o.modify(Ln({foo:1}),function(){return Ln({bar:2})})!==o),Ae(o.modify(Ln({foo:1}),function(){return Ln({bar:3})})!==o),Ae(n.modify("foo",function(){return 1})===n),Ae(n.modify("foo",function(){return 2})!==n),Ae(n.merge([])===n),Ae(n.merge([["foo",1]])===n),Ae(n.merge([["foo",2]])!==n),Ae(t.merge(n)!==n)}),De("equal",function(){Ae(!c(t,n)),Ae(c(t,t)),Ae(c(n,n)),Ae(c(Ln(),Ln())),Ae(c(Ln({foo:1}),Ln({foo:1}))),Ae(c(Ln({foo:Ln({bar:2})}),Ln({foo:Ln({bar:2})}))),Ae(!c(Ln({foo:Ln({bar:2})}),Ln({foo:Ln({bar:3})}))),Ae(c(Mn(On,{foo:1}),Mn(On,{foo:1}))),Ae(!c(Mn(On,{foo:1}),Ln({foo:1}))),Ae(!c(Mn(On,{foo:1}),Mn(ke,{foo:1})))}),De("toJS",function(){Ae(Ce(Qn(t),{})),Ae(Ce(Qn(n),{foo:1})),Ae(Ce(Qn(Ln({foo:Ln({bar:2})})),{foo:{bar:2}})),ze(function(){Qn(Ln().set(Ln({foo:1}),2))},'Cannot convert to JavaScript: expected key to be string or Tag but got (Dict\n  "foo" = 1)')}),De("toJSON",function(){_e(t,{}),_e(n,{foo:1}),_e(Ln({foo:Ln({bar:2})}),{foo:{bar:2}}),Ue(Ln([[Ln({foo:1}),Ln({bar:2})]])),ze(function(){P(Mn(On,{}))},"Cannot convert SortedDict to JSON")}),De("random keys",function(){var t=Ln(),n={};Me(t,n),He(200).forEach(function(e){t=t.set("foo"+e,5),n["foo"+e]=5,Me(t,n)}),He(200).forEach(function(e){t=t.modify("foo"+e,function(t){return t+15}),n["foo"+e]=n["foo"+e]+15,Me(t,n)}),He(200).forEach(function(e){t=t.remove("foo"+e),delete n["foo"+e],Me(t,n)})}),De("each",function(){qe(Ln([]),[]);var t=Ln({corge:3});qe(Ln([["foo",1],["qux",t],["bar",2]]),[["bar",2],["foo",1],["qux",t]])}),De("toString",function(){Ae(""+Ln()=="(Dict)"),Ae(""+Mn(On)=="(SortedDict (Mutable 4))"),Ae(""+Mn(On,{foo:1})=='(SortedDict (Mutable 4)\n  "foo" = 1)'),Ae(""+Mn(On,{foo:1,bar:2})=='(SortedDict (Mutable 4)\n  "bar" = 2\n  "foo" = 1)'),Ae(""+Ln([[0,1]])=="(Dict\n  0 = 1)"),Ae(""+Ln([[-0,1]])=="(Dict\n  0 = 1)"),Ae(""+Ln([[0,1],[-0,2]])=="(Dict\n  0 = 2)"),Ae(""+Ln([[{},1]])=="(Dict\n  (Mutable 6) = 1)"),Ae(""+Ln([[{},1]])=="(Dict\n  (Mutable 7) = 1)"),Ae(""+Ln({foo:1})=='(Dict\n  "foo" = 1)'),Ae(""+Ln({foo:1,bar:2})=='(Dict\n  "bar" = 2\n  "foo" = 1)'),Ae(""+Ln({"foo\nbar\nqux":1,bar:2})=='(Dict\n  "bar" = 2\n  "foo\n   bar\n   qux" = 1)'),Ae(""+Ln({foo:Ln({qux:3}),bar:2})=='(Dict\n  "bar" = 2\n  "foo" = (Dict\n            "qux" = 3))'),Ae(""+Ln({"foo\nbar\nqux":Ln({qux:3}),bar:2})=='(Dict\n  "bar" = 2\n  "foo\n   bar\n   qux" = (Dict\n            "qux" = 3))'),Ae(""+Ln({foobarquxcorgenou:1,bar:2})=='(Dict\n  "bar"               = 2\n  "foobarquxcorgenou" = 1)'),Ae(""+Ln({"foobar\nquxcorgenou":1,bar:2})=='(Dict\n  "bar"         = 2\n  "foobar\n   quxcorgenou" = 1)'),Ae(""+Ln({"foo\nbar\nqux":1,barquxcorgenou:2})=='(Dict\n  "barquxcorgenou" = 2\n  "foo\n   bar\n   qux"            = 1)'),Ae(""+Ln([[Ln({foo:1}),Ln({bar:2})]])=='(Dict\n  (Dict\n    "foo" = 1) = (Dict\n                   "bar" = 2))')}),De("removeAll",function(){Me(t.removeAll(),{}),Me(n.removeAll(),{});var e=Mn(On,{}),o=Mn(On,{foo:1});Me(e.removeAll(),{}),Me(o.removeAll(),{}),Ae(e.sort===e.removeAll().sort),Ae(e.hash_fn===e.removeAll().hash_fn),Ae(o.sort===o.removeAll().sort),Ae(o.hash_fn===o.removeAll().hash_fn)})}),Ie("Set",function(){var t=ce(),n=ce().add(1).add(2).add(3).add(4).add(5);De("isSet",function(){Ae(!ue(Ln())),Ae(ue(ce())),Ae(ue(ae(On))),Ae(fe(ae(On))),Ae(!fe(ce()))}),De("verify",function(){Le(t,[]),Le(n,[1,2,3,4,5])}),De("init",function(){Le(ce([1,2,3]),[1,2,3])}),De("isEmpty",function(){Ae(t.isEmpty()),Ae(!n.isEmpty())}),De("has",function(){Ae(!t.has(1)),Ae(!n.has(0)),Ae(n.has(1)),Ae(n.has(2)),Ae(n.has(3)),Ae(n.has(4)),Ae(n.has(5)),Ae(!n.has(6))}),De("add",function(){Le(t,[]),Le(t.add(5),[5]),Le(t,[]),Le(n,[1,2,3,4,5]),Le(n.add(5),[1,2,3,4,5]),Le(n,[1,2,3,4,5])}),De("remove",function(){Le(t.remove(1),[]),Le(n.remove(1),[2,3,4,5]),Le(n.remove(1).remove(4),[2,3,5])}),De("removeAll",function(){Le(t.removeAll(),[]),Le(n.removeAll(),[]);var e=ae(On,[]),o=ae(On,[1,2,3,4,5]);Le(e.removeAll(),[]),Le(o.removeAll(),[]),Ae(e.sort===e.removeAll().sort),Ae(e.hash_fn===e.removeAll().hash_fn),Ae(o.sort===o.removeAll().sort),Ae(o.hash_fn===o.removeAll().hash_fn)}),De("union",function(){Le(n.union(n),[1,2,3,4,5]),Le(n.union(ce([1,2,6,9])),[1,2,3,4,5,6,9]),Le(ce([1,2]).union(n),[1,2,3,4,5]),Le(ce([1,2,6]).union(n),[1,2,3,4,5,6]),Le(n.union([1,2,6,9]),[1,2,3,4,5,6,9])}),De("intersect",function(){Le(n.intersect(n),[1,2,3,4,5]),Le(t.intersect(n),[]),Le(n.intersect(t),[]),Le(n.intersect([1,3,4]),[1,3,4]),Le(n.intersect([1,3,4,6,10,20]),[1,3,4])}),De("disjoint",function(){Le(n.disjoint(n),[]),Le(n.disjoint(t),[1,2,3,4,5]),Le(t.disjoint(n),[1,2,3,4,5]),Le(n.disjoint([1,2,3]),[4,5]),Le(n.disjoint([1,2,3,6,7,8]),[4,5,6,7,8]),Le(n.disjoint([1,2,3,3,6,7,8]),[4,5,6,7,8]),Le(n.disjoint([1,2,3,3,3,6,7,8]),[4,5,6,7,8]),Le(n.disjoint([1,2,3,3,6,6,6,7,8]),[4,5,6,7,8])}),De("subtract",function(){Le(n.subtract(t),[1,2,3,4,5]),Le(t.subtract(n),[]),Le(n.subtract(n),[]),Le(n.subtract([1,2,3]),[4,5]),Le(n.subtract([1,2,3,6,7,9]),[4,5])}),De("complex elements",function(){var t=ce(),n={},e={},o=ce(),r=ce(),i=ce([1,2,3]);t=t.add(n),t=t.add(e),t=t.add(o),t=t.add(r),t=t.add(i),Ae(t.has(n)),Ae(t.has(e)),Ae(t.has(o)),Ae(t.has(r)),Ae(t.has(i)),t=t.remove(n),t=t.remove(e),t=t.remove(o),t=t.remove(i),Ae(!t.has(n)),Ae(!t.has(e)),Ae(!t.has(o)),Ae(!t.has(r)),Ae(!t.has(i))}),De("=== when not modified",function(){Ae(ce(n)===n);var e=ae(On,n);Ae(e!==n),Ae(ce(e)!==e),Ae(ae(On,e)===e);var e=ae(On,n);Ae(ae(ke,e)!==e);var e=ae(ke,n);Ae(ae(On,e)!==e);var e=ae(ke,n);Ae(ae(ke,e)===e),Ae(t.union(t)===t),Ae(t.union(n)!==n),Ae(n.union(t)===n),Ae(n.union(n)===n),Ae(n.union(ce([1,2,3]))===n),Ae(ce(n)===n),Ae(ae(On,n)!==n),Ae(t.remove(1)===t);var o=ce([ce([])]);Ae(o.add(ce([]))!==o),Ae(n.add(5)===n),Ae(n.add(6)!==n),Ae(n.remove(5)!==n)}),De("equal",function(){Ae(!c(t,n)),Ae(c(t,t)),Ae(c(n,n)),Ae(c(ce(),ce())),Ae(c(ce([1]),ce([1]))),Ae(c(ce([ce([1])]),ce([ce([1])]))),Ae(!c(ce([ce([1])]),ce([ce([2])]))),Ae(c(ae(On,[1,2,3]),ae(On,[1,2,3]))),Ae(!c(ae(On,[1,2,3]),ae(ke,[1,2,3]))),Ae(!c(ae(On,[1,2,3]),ce([1,2,3])))}),De("toJS",function(){Ae(Ce(Qn(t),[])),Ae(Ce(Qn(n),[1,2,3,4,5])),Ae(Ce(Qn(ce([1,2,ce([3])])),[[3],1,2]))}),De("toJSON",function(){_e(t,[]),_e(n,[1,2,3,4,5]),_e(ce([4,5,ce([1,2,3])]),[[1,2,3],4,5]),ze(function(){P(ae(On,[]))},"Cannot convert SortedSet to JSON")}),De("random elements",function(){function t(t,n,e){for(var o=0,r=t.length;r>o;++o)if(e(i(n),i(t[o]))<=0)return void t.splice(o,0,n);t.push(n)}function n(t,n){var e=t.indexOf(n);Ae(-1!==e),t.splice(e,1)}var e=ce(),o=[],r=e.sort,i=e.hash_fn;Le(e,o),He(200).forEach(function(n){e=e.add(n),t(o,n,r),Le(e,o)}),He(200).forEach(function(t){e=e.remove(t),n(o,t),Le(e,o)}),Le(e,[])}),De("each",function(){Ne(ce,[]);var t=ce([4]);Ne(ce,[t,1,2,3])}),De("toString",function(){Ae(""+ce([0,-0])=="(Set\n  0)"),Ae(""+ce()=="(Set)"),Ae(""+ae(On)=="(SortedSet (Mutable 4))"),Ae(""+ce([1,2,3,4,5])=="(Set\n  1\n  2\n  3\n  4\n  5)"),Ae(""+ae(On,[1,2,3,4,5])=="(SortedSet (Mutable 4)\n  1\n  2\n  3\n  4\n  5)"),Ae(""+ce([ce([1,2,3])])=="(Set\n  (Set\n    1\n    2\n    3))"),Ae(""+ce([{}])=="(Set\n  (Mutable 10))"),Ae(""+ce([{}])=="(Set\n  (Mutable 11))")})}),Ie("List",function(){var t=Sn(),n=Sn().insert(1).insert(2).insert(3).insert(4).insert(5);De("isList",function(){Ae(!En(Ln())),Ae(En(Sn()))}),De("verify",function(){Ke(t,[]),Ke(n,[1,2,3,4,5])}),De("init",function(){Ke(Sn([1,2,3]),[1,2,3])}),De("isEmpty",function(){Ae(t.isEmpty()),Ae(!n.isEmpty())}),De("size",function(){Ae(0===t.size()),Ae(5===n.size())}),De("has",function(){Ae(!t.has(0)),Ae(!t.has(-1)),Ae(n.has(0)),Ae(n.has(4)),Ae(n.has(-1)),Ae(n.has(-5)),Ae(!n.has(5)),Ae(!n.has(-6))}),De("get",function(){Ae(50===t.get(0,50)),Ae(50===t.get(-1,50)),ze(function(){t.get(0)},"Index 0 is not valid"),ze(function(){t.get(-1)},"Index -1 is not valid"),Ae(50===t.get(0,50)),Ae(1===n.get(0,50)),Ae(5===n.get(4,50)),Ae(5===n.get(-1,50)),Ae(4===n.get(-2,50))}),De("set",function(){ze(function(){t.set(0,50)},"Index 0 is not valid"),ze(function(){t.set(-1,50)},"Index -1 is not valid"),Ke(n.set(0,50),[50,2,3,4,5]),Ke(n.set(4,50),[1,2,3,4,50]),Ke(n.set(-1,50),[1,2,3,4,50]),Ke(n.set(-2,50),[1,2,3,50,5])}),De("insert",function(){ze(function(){t.insert(5,1)},"Index 1 is not valid"),ze(function(){t.insert(5,-2)},"Index -1 is not valid");var e=t.insert(10);Ke(t,[]),Ke(e,[10]),Ae(0===t.size()),Ae(1===e.size()),Ae(10===e.get(0)),Ae(10===e.get(-1)),Ke(n.insert(10),[1,2,3,4,5,10]),Ke(n.insert(10).insert(20),[1,2,3,4,5,10,20]),Ke(n.insert(10,0),[10,1,2,3,4,5]),Ke(n.insert(10,1),[1,10,2,3,4,5]),Ke(n.insert(10,-1),[1,2,3,4,5,10]),Ke(n.insert(10,-2),[1,2,3,4,10,5]),Ke(n,[1,2,3,4,5]),Ke(Sn().insert(5,0).insert(4,0).insert(3,0).insert(2,0).insert(1,0),[1,2,3,4,5])}),De("remove",function(){ze(function(){t.remove()},"Index -1 is not valid"),ze(function(){t.remove(0)},"Index 0 is not valid"),ze(function(){t.remove(-1)},"Index -1 is not valid"),Ke(n.remove(),[1,2,3,4]),Ke(n.remove().remove(),[1,2,3]),Ke(n.remove(-1),[1,2,3,4]),Ke(n.remove(-2),[1,2,3,5]),Ke(n.remove(0),[2,3,4,5]),Ke(n.remove(1),[1,3,4,5])}),De("removeAll",function(){Ke(t.removeAll(),[]),Ke(n.removeAll(),[])}),De("modify",function(){var e=!1;ze(function(){t.modify(0,function(){e=!0})},"Index 0 is not valid"),ze(function(){t.modify(-1,function(){e=!0})},"Index -1 is not valid"),Ae(e===!1);var e=!1;Ke(n.modify(0,function(t){return e=!0,Ae(1===t),t+100}),[101,2,3,4,5]),Ae(e===!0),Ke(n.modify(-1,function(t){return t+100}),[1,2,3,4,105]),Ke(n.modify(1,function(t){return t+100}),[1,102,3,4,5]),Ke(n.modify(-2,function(t){return t+100}),[1,2,3,104,5])}),De("slice",function(){Ke(t.slice(0,0),[]),Ke(n.slice(0,0),[]),Ke(n.slice(0,2),[1,2]),Ke(n.slice(2,3),[3]),Ke(n.slice(3,5),[4,5]),Ke(n.slice(0,5),[1,2,3,4,5]),Ke(t.slice(),[]),ze(function(){n.slice(5,1)},"Index 5 is greater than index 1"),ze(function(){n.slice(6,7)},"Index 6 is not valid"),ze(function(){n.slice(0,6)},"Index 6 is not valid"),ze(function(){n.slice(10,10)},"Index 10 is not valid"),Ke(n.slice(null,5),[1,2,3,4,5]),Ke(n.slice(0,null),[1,2,3,4,5]),Ke(n.slice(null,null),[1,2,3,4,5]),Ke(n.slice(),[1,2,3,4,5]),Ke(n.slice(0),[1,2,3,4,5]),Ke(n.slice(-1),[5]),Ke(n.slice(-3),[3,4,5]),Ke(n.slice(-3,4),[3,4]),Ke(n.slice(0,-1),[1,2,3,4]),Ke(n.slice(-2,-1),[4]),Ke(n.slice(-4,-1),[2,3,4]),Ke(n.slice(-4,4),[2,3,4]);for(var e=Sn(),o=[],r=250,i=0;r>i;++i)e=e.insert(i),o.push(i);Ke(e.slice(0,124),o.slice(0,124)),Ke(e.slice(0,125),o.slice(0,125)),Ke(e.slice(0,126),o.slice(0,126)),Ke(e.slice(124,250),o.slice(124,250)),Ke(e.slice(125,250),o.slice(125,250)),Ke(e.slice(126,250),o.slice(126,250)),Ke(e.slice(124,125),o.slice(124,125)),Ke(e.slice(125,126),o.slice(125,126)),Ke(e.slice(0,250),o.slice(0,250));for(var u=Sn(),f=[],r=125e3,i=0;r>i;++i)u=u.insert(i),f.push(i);Ke(u.slice(0,125),f.slice(0,125)),Ke(u.slice(0,126),f.slice(0,126)),Ke(u.slice(125,250),f.slice(125,250)),Ke(u.slice(50,125),f.slice(50,125)),Ke(u.slice(50,126),f.slice(50,126)),Ke(u.slice(50,2546),f.slice(50,2546)),Ke(u.slice(0,r),f.slice(0,r)),Ke(u.slice(0,r-1),f.slice(0,r-1)),Ke(u.slice(1,r),f.slice(1,r)),Ke(u.slice(1,r-1),f.slice(1,r-1)),Ke(u.slice(50,60),f.slice(50,60)),Ke(u.slice(50,125),f.slice(50,125)),Ke(u.slice(50,126),f.slice(50,126)),Ke(u.slice(125,126),f.slice(125,126)),Ke(u.slice(124,126),f.slice(124,126)),Ke(u.slice(Math.ceil(r/2)),f.slice(Math.ceil(r/2)))}),De("concat",function(){Ke(t.concat(t),[]),Ke(n.concat(n),[1,2,3,4,5,1,2,3,4,5]),Ke(Sn([10,20,30]).concat(n),[10,20,30,1,2,3,4,5]),Ke(n.concat(Sn([10,20,30])),[1,2,3,4,5,10,20,30]),Ke(n.concat([10,20,30]),[1,2,3,4,5,10,20,30])}),De("=== when not modified",function(){Ae(Sn(n)===n),Ae(t.concat(t)===t),Ae(n.concat(t)===n),Ae(t.concat(n)===n),Ae(t.slice()===t),Ae(n.slice()===n),Ae(n.slice(0,5)===n),Ae(n.slice(1,5)!==n),Ae(n.slice(0,4)!==n),Ae(n.set(0,1)===n),Ae(n.set(0,2)!==n);var e=Sn([Sn([])]);Ae(e.modify(0,function(){return Sn([])})!==e),Ae(n.modify(0,function(){return 1})===n),Ae(n.modify(0,function(){return 2})!==n),Ae(n.modify(1,function(){return 2})===n),Ae(n.modify(1,function(){return 3})!==n),Ae(n.modify(-1,function(){return 5})===n),Ae(n.modify(-1,function(){return 6})!==n)}),De("equal",function(){Ae(c(t,t)),Ae(c(n,n)),Ae(c(Sn([1,2,3]),Sn([1,2,3]))),Ae(!c(Sn([1,2,3]),Sn([1,2,3,4]))),Ae(!c(Sn([1,2,3]),Sn([1,2,4]))),Ae(!c(Sn([1,2,3]),Sn([1,3,2]))),Ae(c(Sn([1,2,3,4,5]),n)),Ae(c(n,Sn([1,2,3,4,5]))),Ae(c(Sn([Sn([1,2,3])]),Sn([Sn([1,2,3])])))}),De("toJS",function(){Ae(Ce(Qn(t),[])),Ae(Ce(Qn(n),[1,2,3,4,5])),Ae(Ce(Qn(Sn([1,2,Sn([3])])),[1,2,[3]]))}),De("toJSON",function(){_e(t,[]),_e(n,[1,2,3,4,5]),_e(Sn([4,5,Sn([1,2,3])]),[4,5,[1,2,3]])}),De("random elements",function(){function t(t){var n=[],o=[],r=Sn(),i=Sn();e.slice(0,t).forEach(function(t){var e=Ge(r.size());r=r.insert(t,e),n.splice(e,0,t),Ke(r,n)}),e.slice(t).forEach(function(t){var n=Ge(i.size());i=i.insert(t,n),o.splice(n,0,t),Ke(i,o)}),Ke(r.concat(i),n.concat(o)),Ke(i.concat(r),o.concat(n))}var n=Sn(),e=[];for(Ke(n,e),He(200).forEach(function(t){var o=Ge(n.size());n=n.insert(t,o),e.splice(o,0,t),Ke(n,e)}),He(200).forEach(function(t){n=n.modify(t,function(t){return t+15}),e[t]=e[t]+15,Ke(n,e)});n.size();){var o=Ge(n.size());n=n.remove(o),e.splice(o,1),Ke(n,e)}Ae(n.isEmpty()),Ke(n,[]);var e=He(200),r=Ge(200);t(0),t(5),t(r),t(194),t(199)}),De("each",function(){Ne(Sn,[]);var t=Sn([4]);Ne(Sn,[1,2,3,t]);var n=He(200);Ne(Sn,n)}),De("toString",function(){Ae(""+t=="(List)"),Ae(""+Sn([1,2,3])=="(List\n  1\n  2\n  3)"),Ae(""+Sn([1,Sn([2]),3])=="(List\n  1\n  (List\n    2)\n  3)")})}),Ie("Tuple",function(){var t=Zn(),n=Zn([1,2,3,4,5]);De("isTuple",function(){Ae(!Gn(Sn())),Ae(Gn(Zn()))}),De("verify",function(){Qe(t,[]),Qe(n,[1,2,3,4,5])}),De("init",function(){Qe(Zn([1,2,3]),[1,2,3])}),De("size",function(){Ae(0===t.size()),Ae(5===n.size())}),De("get",function(){ze(function(){t.get(0)},"Index 0 is not valid"),ze(function(){t.get(-1)},"Index -1 is not valid"),Ae(1===n.get(0)),Ae(5===n.get(4)),ze(function(){n.get(-1)},"Index -1 is not valid"),ze(function(){n.get(-2)},"Index -2 is not valid")}),De("set",function(){Qe(n.set(0,50),[50,2,3,4,5]),Qe(n.set(4,50),[1,2,3,4,50]),ze(function(){t.set(0,50)},"Index 0 is not valid"),ze(function(){t.set(-1,50)},"Index -1 is not valid"),ze(function(){n.set(-1,50)},"Index -1 is not valid"),ze(function(){n.set(-2,50)},"Index -2 is not valid")}),De("modify",function(){var e=!1;ze(function(){t.modify(0,function(){e=!0})},"Index 0 is not valid"),ze(function(){t.modify(-1,function(){e=!0})},"Index -1 is not valid"),Ae(e===!1);var e=!1;Qe(n.modify(0,function(t){return e=!0,Ae(1===t),t+100}),[101,2,3,4,5]),Ae(e===!0),Qe(n.modify(1,function(t){return t+100}),[1,102,3,4,5]),ze(function(){n.modify(-1,function(t){return t+100})},"Index -1 is not valid"),ze(function(){n.modify(-2,function(t){return t+100})},"Index -2 is not valid")}),De("=== when not modified",function(){Ae(Zn(n)===n);var t=Zn([Zn([])]);Ae(n.set(0,1)===n),Ae(n.set(0,2)!==n),Ae(t.modify(0,function(){return Zn([])})!==t),Ae(n.modify(0,function(){return 1})===n),Ae(n.modify(0,function(){return 2})!==n),Ae(n.modify(1,function(){return 2})===n),Ae(n.modify(1,function(){return 3})!==n),Ae(n.modify(4,function(){return 5})===n),Ae(n.modify(4,function(){return 6})!==n)}),De("equal",function(){Ae(c(t,t)),Ae(c(n,n)),Ae(c(Zn([1,2,3]),Zn([1,2,3]))),Ae(!c(Zn([1,2,3]),Zn([1,2,3,4]))),Ae(!c(Zn([1,2,3]),Zn([1,2,4]))),Ae(!c(Zn([1,2,3]),Zn([1,3,2]))),Ae(c(Zn([1,2,3,4,5]),n)),Ae(c(n,Zn([1,2,3,4,5]))),Ae(c(Zn([Zn([1,2,3])]),Zn([Zn([1,2,3])])))}),De("toJS",function(){Ae(Ce(Qn(t),[])),Ae(Ce(Qn(n),[1,2,3,4,5])),Ae(Ce(Qn(Zn([1,2,Zn([3])])),[1,2,[3]]))}),De("toJSON",function(){_e(t,[]),_e(n,[1,2,3,4,5]),_e(Zn([4,5,Zn([1,2,3])]),[4,5,[1,2,3]])}),De("each",function(){Ne(Zn,[]);var t=Zn([4]);Ne(Zn,[1,2,3,t]);var n=He(200);Ne(Zn,n)}),De("toString",function(){Ae(""+t=="(Tuple)"),Ae(""+Zn([1,2,3])=="(Tuple\n  1\n  2\n  3)"),Ae(""+Zn([1,Zn([2]),3])=="(Tuple\n  1\n  (Tuple\n    2)\n  3)")})}),Ie("Queue",function(){var t=he(),n=he().push(1).push(2).push(3).push(4).push(5);De("isQueue",function(){Ae(!le(Sn())),Ae(le(he()))}),De("verify",function(){Fe(t,[]),Fe(n,[1,2,3,4,5])}),De("init",function(){Fe(he([1,2,3]),[1,2,3])}),De("isEmpty",function(){Ae(t.isEmpty()),Ae(!n.isEmpty())}),De("size",function(){Ae(0===t.size()),Ae(5===n.size())}),De("peek",function(){ze(function(){t.peek()},"Cannot peek from an empty queue"),Ae(50===t.peek(50)),Ae(1===n.peek()),Ae(1===n.peek(50))}),De("push",function(){var e=t.push(10);Fe(t,[]),Fe(e,[10]),Ae(0===t.size()),Ae(1===e.size()),Ae(10===e.peek()),Fe(n.push(10),[1,2,3,4,5,10]),Fe(n.push(10).push(20),[1,2,3,4,5,10,20]),Fe(n,[1,2,3,4,5]),Fe(he().push(5).push(4).push(3).push(2).push(1),[5,4,3,2,1])}),De("removeAll",function(){Fe(t.removeAll(),[]),Fe(n.removeAll(),[])}),De("pop",function(){ze(function(){t.pop()},"Cannot pop from an empty queue"),Fe(n.pop(),[2,3,4,5]),Fe(n.pop().pop(),[3,4,5]),Fe(he(),[]),Fe(he().push(5).push(10).push(20).push(30),[5,10,20,30]),Fe(he().push(5).push(10).push(20).push(30).pop(),[10,20,30])}),De("concat",function(){Fe(t.concat(t),[]),Fe(n.concat(n),[1,2,3,4,5,1,2,3,4,5]),Fe(he([10,20,30]).concat(n),[10,20,30,1,2,3,4,5]),Fe(n.concat(he([10,20,30])),[1,2,3,4,5,10,20,30]),Fe(n.concat([10,20,30]),[1,2,3,4,5,10,20,30])}),De("=== when not modified",function(){Ae(he(n)===n),Ae(t.concat(t)===t),Ae(n.concat(t)===n),Ae(t.concat(n)!==n)}),De("equal",function(){Ae(c(t,t)),Ae(c(n,n)),Ae(c(he([1,2,3]),he([1,2,3]))),Ae(!c(he([1,2,3]),he([1,2,4]))),Ae(!c(he([1,2,3]),he([1,3,2]))),Ae(c(he([1,2,3,4,5]),n)),Ae(c(n,he([1,2,3,4,5]))),Ae(c(he([he([1,2,3])]),he([he([1,2,3])])))}),De("toJS",function(){Ae(Ce(Qn(t),[])),Ae(Ce(Qn(n),[1,2,3,4,5])),Ae(Ce(Qn(he([1,2,he([3])])),[1,2,[3]]))}),De("toJSON",function(){_e(t,[]),_e(n,[1,2,3,4,5]),_e(he([4,5,he([1,2,3])]),[4,5,[1,2,3]])}),De("each",function(){Ne(he,[]);var t=he([3]);Ne(he,[1,2,t,4])}),De("toString",function(){Ae(""+t=="(Queue)"),Ae(""+he([1,2,3])=="(Queue\n  1\n  2\n  3)"),Ae(""+he([1,he([2]),3])=="(Queue\n  1\n  (Queue\n    2)\n  3)")})}),Ie("Stack",function(){var t=pe(),n=pe().push(1).push(2).push(3).push(4).push(5);De("isStack",function(){Ae(!de(he())),Ae(de(pe()))}),De("verify",function(){Pe(t,[]),Pe(n,[1,2,3,4,5])}),De("init",function(){Pe(pe([1,2,3]),[1,2,3])}),De("isEmpty",function(){Ae(t.isEmpty()),Ae(!n.isEmpty())}),De("size",function(){Ae(0===t.size()),Ae(5===n.size())}),De("peek",function(){ze(function(){t.peek()},"Cannot peek from an empty stack"),Ae(50===t.peek(50)),Ae(5===n.peek()),Ae(5===n.peek(50))}),De("push",function(){var e=t.push(10);Pe(t,[]),Pe(e,[10]),Ae(0===t.size()),Ae(1===e.size()),Ae(10===e.peek()),Pe(n.push(10),[1,2,3,4,5,10]),Pe(n.push(10).push(20),[1,2,3,4,5,10,20]),Pe(n,[1,2,3,4,5]),Pe(pe().push(5).push(4).push(3).push(2).push(1),[5,4,3,2,1])}),De("pop",function(){ze(function(){t.pop()},"Cannot pop from an empty stack"),Pe(n.pop(),[1,2,3,4]),Pe(n.pop().pop(),[1,2,3])}),De("removeAll",function(){Pe(t.removeAll(),[]),Pe(n.removeAll(),[])}),De("concat",function(){Pe(t.concat(t),[]),Pe(n.concat(n),[1,2,3,4,5,1,2,3,4,5]),Pe(pe([10,20,30]).concat(n),[10,20,30,1,2,3,4,5]),Pe(n.concat(pe([10,20,30])),[1,2,3,4,5,10,20,30]),Pe(n.concat([10,20,30]),[1,2,3,4,5,10,20,30])}),De("=== when not modified",function(){Ae(pe(n)===n),Ae(t.concat(t)===t),Ae(n.concat(t)===n),Ae(t.concat(n)!==n)}),De("equal",function(){Ae(c(t,t)),Ae(c(n,n)),Ae(c(pe([1,2,3]),pe([1,2,3]))),Ae(!c(pe([1,2,3]),pe([1,2,4]))),Ae(!c(pe([1,2,3]),pe([1,3,2]))),Ae(c(pe([1,2,3,4,5]),n)),Ae(c(n,pe([1,2,3,4,5]))),Ae(c(pe([pe([1,2,3])]),pe([pe([1,2,3])])))}),De("toJS",function(){Ae(Ce(Qn(t),[])),Ae(Ce(Qn(n),[1,2,3,4,5])),Ae(Ce(Qn(pe([1,2,pe([3])])),[1,2,[3]]))}),De("toJSON",function(){_e(t,[]),_e(n,[1,2,3,4,5]),_e(pe([4,5,pe([1,2,3])]),[4,5,[1,2,3]])}),De("each",function(){Ne(pe,[]);var t=pe([3]);Ne(pe,[1,2,t,4])}),De("toString",function(){Ae(""+t=="(Stack)"),Ae(""+pe([1,2,3])=="(Stack\n  1\n  2\n  3)"),Ae(""+pe([1,pe([2]),3])=="(Stack\n  1\n  (Stack\n    2)\n  3)")})}),Ie("Record",function(){var t=me({}),n=me({foo:1});De("isRecord",function(){Ae(!be(Ln())),Ae(be(t)),Ae(be(n))}),De("verify",function(){$e(t,{}),$e(n,{foo:1})}),De("toString",function(){Ae(""+t=="(Record)"),Ae(""+n=='(Record\n  "foo" = 1)'),Ae(""+me({foo:2})=='(Record\n  "foo" = 2)'),Ae(""+me({foo:1})=='(Record\n  "foo" = 1)'),Ae(""+me({foo:1,bar:2})=='(Record\n  "bar" = 2\n  "foo" = 1)'),Ae(""+me({"foo\nbar\nqux":1,bar:2})=='(Record\n  "bar" = 2\n  "foo\n   bar\n   qux" = 1)'),Ae(""+me({foo:me({qux:3}),bar:2})=='(Record\n  "bar" = 2\n  "foo" = (Record\n            "qux" = 3))'),Ae(""+me({"foo\nbar\nqux":me({qux:3}),bar:2})=='(Record\n  "bar" = 2\n  "foo\n   bar\n   qux" = (Record\n            "qux" = 3))'),Ae(""+me({foobarquxcorgenou:1,bar:2})=='(Record\n  "bar"               = 2\n  "foobarquxcorgenou" = 1)'),Ae(""+me({"foobar\nquxcorgenou":1,bar:2})=='(Record\n  "bar"         = 2\n  "foobar\n   quxcorgenou" = 1)'),Ae(""+me({"foo\nbar\nqux":1,barquxcorgenou:2})=='(Record\n  "barquxcorgenou" = 2\n  "foo\n   bar\n   qux"            = 1)')}),De("init",function(){var t=me({foo:1});$e(t,{foo:1}),Ae(c(t,n)),Ae(c(n,t)),ze(function(){me(Object.create(null))},"Cannot convert object to primitive value"),$e(me({foo:2}),{foo:2}),$e(me(),{}),$e(me([["foo",2]]),{foo:2}),$e(me([["foo",2],["foo",3]]),{foo:3}),$e(me([["bar",1],["foo",2],["qux",4],["foo",3],["corge",5]]),{bar:1,foo:3,qux:4,corge:5});var t=N(me([["bar",1],["foo",2],["qux",4],["foo",3],["corge",5]]),function(t){return Ae(Gn(t)),A(t)});Ae(Ce(A(t),[["bar",1],["corge",5],["foo",3],["qux",4]])),$e(me([Zn(["foo",2])]),{foo:2}),ze(function(){me([Sn(["foo",2])])},'Expected array or Tuple but got: (List\n  "foo"\n  2)'),ze(function(){me([{}])},"Expected array or Tuple but got: [object Object]"),ze(function(){me([[]])},"Expected array with 2 elements but got 0 elements"),ze(function(){me([["foo"]])},"Expected array with 2 elements but got 1 element"),ze(function(){me([["foo",2,3]])},"Expected array with 2 elements but got 3 elements"),ze(function(){me([Zn([])])},"Expected Tuple with 2 elements but got 0 elements"),ze(function(){me([Zn(["foo"])])},"Expected Tuple with 2 elements but got 1 element"),ze(function(){me([Zn(["foo",2,3])])},"Expected Tuple with 2 elements but got 3 elements")}),De("get",function(){ze(function(){t.get("foo")},"Key foo not found"),Ae(1===n.get("foo"))}),De("set",function(){ze(function(){t.set("bar",2)},"Key bar not found");var e=n,o=e.set("foo",3);Ae(1===e.get("foo")),Ae(3===o.get("foo"))}),De("modify",function(){var e=!1;ze(function(){t.modify("foo",function(t){return e=!0,t+1})},"Key foo not found"),Ae(e===!1);var e=!1,o=n,r=o.modify("foo",function(t){return e=!0,Ae(1===t),t+5});Ae(e===!0),Ae(1===o.get("foo")),Ae(6===r.get("foo"))}),De("update",function(){$e(me({foo:1}),{foo:1}),$e(me({foo:1}).update(me({foo:2})),{foo:2}),$e(me({foo:1}).update([["foo",3]]),{foo:3}),$e(me({foo:1}).update({foo:3}),{foo:3}),ze(function(){me({foo:1}).update(me({foo:2,bar:3}))},"Key bar not found"),$e(me([["foo",2]]).update([["foo",3]]),{foo:3}),$e(me([["foo",2]]).update([Zn(["foo",3])]),{foo:3}),ze(function(){me().update(Object.create(null))},"Cannot convert object to primitive value"),ze(function(){me([["foo",2]]).update([Sn(["foo",3])])},'Expected array or Tuple but got: (List\n  "foo"\n  3)'),ze(function(){me([["foo",2]]).update([{}])},"Expected array or Tuple but got: [object Object]"),ze(function(){me([["foo",2]]).update([[]])},"Expected array with 2 elements but got 0 elements"),ze(function(){me([["foo",2]]).update([["foo"]])},"Expected array with 2 elements but got 1 element"),ze(function(){me([["foo",2]]).update([["foo",2,3]])},"Expected array with 2 elements but got 3 elements"),ze(function(){me([["foo",2]]).update([Zn([])])},"Expected Tuple with 2 elements but got 0 elements"),ze(function(){me([["foo",2]]).update([Zn(["foo"])])},"Expected Tuple with 2 elements but got 1 element"),ze(function(){me([["foo",2]]).update([Zn(["foo",2,3])])},"Expected Tuple with 2 elements but got 3 elements")}),De("complex keys",function(){var t=Ln().set({},1);ze(function(){me(t)},"Expected key to be a string or Tag but got [object Object]"),ze(function(){me([[{},1]])},"Expected key to be a string or Tag but got [object Object]"),ze(function(){n.get({})},"Expected key to be a string or Tag but got [object Object]"),ze(function(){n.set({},5)},"Expected key to be a string or Tag but got [object Object]"),ze(function(){n.modify({},function(){throw Error("FAIL")})},"Expected key to be a string or Tag but got [object Object]")}),De("=== when not modified",function(){var t=n;Ae(t.set("foo",1)===t),Ae(t.set("foo",2)!==t),Ae(t.modify("foo",function(){return 1})===t),Ae(t.modify("foo",function(){return 2})!==t);var t=me({foo:1});Ae(me(t)===t),Ae(me({foo:1})!==t),Ae(t.update([])===t),Ae(t.update([["foo",1]])===t),Ae(t.update([["foo",2]])!==t)}),De("equal",function(){Ae(!c(t,n)),Ae(c(t,t)),Ae(c(n,n)),Ae(c(me({}),me({}))),Ae(c(me({foo:1}),me({foo:1}))),Ae(!c(n,me({foo:2}))),Ae(c(n,me({foo:1}))),Ae(c(me({foo:2}),me({foo:2}))),Ae(!c(me({foo:2}),me({foo:3}))),Ae(c(me([["foo",1],["bar",2]]),me([["bar",2],["foo",1]])))}),De("toJS",function(){Ae(Ce(Qn(t),{})),Ae(Ce(Qn(n),{foo:1})),Ae(Ce(Qn(me({foo:me({bar:2})})),{foo:{bar:2}}))}),De("toJSON",function(){_e(t,{}),_e(n,{foo:1}),_e(me({foo:me({bar:2})}),{foo:{bar:2}})}),De("each",function(){qe(me([]),[]),qe(me([["foo",2]]),[["foo",2]]),qe(me([["foo",2],["bar",3]]),[["bar",3],["foo",2]]),qe(me([["bar",3],["foo",2]]),[["bar",3],["foo",2]]),qe(me([["2",1],["1",2]]),[["1",2],["2",1]]);var t=me({corge:3});qe(me([["foo",1],["qux",t],["bar",2]]),[["bar",2],["foo",1],["qux",t]])})}),Ie("Ref",function(){var t=Se(1),n=Se(2);De("isRef",function(){Ae(!Ee(Ln())),Ae(Ee(t)),Ae(Ee(n))}),De("toString",function(){Ae(""+t=="(Ref 1)"),Ae(""+n=="(Ref 2)"),Ae(""+Se(50)=="(Ref 3)"),Ae(""+Se([100])=="(Ref 4)")}),De("init",function(){ze(function(){Se()},"Expected 1 to 2 arguments but got 0"),ze(function(){Se(1,2,3)},"Expected 1 to 2 arguments but got 3")}),De("get",function(){Ae(1===t.get()),Ae(2===n.get())}),De("set",function(){Ae(1===t.get()),t.set(50),Ae(50===t.get());var n=!1,e=Se(5,function(t,e){Ae(5===t),Ae(10===e),n=!0});e.set(10),Ae(10===e.get()),Ae(n===!0);var n=!1,e=Se(5,function(){n=!0});e.set(5),Ae(5===e.get()),Ae(n===!1)}),De("modify",function(){var t=!1,n=!1,e=Se(5,function(n,e){Ae(5===n),Ae(10===e),t=!0});e.modify(function(t){return Ae(5===t),n=!0,10}),Ae(10===e.get()),Ae(t===!0),Ae(n===!0);var t=!1,n=!1,e=Se(5,function(){t=!0});e.modify(function(t){return Ae(5===t),n=!0,5}),Ae(5===e.get()),Ae(t===!1),Ae(n===!0)}),De("equal",function(){Ae(!c(t,n)),Ae(c(t,t)),Ae(c(n,n)),Ae(!c(Se(1),Se(1))),Ae(!c(t,Se(1)))})}),Ie("Tag",function(){var t=o(),i=o(),u=r("dc353abd-d920-4c17-b911-55bd1c78c06f"),f=r("2a95bab0-ae96-4f07-b7a5-227fe3d394d4");De("isTag",function(){Ae(!n("foo")),Ae(!n(Ln())),Ae(n(t)),Ae(n(i)),Ae(n(u)),Ae(n(f)),Ae(!e("foo")),Ae(!e(Ln())),Ae(!e(t)),Ae(!e(i)),Ae(e(u)),Ae(e(f))}),De("toString",function(){Ae(""+t=="(Tag 48de6fff-9d11-472d-a76f-ed77a59a5cbc 1)"),Ae(""+i=="(Tag 48de6fff-9d11-472d-a76f-ed77a59a5cbc 2)"),Ae(""+o()=="(Tag 48de6fff-9d11-472d-a76f-ed77a59a5cbc 3)"),Ae(""+u=="(UUIDTag dc353abd-d920-4c17-b911-55bd1c78c06f)"),Ae(""+f=="(UUIDTag 2a95bab0-ae96-4f07-b7a5-227fe3d394d4)"),Ae(""+r("2a95bab0-ae96-4f07-b7a5-227fe3d394d4")=="(UUIDTag 2a95bab0-ae96-4f07-b7a5-227fe3d394d4)")}),De("init",function(){ze(function(){o(1)},"Expected 0 arguments but got 1"),ze(function(){o(1,2)},"Expected 0 arguments but got 2"),ze(function(){r()},"Expected 1 argument but got 0"),ze(function(){r(1,2)},"Expected 1 argument but got 2"),ze(function(){r("foo")},"Expected a lower-case UUID, but got: foo")}),De("equal",function(){Ae(!c(t,i)),Ae(!c(t,u)),Ae(c(t,t)),Ae(c(i,i)),Ae(!c(u,f)),Ae(c(u,u)),Ae(c(f,f)),Ae(c(f,r("2a95bab0-ae96-4f07-b7a5-227fe3d394d4"))),Ae(!c(o(),o())),Ae(!c(t,o()))}),De("===",function(){Ae(t!==i),Ae(t!==u),Ae(t===t),Ae(i===i),Ae(u!==f),Ae(u===u),Ae(f===f),Ae(f===r("2a95bab0-ae96-4f07-b7a5-227fe3d394d4")),Ae(o()!==o()),Ae(t!==o())}),De("Dict",function(){var n=Ln();n=n.set(t,1),n=n.set(i,2),n=n.set(u,3),n=n.set(f,4),Ae(1===n.get(t)),Ae(2===n.get(i)),Ae(3===n.get(u)),Ae(4===n.get(f)),Ae(""+n=="(Dict\n  (Tag 48de6fff-9d11-472d-a76f-ed77a59a5cbc 1)   = 1\n  (Tag 48de6fff-9d11-472d-a76f-ed77a59a5cbc 2)   = 2\n  (UUIDTag 2a95bab0-ae96-4f07-b7a5-227fe3d394d4) = 4\n  (UUIDTag dc353abd-d920-4c17-b911-55bd1c78c06f) = 3)"),Ae(Ce(Qn(n),{"(Tag 48de6fff-9d11-472d-a76f-ed77a59a5cbc 1)":1,"(Tag 48de6fff-9d11-472d-a76f-ed77a59a5cbc 2)":2,"(UUIDTag 2a95bab0-ae96-4f07-b7a5-227fe3d394d4)":4,"(UUIDTag dc353abd-d920-4c17-b911-55bd1c78c06f)":3}))}),De("Record",function(){var n=me([[t,1],[i,2],[u,3],[f,4]]);Ae(1===n.get(t)),Ae(2===n.get(i)),Ae(3===n.get(u)),Ae(4===n.get(f)),Ae(""+n=="(Record\n  (Tag 48de6fff-9d11-472d-a76f-ed77a59a5cbc 1)   = 1\n  (Tag 48de6fff-9d11-472d-a76f-ed77a59a5cbc 2)   = 2\n  (UUIDTag 2a95bab0-ae96-4f07-b7a5-227fe3d394d4) = 4\n  (UUIDTag dc353abd-d920-4c17-b911-55bd1c78c06f) = 3)"),Ae(Ce(Qn(n),{"(Tag 48de6fff-9d11-472d-a76f-ed77a59a5cbc 1)":1,"(Tag 48de6fff-9d11-472d-a76f-ed77a59a5cbc 2)":2,"(UUIDTag dc353abd-d920-4c17-b911-55bd1c78c06f)":3,"(UUIDTag 2a95bab0-ae96-4f07-b7a5-227fe3d394d4)":4}))}),De("toJS",function(){Ae(Qn(t)===t),Ae(Qn(u)===u),Ae(Kn(t)===t),Ae(Kn(u)===u)}),De("toJSON",function(){ze(function(){P(t)},"Cannot convert Tag to JSON, use UUIDTag instead: (Tag 48de6fff-9d11-472d-a76f-ed77a59a5cbc 1)"),Ae(P(u)===u),ze(function(){F(t)},"Cannot convert Tag from JSON, use UUIDTag instead: (Tag 48de6fff-9d11-472d-a76f-ed77a59a5cbc 1)"),Ae(F(u)===u);var n=Ln([[t,1]]);Ae(Ce(Qn(n),{"(Tag 48de6fff-9d11-472d-a76f-ed77a59a5cbc 1)":1})),ze(function(){P(n)},"Cannot convert Tag to JSON, use UUIDTag instead: (Tag 48de6fff-9d11-472d-a76f-ed77a59a5cbc 1)");var n=Ln([[u,1]]);Ae(Ce(Qn(n),{"(UUIDTag dc353abd-d920-4c17-b911-55bd1c78c06f)":1})),Ae(c(F(P(n)),n))})}),De("isImmutable",function(){Ae(!Oe({})),Ae(!Oe([])),Ae(!Oe(Se(5))),Ae(Oe(null)),Ae(Oe(5)),Ae(Oe("foo")),Ae(Oe(Object.freeze({}))),Ae(Oe(Ln())),Ae(Oe(ce())),Ae(Oe(Sn())),Ae(Oe(he())),Ae(Oe(pe())),Ae(Oe(Mn(On))),Ae(Oe(ae(On))),Ae(Oe(o())),Ae(Oe(Zn())),Ae(Oe(r("051eca86-038c-43c8-85cf-01e20f394501")));var t=me({});Ae(Oe(t))}),De("isIterable",function(){Ae(!l({})),Ae(!l(Se(5))),Ae(!l(5)),Ae(!l(null)),Ae(!l(Object.freeze({}))),Ae(!l(o())),Ae(!l(r("051eca86-038c-43c8-85cf-01e20f394501"))),Ae(l([])),Ae(l("foo")),Ae(l(Ln())),Ae(l(ce())),Ae(l(Sn())),Ae(l(he())),Ae(l(pe())),Ae(l(Mn(On))),Ae(l(ae(On))),Ae(l(Zn()));var t=me({});Ae(l(t))}),De("toJS",function(){function t(){this.bar={}}var n={foo:1};Ae(Qn(n)!==n),Ae(Ce(Qn(n),{foo:1}));var n=Object.create(null);Ae(Qn(n)===n);var n=[5];Ae(Qn(n)!==n),Ae(Ce(Qn(n),[5]));var n=new Date;Ae(Qn(n)===n);var n=/foo/;Ae(Qn(n)===n),Ae("foo"===Qn("foo")),Ae(5===Qn(5));var n=Se(5);Ae(Qn(n)===n);var n=new t;Ae(Qn(n)===n),Ae(Ce(Qn(n),new t));var n={foo:[Zn([ce([1]),2,3]),me({foo:Sn([1]),bar:2})]};
Ae(Qn(n)!==n),Ae(Ce(Qn(n),{foo:[[[1],2,3],{foo:[1],bar:2}]}))}),De("fromJS",function(){function t(){this.bar={}}Me(Kn({foo:1}),{foo:1}),Ke(Kn([1,2,3]),[1,2,3]),Me(Kn({foo:{bar:1}}),{foo:{bar:1}}),Ke(Kn([1,[2],3]),[1,[2],3]),Me(Kn({foo:{bar:1}}).get("foo"),{bar:1}),Ke(Kn([1,[2],3]).get(1),[2]);var n=Object.create(null);Ae(Kn(n)===n);var n=new Date;Ae(Kn(n)===n);var n=/foo/;Ae(Kn(n)===n),Ae("foo"===Kn("foo")),Ae(5===Kn(5));var n=Se(5);Ae(Kn(n)===n);var n=new t;Ae(Kn(n)===n),Ae(Ce(Kn(n),new t))}),De("toJSON",function(){var t={foo:1};Ae(P(t)!==t),Ae(Ce(P(t),{foo:1})),ze(function(){P(Object.create(null))},"Cannot convert object to primitive value");var t=[5];Ae(P(t)!==t),Ae(Ce(P(t),[5])),Ae("foo"===P("foo")),Ae(5===P(5)),Ae(5.5===P(5.5)),Ae(P(!0)===!0),Ae(null===P(null));var t=new Date(2e3,0,1);Ae(P(t)!==t),Ae(Ce(P(t),"2000-01-01T10:00:00.000Z")),ze(function(){P(/foo/)},"Cannot convert to JSON: /foo/"),ze(function(){P(0/0)},"Cannot convert to JSON: NaN"),ze(function(){P(1/0)},"Cannot convert to JSON: Infinity"),ze(function(){P(-1/0)},"Cannot convert to JSON: -Infinity"),ze(function(){P(void 0)},"Cannot convert to JSON: undefined"),ze(function(){function t(){this.foo=1}var n=new t;P(n)},"Cannot convert to JSON: [object Object]"),ze(function(){P(Se(5))},"Cannot convert to JSON: (Ref 16)");var t={};t.toJSON=function(){return"foo"},Ae(P(t)!==t),Ae(Ce(P(t),"foo"));var t={};t.toJSON=function(){return function(){}},ze(function(){P(t)},"Cannot convert to JSON: function (){}");var t={};t.toJSON=5,Ae(P(t)!==t),Ae(Ce(P(t),{toJSON:5}));var t={test:[Zn([1,2,3]),me({foo:1,bar:2})]};Ae(P(t)!==t),Ae(Ce(P(t),{test:[P(Zn([1,2,3])),P(me({foo:1,bar:2}))]})),Ae('{"(UUIDTag 89d8297c-d95e-4ce9-bc9b-6b6f73fa6a37)":"Record","keys":["foo"],"values":[1]}'===JSON.stringify(me({foo:1}))),Ae(Ce(JSON.stringify(me({foo:1})),JSON.stringify(P(me({foo:1})))))}),De("fromJSON",function(){var t={foo:1};Ae(F(t)!==t),Ae(Ce(F(t),{foo:1})),ze(function(){F(Object.create(null))},"Cannot convert object to primitive value");var t=[5];Ae(F(t)!==t),Ae(Ce(F(t),[5])),Ae("foo"===F("foo")),Ae(5===F(5)),Ae(5.5===F(5.5)),Ae(F(!0)===!0),Ae(null===F(null)),ze(function(){F(new Date(2e3,0,1))},"Cannot convert from JSON: Sat Jan 01 2000 00:00:00 GMT-1000 (HST)"),ze(function(){F(/foo/)},"Cannot convert from JSON: /foo/"),ze(function(){F(0/0)},"Cannot convert from JSON: NaN"),ze(function(){F(1/0)},"Cannot convert from JSON: Infinity"),ze(function(){F(-1/0)},"Cannot convert from JSON: -Infinity"),ze(function(){F(void 0)},"Cannot convert from JSON: undefined"),ze(function(){function t(){this.foo=1}var n=new t;F(n)},"Cannot convert from JSON: [object Object]"),ze(function(){F(Se(5))},"Cannot convert from JSON: (Ref 17)");var t=P({test:[Zn([1,2,3]),me({foo:1,bar:2})]});Ae(F(t)!==t),Ae(Ce(F(t),{test:[Zn([1,2,3]),me({foo:1,bar:2})]})),Ae(c(F(t.test[0]),Zn([1,2,3]))),Ae(c(F(t.test[1]),me({foo:1,bar:2})))}),De("deref",function(){Ae(5===we(5));var t=Ln();Ae(we(t)===t),Ae(5===we(Se(5))),Ae(we(Se(t))===t)}),De("each",function(){var t=!1;ze(function(){I(o(),function(){t=!0})},"Cannot iter: (Tag 48de6fff-9d11-472d-a76f-ed77a59a5cbc 12)"),Ae(t===!1);var t=!1;I([],function(){t=!0}),Ae(t===!1);var n=[];I([1,2,3],function(t){n.push(t)}),Ae(Ce(n,[1,2,3]));var n=[];I("foo",function(t){n.push(t)}),Ae(Ce(n,["f","o","o"]));var n=[];I(Zn([1,2,3]),function(t){n.push(t)}),Ae(Ce(n,[1,2,3]));var n=[];I(me([["foo",1],["bar",2]]),function(t){Ae(Gn(t)),n.push(Qn(t))}),Ae(Ce(n,[["bar",2],["foo",1]]))}),De("map",function(){var t=N([],function(t){return t+10});Ae(!Array.isArray(t)),Ae(Ce(A(t),[]));var t=N([1,2,3],function(t){return t+10});Ae(!Array.isArray(t)),Ae(Ce(A(t),[11,12,13]));var t=N(Zn([1,2,3]),function(t){return t+10});Ae(!Array.isArray(t)),Ae(Ce(A(t),[11,12,13]));var t=N(me([["foo",1],["bar",2]]),function(t){return[t.get(0),t.get(1)+10]});Ae(!Array.isArray(t)),Ae(Ce(A(t),[["bar",12],["foo",11]]))}),De("keep",function(){var t=U([],function(t){return t>3});Ae(!Array.isArray(t)),Ae(Ce(A(t),[]));var t=U([1,2,3,4,5],function(t){return t>3});Ae(!Array.isArray(t)),Ae(Ce(A(t),[4,5]))}),De("any",function(){Ae(y([],function(t){return t>3})===!1),Ae(y([1,2,3],function(t){return t>3})===!1),Ae(y([1,2,3,4],function(t){return t>3})===!0)}),De("all",function(){Ae(b([],function(t){return 3>t})===!0),Ae(b([1,2],function(t){return 3>t})===!0),Ae(b([1,2,3],function(t){return 3>t})===!1)}),De("partition",function(){var t=x([],function(t){return 5>t});Ae(Gn(t));var n=t.get(0),e=t.get(1);Ae(!Array.isArray(n)),Ae(!Array.isArray(e)),Ae(Ce(A(n),[])),Ae(Ce(A(e),[]));var t=x([1,2,3,4,5,6,7,8,9,0],function(t){return 5>t});Ae(Gn(t));var n=t.get(0),e=t.get(1);Ae(!Array.isArray(n)),Ae(!Array.isArray(e)),Ae(Ce(A(n),[1,2,3,4,0])),Ae(Ce(A(e),[5,6,7,8,9]));var t=x([1,2,3,4],function(t){return 5>t});Ae(Gn(t));var n=t.get(0),e=t.get(1);Ae(!Array.isArray(n)),Ae(!Array.isArray(e)),Ae(Ce(A(n),[1,2,3,4])),Ae(Ce(A(e),[]));var t=x([5,6,7,8,9],function(t){return 5>t});Ae(Gn(t));var n=t.get(0),e=t.get(1);Ae(!Array.isArray(n)),Ae(!Array.isArray(e)),Ae(Ce(A(n),[])),Ae(Ce(A(e),[5,6,7,8,9]))}),De("toIterator",function(){var t=h([1,2,3]);Ae("function"==typeof t.next),Ae(Ce(t.next(),{value:1})),Ae(Ce(t.next(),{value:2})),Ae(Ce(t.next(),{value:3})),Ae(Ce(t.next(),{done:!0}));var t=h(Sn([1,2,3]));Ae("function"==typeof t.next),Ae(Ce(t.next(),{value:1})),Ae(Ce(t.next(),{value:2})),Ae(Ce(t.next(),{value:3})),Ae(Ce(t.next(),{done:!0}))}),De("Iterable",function(){var t=v(function(){Ae(void 0===this);var t=0;return{next:function(){return 4>t?{value:t++}:{done:!0}}}});Ae(Ce(A(t),[0,1,2,3]));var n=h(t);Ae("function"==typeof n.next),Ae(Ce(n.next(),{value:0})),Ae(Ce(n.next(),{value:1})),Ae(Ce(n.next(),{value:2})),Ae(Ce(n.next(),{value:3})),Ae(Ce(n.next(),{done:!0}))}),De("findIndex",function(){var t=D([1,2,3,4,5],function(t){return t>3});Ae(3===t),ze(function(){D([1,2,3,4,5],function(t){return t>5})},"Did not find anything");var t=D([1,2,3,4,5],function(t){return t>5},500);Ae(500===t)}),De("indexOf",function(){var t=z([1,2,3,4,5],4);Ae(3===t),ze(function(){z([1,2,3,4,5],6)},"Did not find anything");var t=z([1,2,3,4,5],6,500);Ae(500===t);var t=[Zn([1,2,3]),me({foo:1,bar:2})];ze(function(){z(t,Zn([1,2,4]))},"Did not find anything"),Ae(-1===z(t,Zn([1,2,4]),-1)),Ae(0===z(t,Zn([1,2,3])))}),De("find",function(){var t=m([1,2,3,4,5],function(t){return t>3});Ae(4===t),ze(function(){m([1,2,3,4,5],function(t){return t>5})},"Did not find anything");var t=m([1,2,3,4,5],function(t){return t>5},500);Ae(500===t)}),De("reverse",function(){var t=q([]);Ae(!Array.isArray(t)),Ae(Ce(A(t),[]));var t=q([1,2,3]);Ae(!Array.isArray(t)),Ae(Ce(A(t),[3,2,1]));var t=q(Zn([1,2,3]));Ae(!Array.isArray(t)),Ae(Ce(A(t),[3,2,1]));var t=q(N(me([["bar",2],["foo",1]]),function(t){return Ae(Gn(t)),A(t)}));Ae(!Array.isArray(t)),Ae(Ce(A(t),[["foo",1],["bar",2]]))}),De("foldl",function(){var t="0",n=!1,e=S(["1","2","3"],t,function(e,o){return Ae(e===t),Ae("1"===o||"2"===o||"3"===o),n=!0,t="("+e+" "+o+")"});Ae(e===t),Ae("(((0 1) 2) 3)"===e),Ae(n===!0);var t=0,n=!1,e=S([],t,function(){n=!0});Ae(e===t),Ae(n===!1)}),De("foldr",function(){var t="0",n=!1,e=O(["1","2","3"],t,function(e,o){return Ae(o===t),Ae("1"===e||"2"===e||"3"===e),n=!0,t="("+e+" "+o+")"});Ae(e===t),Ae("(1 (2 (3 0)))"===e),Ae(n===!0);var t=0,n=!1,e=O([],t,function(){n=!0});Ae(e===t),Ae(n===!1)}),De("join",function(){Ae(""===T([])),Ae(""===T([]," ")),Ae("123"===T([1,2,3])),Ae("123"===T("123")),Ae("123"===T(Zn([1,2,3]))),Ae("1 2 3"===T([1,2,3]," ")),Ae("1 2 3"===T("123"," ")),Ae("1 --- 2 --- 3"===T("123"," --- "))}),De("zip",function(){function t(t){return Ae(!Array.isArray(t)),t=N(t,function(t){return Ae(Gn(t)),A(t)}),Ae(!Array.isArray(t)),t}var n=t(w([[1,2,3],[4,5,6],[7,8,9]]));Ae(Ce(A(n),[[1,4,7],[2,5,8],[3,6,9]]));var n=t(w(Sn([Sn([1,2,3]),Sn([4,5,6]),Sn([7,8,9])])));Ae(Ce(A(n),[[1,4,7],[2,5,8],[3,6,9]]));var n=t(w(Zn([Zn([1,2,3]),Zn([4,5,6]),Zn([7,8,9])])));Ae(Ce(A(n),[[1,4,7],[2,5,8],[3,6,9]]));var n=t(w([[1,2,3,0],[4,5,6],[7,8,9]]));Ae(Ce(A(n),[[1,4,7],[2,5,8],[3,6,9]]));var n=t(w([[1,2,3],[4,5,6,0],[7,8,9]]));Ae(Ce(A(n),[[1,4,7],[2,5,8],[3,6,9]]));var n=t(w([[1,2,3],[4,5,6],[7,8,9,0]]));Ae(Ce(A(n),[[1,4,7],[2,5,8],[3,6,9]]));var n=t(w([[1,2,3,0],[4,5,6],[7,8,9,0]]));Ae(Ce(A(n),[[1,4,7],[2,5,8],[3,6,9]]));var n=t(w([[1,2,3,0],[4,5,6,0],[7,8,9]]));Ae(Ce(A(n),[[1,4,7],[2,5,8],[3,6,9]]));var n=t(w([[1,2,3,0],[4,5,6],[7,8,9]],50));Ae(Ce(A(n),[[1,4,7],[2,5,8],[3,6,9],[0,50,50]]));var n=t(w([[1,2,3],[4,5,6,0],[7,8,9]],50));Ae(Ce(A(n),[[1,4,7],[2,5,8],[3,6,9],[50,0,50]]));var n=t(w([[1,2,3],[4,5,6],[7,8,9,0]],50));Ae(Ce(A(n),[[1,4,7],[2,5,8],[3,6,9],[50,50,0]]));var n=t(w([[1,2,3,0],[4,5,6],[7,8,9,0]],50));Ae(Ce(A(n),[[1,4,7],[2,5,8],[3,6,9],[0,50,0]]));var n=t(w([[1,2,3,0],[4,5,6,0],[7,8,9]],50));Ae(Ce(A(n),[[1,4,7],[2,5,8],[3,6,9],[0,0,50]]))}),De("toArray",function(){var t=[1,2,3,4,5];Ae(A(t)===t),Ae(Ce(A("foo"),["f","o","o"])),Ae(Ce(A(Zn([1,2,3])),[1,2,3]));var t=N(me([["foo",1],["bar",2]]),function(t){return Ae(Gn(t)),A(t)});Ae(Ce(A(t),[["bar",2],["foo",1]]))}),De("take",function(){Ae(Ce(A(J([1,2,3,4,5],0)),[])),Ae(Ce(A(J([1,2,3,4,5],2)),[1,2])),Ae(Ce(A(J([1,2,3,4,5],200)),[1,2,3,4,5])),ze(function(){J([1,2,3,4,5],-5)},"Count cannot be negative"),ze(function(){J([1,2,3,4,5],5.1)},"Count must be an integer")}),De("range",function(){Ae(Ce(A(J(C(),12)),[0,1,2,3,4,5,6,7,8,9,10,11])),Ae(Ce(A(J(C(6),12)),[6,7,8,9,10,11,12,13,14,15,16,17])),Ae(Ce(A(C(0,10)),[0,1,2,3,4,5,6,7,8,9])),Ae(Ce(A(C(5,5)),[])),Ae(Ce(A(C(4,5)),[4])),Ae(Ce(A(C(5,4)),[5])),Ae(Ce(A(C(10,0)),[10,9,8,7,6,5,4,3,2,1])),Ae(Ce(A(C(0,10,2)),[0,2,4,6,8])),Ae(Ce(A(C(10,0,2)),[10,8,6,4,2])),Ae(Ce(A(C(4.2,6.9,.5)),[4.2,4.7,5.2,5.7,6.2,6.7])),Ae(Ce(A(C(-10,-2)),[-10,-9,-8,-7,-6,-5,-4,-3])),Ae(Ce(A(C(-0,0)),[])),Ae(Ce(A(C(0,-0)),[])),Ae(Ce(A(C(0,1)),[0])),Ae(Ce(A(C(-0,1)),[-0])),Ae(Ce(A(C(0,.5,.1)),[0,.1,.2,.30000000000000004,.4])),Ae(Ce(A(J(C(5,4,0),5)),[5,5,5,5,5])),ze(function(){C(5,4,-1)},"Step cannot be negative")}),De("equal",function(){Ae(c(0,0)),Ae(c(-0,-0)),Ae(c(0,-0)),Ae(c(-0,0)),Ae(c(1,1)),Ae(c(null,null)),Ae(c(void 0,void 0)),Ae(c(0/0,0/0)),Ae(c(!0,!0)),Ae(c(!1,!1)),Ae(c("foo","foo"));var t={};Ae(c(t,t)),Ae(!c(1,2)),Ae(!c(null,void 0)),Ae(!c(void 0,null)),Ae(!c(0/0,0)),Ae(!c(0/0,1)),Ae(!c(0/0,"foo")),Ae(!c(!0,!1)),Ae(!c(!1,!0)),Ae(!c("foo","foo2")),Ae(!c({},{}))});var Ao=Date.now();console.log("SUCCEEDED: "+wo+", FAILED: "+Eo+", TOOK: "+(Ao-xo)+"ms")}).call(this);