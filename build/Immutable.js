(function(){"use strict";function t(t){return"string"==typeof t&&Ur.test(t)}function r(t){return"string"==typeof t&&(Cr.test(t)||Ar.test(t))}function n(t){return"string"==typeof t&&Ar.test(t)}function e(){if(0===arguments.length)return"(Tag "+Rr+" "+ ++Dr+")";throw Error("Expected 0 arguments but got "+arguments.length)}function o(r){if(1===arguments.length){if(t(r))return"(UUIDTag "+r+")";throw Error("Expected a lower-case UUID, but got: "+r)}throw Error("Expected 1 argument but got "+arguments.length)}function i(t){return Object(t)===t}function u(t){if(i(t)){var r=Object.getPrototypeOf(t);return null===r||r===Object.prototype}return!1}function h(t,r){return Array(r+1).join(t)}function f(t,r,n){var e=Math.max(0,r-t.length);return t+h(n,e)}function a(t,r){if(t.length){var n="\n"+r;return n+t.map(function(t){return t.replace(/\n/g,n)}).join(n)}return""}function s(t){return t}function c(t){return'"'+t.replace(/[\\\"\n]/g,function(t){return"\n"===t?t+" ":"\\"+t})+'"'}function p(t){var n=typeof t;if("string"===n)return r(t)?t:c(t);if("number"===n||"boolean"===n||"undefined"===n||null===t)return""+t;var e=t[Jr];if(null!=e)return e(t);var o="(Mutable "+ ++Nr+")";return Object.defineProperty(t,Jr,{configurable:!1,enumerable:!1,writable:!1,value:function(){return o}}),o}function l(t,r){var n=[],e=0;t.forEach(function(t){var r=p(t[0]),o=p(t[1]);r=r.split(/\n/),r.forEach(function(t){e=Math.max(e,t.length)}),n.push({key:r,value:o})});var r="  ";return n=n.map(function(t){var r=t.key.length-1;t.key[r]=f(t.key[r],e," ");var n=t.key.join("\n"),o=t.value.replace(/\n/g,"\n"+h(" ",e+3));return n+" = "+o}),a(n,r)}function y(t){if(i(t)){var r=t[Lr];return null!=r?r(t):t}return t}function v(t){var r={};return t.forEach(function(t){var n=t[0],e=t[1];if("string"!=typeof n)throw Error("Cannot convert to JavaScript: expected key to be string or Tag but got "+n);r[n]=y(e)}),r}function g(t){var r=[];return t.forEach(function(t){r.push(y(t))}),r}function d(t){if(i(t)){var e=t[Qr];if(null!=e){var o=Mr[e];if(null!=o)return o(t);throw Error("Cannot handle type "+e)}return t}if(r(t)){if(n(t))return t;throw Error("Cannot convert Tag from JSON, use UUIDTag instead: "+t)}return t}function E(t){if(i(t)){var e=t[Kr];return null!=e?e(t):t}if(r(t)){if(n(t))return t;throw Error("Cannot convert Tag to JSON, use UUIDTag instead: "+t)}return t}function w(t,r){var n={};return n[Qr]=t,n.keys=[],n.values=[],r.forEach(function(t){var r=t[0],e=t[1];n.keys.push(E(r)),n.values.push(E(e))}),n}function m(t,r){var n={};return n[Qr]=t,n.values=[],r.forEach(function(t){n.values.push(E(t))}),n}function b(t){for(var r=t.keys,n=t.values,e=r.length,o=Array(e),i=0;e>i;++i)o[i]=[d(r[i]),d(n[i])];return o}function k(t){for(var r=t.values,n=r.length,e=Array(n),o=0;n>o;++o)e[o]=d(r[o]);return e}function z(t,r){return t>r?t:r}function S(t,r,n){var e=r.depth,o=n.depth;if(e>o+1){var i=r.left,u=r.right;return u.depth>i.depth?u.copy(r.copy(i,u.left),t.copy(u.right,n)):r.copy(i,t.copy(u,n))}if(o>e+1){var h=n.right,f=n.left;return f.depth>h.depth?f.copy(t.copy(r,f.left),n.copy(f.right,h)):n.copy(t.copy(r,f),h)}return t.copy(r,n)}function _(t,r){if(t===qr)return r;if(r===qr)return t;if(t.depth<r.depth){var n=_(t,r.left);return S(r,n,r.right)}var e=_(t.right,r);return S(t,t.left,e)}function x(t,r){return t===qr?r:S(t,x(t.left,r),t.right)}function O(t,r){return t===qr?r:S(t,t.left,O(t.right,r))}function j(t,r){return t===r?0:r>t?-1:1}function I(t,r,n){for(;t!==qr;){var e=r(n,t.hash);if(0===e)break;t=0>e?t.left:t.right}return t}function R(t,r,n,e){if(t===qr)return e;var o=t.left,i=t.right,u=r(n,t.hash);if(0===u)return t.modify(e);if(0>u){var h=R(o,r,n,e);return h===o?t:S(t,h,i)}var h=R(i,r,n,e);return h===i?t:S(t,o,h)}function D(t,r,n,e,o){if(t===qr)throw Error("Key "+e+" not found");var i=t.left,u=t.right,h=r(n,t.hash);if(0===h)return t.modify({key:e,hash:n,value:o(t.value)});if(0>h){var f=D(i,r,n,e,o);return f===i?t:S(t,f,u)}var f=D(u,r,n,e,o);return f===u?t:S(t,i,f)}function T(t,r,n){if(t===qr)return t;var e=t.left,o=t.right,i=r(n,t.hash);if(0===i)return _(e,o);if(0>i){var u=T(e,r,n);return u===e?t:S(t,u,o)}var u=T(o,r,n);return u===o?t:S(t,e,u)}function U(){return p(this)}function C(t,r,n,e,o){this.left=t,this.right=r,this.hash=n,this.key=e,this.value=o,this.depth=z(t.depth,r.depth)+1}function A(t,r,n){this.root=t,this.sort=r,this.hash_fn=n,this.hash=null}function J(t){return t instanceof A}function N(t){return J(t)&&t.hash_fn===s}function L(t,r){return null!=r?N(r)&&r.sort===t?r:new A(qr,t,s).merge(r):new A(qr,t,s)}function M(t){return null!=t?J(t)&&!N(t)?t:new A(qr,j,p).merge(t):new A(qr,j,p)}function Q(t,r,n,e){this.left=t,this.right=r,this.hash=n,this.key=e,this.depth=z(t.depth,r.depth)+1}function K(t,r,n){this.root=t,this.sort=r,this.hash_fn=n,this.hash=null}function q(t){return t instanceof K}function $(t){return q(t)&&t.hash_fn===s}function P(t,r){return null!=r?$(r)&&r.sort===t?r:new K(qr,t,s).union(r):new K(qr,t,s)}function F(t){return null!=t?q(t)&&!$(t)?t:new K(qr,j,p).union(t):new K(qr,j,p)}function B(t){for(var r=t.length,n=Array(r),e=0;r>e;++e)n[e]=t[e];return n}function G(t,r,n){for(var e=t.length+1,o=Array(e),i=0;r>i;)o[i]=t[i],++i;for(o[i]=n,++i;e>i;)o[i]=t[i-1],++i;return o}function H(t,r,n){var e=t[r],o=n(e);if(e===o)return t;var i=B(t);return i[r]=o,i}function V(t,r){for(var n=t.length-1,e=Array(n),o=0;r>o;)e[o]=t[o],++o;for(;n>o;)e[o]=t[o+1],++o;return e}function W(t,r){this.car=t,this.cdr=r}function X(t,r){if(t.length){var n=t[t.length-1];n.length+r.length<=Fr?t[t.length-1]=n.concat(r):t.push(r)}else t.push(r)}function Y(t,r,n){if(n>r){var e=Gr((r+n)/2),o=Y(t,r,e),i=Y(t,e+1,n);return new er(o,i,t[e])}return qr}function Z(t){return Y(t,0,t.length)}function tr(t,r,n){0>r&&(r=0);var e=t.length;return n>e&&(n=e),0===r&&n===e?t:t.slice(r,n)}function rr(t,r){for(var n=Array(r);r--;)n[r]=t.car,t=t.cdr;return n}function nr(t,r,n){for(;--r!==n;)t=t.cdr;return t.car}function er(t,r,n){this.left=t,this.right=r,this.array=n,this.size=t.size+r.size+n.length,this.depth=z(t.depth,r.depth)+1}function or(t,r){return t>=0&&r>t}function ir(t,r){for(;;){var n=t.left,e=n.size;if(e>r)t=n;else{r-=e;var o=t.array,i=o.length;if(i>r)return o[r];r-=i,t=t.right}}}function ur(t,r,n){if(t===qr)return new er(qr,qr,[n]);var e=t.left,o=t.right,i=e.size;if(i>r){var u=ur(e,r,n);return S(t,u,o)}r-=i;var h=t.array,f=h.length;if(f>=r){if(h=G(h,r,n),f===Fr){var a=Br(h.length/2),s=h.slice(0,a),c=h.slice(a);return e.depth<o.depth?new er(O(e,new er(qr,qr,s)),o,c):new er(e,x(o,new er(qr,qr,c)),s)}return new er(e,o,h)}var u=ur(o,r-f,n);return S(t,e,u)}function hr(t,r,n){var e=t.left,o=t.right,i=e.size;if(i>r){var u=hr(e,r,n);return u===e?t:t.copy(u,o)}r-=i;var h=t.array,f=h.length;if(f>r){var a=H(h,r,n);return a===h?t:new er(e,o,a)}var u=hr(o,r-f,n);return u===o?t:t.copy(e,u)}function fr(t,r){var n=t.left,e=t.right,o=n.size;if(o>r){var i=fr(n,r);return S(t,i,e)}r-=o;var u=t.array,h=u.length;if(h>r)return u=V(u,r),0===u.length?_(n,e):new er(n,e,u);var i=fr(e,r-h);return S(t,n,i)}function ar(t,r,n,e){if(r!==qr){var o=r.left,i=o.size;i>n&&ar(t,o,n,e);var u=r.array,h=u.length;n-=i,e-=i,h>n&&e>0&&X(t,tr(u,n,e)),e>h&&ar(t,r.right,n-h,e-h)}}function sr(t,r,n){this.root=t,this.tail=r,this.tail_size=n,this.hash=null}function cr(t){return t instanceof sr}function pr(t){if(null!=t){if(t instanceof sr)return t;var r=new sr(qr,qr,0);return t.forEach(function(t){r=r.insert(t)}),r}return new sr(qr,qr,0)}function lr(t,r,n){this.left=t,this.right=r,this.len=n,this.hash=null}function yr(t){return t instanceof lr}function vr(t){if(null!=t){if(t instanceof lr)return t;var r=new lr(qr,qr,0);return t.forEach(function(t){r=r.push(t)}),r}return new lr(qr,qr,0)}function gr(t,r){this.root=t,this.len=r,this.hash=null}function dr(t){return t instanceof gr}function Er(t){if(null!=t){if(t instanceof gr)return t;var r=new gr(qr,0);return t.forEach(function(t){r=r.push(t)}),r}return new gr(qr,0)}function wr(t){if("string"!=typeof t)throw Error("Expected key to be a string or Tag but got "+t)}function mr(t,r){this.keys=t,this.values=r,this.hash=null}function br(t){return t instanceof mr}function kr(t){var r={},n=[];if(null!=t){if(br(t))return t;u(t)?Object.keys(t).forEach(function(e){wr(e),r[e]=n.push(t[e])-1}):t.forEach(function(t){var e=t[0],o=t[1];wr(e),r[e]=n.push(o)-1})}return new mr(r,n)}function zr(t,r){this._id=++Hr,this._value=t,this._onchange=r}function Sr(t){return _r(t)?t.get():t}function _r(t){return t instanceof zr}function xr(t,r){if(arguments.length<1||arguments.length>2)throw Error("Expected 1 to 2 arguments but got "+arguments.length);return new zr(t,r)}function Or(t,r){return t===r||p(t)===p(r)}function jr(t){if(i(t))return Object.isFrozen(t)||J(t)||q(t)||cr(t)||yr(t)||dr(t)||br(t);var r=typeof t;return"string"===r||"number"===r||"boolean"===r||"symbol"===r||null==t}function Ir(t){if(Array.isArray(t)){for(var r=pr(),n=0,e=t.length;e>n;++n)r=r.insert(Ir(t[n]));return r}if(u(t)){var r=M();for(var o in t)r=r.set(o,Ir(t[o]));return r}return t}var Rr="48de6fff-9d11-472d-a76f-ed77a59a5cbc",Dr=0,Tr="[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}",Ur=RegExp("^"+Tr+"$"),Cr=RegExp("^\\(Tag "+Rr+" [0-9]+\\)$"),Ar=RegExp("^\\(UUIDTag "+Tr+"\\)$"),Jr=o("e1c3818d-4c4f-4703-980a-00969e4ca900"),Nr=0,Lr=o("1b75a273-16bd-4248-be8a-e4b5e8c4b523"),Mr={},Qr=o("89d8297c-d95e-4ce9-bc9b-6b6f73fa6a37"),Kr=o("99e14916-bc99-4c48-81aa-299cf1ad6de3"),qr={};qr.depth=0,qr.size=0,qr.forEach=function(){},qr.forEachRev=function(){};var $r={},Pr={};$r.toString=Pr.toString=U,$r.inspect=Pr.inspect=U,C.prototype.copy=function(t,r){return new C(t,r,this.hash,this.key,this.value)},C.prototype.modify=function(t){var r=t.hash,n=t.key,e=t.value;return this.hash===r&&this.key===n&&this.value===e?this:new C(this.left,this.right,r,n,e)},C.prototype.forEach=function(t){this.left.forEach(t),t([this.key,this.value]),this.right.forEach(t)},A.prototype=Object.create(Pr),A.prototype[Jr]=function(t){return null===t.hash&&(t.hash=J(t)&&!N(t)?"(Dict"+l(t,"  ")+")":"(SortedDict "+p(t.sort)+l(t,"  ")+")"),t.hash},Mr.Dict=function(t){return M(b(t))},A.prototype[Kr]=function(t){if(J(t)&&!N(t))return w("Dict",t);throw Error("Cannot convert SortedDict to JSON")},A.prototype[Lr]=v,A.prototype.forEach=function(t){this.root.forEach(t)},A.prototype.isEmpty=function(){return this.root===qr},A.prototype.has=function(t){return I(this.root,this.sort,this.hash_fn(t))!==qr},A.prototype.get=function(t,r){var n=I(this.root,this.sort,this.hash_fn(t));if(n===qr){if(2===arguments.length)return r;throw Error("Key "+t+" not found")}return n.value},A.prototype.set=function(t,r){var n=this.root,e=this.sort,o=this.hash_fn,i=o(t),u=R(n,e,i,new C(qr,qr,i,t,r));return u===n?this:new A(u,e,o)},A.prototype.remove=function(t){var r=this.root,n=this.sort,e=this.hash_fn,o=T(r,n,e(t));return o===r?this:new A(o,n,e)},A.prototype.modify=function(t,r){var n=this.root,e=this.sort,o=this.hash_fn,i=D(n,e,o(t),t,r);return i===n?this:new A(i,e,o)},A.prototype.merge=function(t){var r=this;return u(t)?Object.keys(t).forEach(function(n){r=r.set(n,t[n])}):t.forEach(function(t){var n=t[0],e=t[1];r=r.set(n,e)}),r},Q.prototype.copy=function(t,r){return new Q(t,r,this.hash,this.key)},Q.prototype.modify=function(t){var r=t.hash,n=t.key;return this.hash===r&&this.key===n?this:new Q(this.left,this.right,r,n)},Q.prototype.forEach=function(t){this.left.forEach(t),t(this.key),this.right.forEach(t)},K.prototype=Object.create(Pr),Mr.Set=function(t){return F(k(t))},K.prototype[Kr]=function(t){if(q(t)&&!$(t))return m("Set",t);throw Error("Cannot convert SortedSet to JSON")},K.prototype[Jr]=function(t){if(null===t.hash){var r=[];t.forEach(function(t){r.push(p(t))});var n="  ";t.hash=q(t)&&!$(t)?"(Set"+a(r,n)+")":"(SortedSet "+p(t.sort)+a(r,n)+")"}return t.hash},K.prototype[Lr]=g,K.prototype.forEach=function(t){this.root.forEach(t)},K.prototype.isEmpty=function(){return this.root===qr},K.prototype.has=function(t){return I(this.root,this.sort,this.hash_fn(t))!==qr},K.prototype.add=function(t){var r=this.root,n=this.sort,e=this.hash_fn,o=e(t),i=R(r,n,o,new Q(qr,qr,o,t));return i===r?this:new K(i,n,e)},K.prototype.remove=function(t){var r=this.root,n=this.sort,e=this.hash_fn,o=T(r,n,e(t));return o===r?this:new K(o,n,e)},K.prototype.union=function(t){var r=this;return t.forEach(function(t){r=r.add(t)}),r},K.prototype.intersect=function(t){var r=this;if(r.isEmpty())return r;var n=new K(qr,r.sort,r.hash_fn);return t.forEach(function(t){r.has(t)&&(n=n.add(t))}),n},K.prototype.disjoint=function(t){var r=this;return t.forEach(function(t){r=r.has(t)?r.remove(t):r.add(t)}),r},K.prototype.subtract=function(t){var r=this;return r.isEmpty()||t.forEach(function(t){r=r.remove(t)}),r},W.prototype.forEach=function(t){for(var r=this;r!==qr;)t(r.car),r=r.cdr},W.prototype.forEachRev=function(t){this.cdr.forEachRev(t),t(this.car)};var Fr=125,Br=Math.ceil,Gr=Math.floor;er.prototype.copy=function(t,r){return new er(t,r,this.array)},er.prototype.forEach=function(t){this.left.forEach(t),this.array.forEach(function(r){t(r)}),this.right.forEach(t)},sr.prototype=Object.create(Pr),Mr.List=function(t){return pr(k(t))},sr.prototype[Kr]=function(t){return m("List",t)},sr.prototype[Jr]=function(t){if(null===t.hash){var r=[];t.forEach(function(t){r.push(p(t))}),t.hash="(List"+a(r,"  ")+")"}return t.hash},sr.prototype[Lr]=g,sr.prototype.forEach=function(t){this.root.forEach(t),this.tail.forEachRev(t)},sr.prototype.isEmpty=function(){return this.root===qr&&this.tail===qr},sr.prototype.size=function(){return this.root.size+this.tail_size},sr.prototype.has=function(t){var r=this.size();return 0>t&&(t+=r),or(t,r)},sr.prototype.get=function(t,r){var n=this.size();if(0>t&&(t+=n),or(t,n)){var e=this.root,o=e.size;return o>t?ir(e,t):nr(this.tail,this.tail_size,t-o)}if(2===arguments.length)return r;throw Error("Index "+t+" is not valid")},sr.prototype.insert=function(t,r){1===arguments.length&&(r=-1);var n=this.size();0>r&&(r+=n+1);var e=this.root,o=this.tail,i=this.tail_size;if(r===n){if(i===Fr){var u=O(e,new er(qr,qr,rr(o,i)));return new sr(u,new W(t,qr),1)}return new sr(e,new W(t,o),i+1)}if(or(r,n)){var h=e.size;if(h>r)return new sr(ur(e,r,t),o,i);var f=G(rr(o,i),r-h,t),u=O(e,new er(qr,qr,f));return new sr(u,qr,0)}throw Error("Index "+r+" is not valid")},sr.prototype.remove=function(t){0===arguments.length&&(t=-1);var r=this.size();0>t&&(t+=r);var n=this.root,e=this.tail,o=this.tail_size;if(e!==qr&&t===r-1)return new sr(n,e.cdr,o-1);if(or(t,r)){var i=n.size;if(i>t)return new sr(fr(n,t),e,o);var u=V(rr(e,o),t-i),h=O(n,new er(qr,qr,u));return new sr(h,qr,0)}throw Error("Index "+t+" is not valid")},sr.prototype.modify=function(t,r){var n=this.size();if(0>t&&(t+=n),or(t,n)){var e=this.root,o=this.tail,i=this.tail_size,u=e.size;if(o!==qr&&t===n-1){var h=r(o.car);return h===o.car?this:new sr(e,new W(h,o.cdr),i)}if(u>t){var f=hr(e,t,r);return f===e?this:new sr(f,o,i)}var a=rr(o,i),s=H(a,t-u,r);if(s===a)return this;var f=O(e,new er(qr,qr,s));return new sr(f,qr,0)}throw Error("Index "+t+" is not valid")},sr.prototype.slice=function(t,r){var n=this.size();if(null==t&&(t=0),null==r&&(r=n),0>t&&(t+=n),0>r&&(r+=n),0===t&&r===n)return this;if(t>r)throw Error("Index "+t+" is greater than index "+r);if(or(t,n)){if(t===r)return new sr(qr,qr,0);if(r>0&&n>=r){var e=this.root,o=e.size,i=[];if(o>=t&&ar(i,e,t,r),r>o){var u=rr(this.tail,this.tail_size);X(i,tr(u,t-o,r-o))}return new sr(Z(i),qr,0)}throw Error("Index "+r+" is not valid")}throw Error("Index "+t+" is not valid")},sr.prototype.concat=function(t){if(t instanceof sr){var r=this.root,n=this.tail,e=t.root,o=t.tail;if(e===qr&&o===qr)return this;if(r===qr&&n===qr)return t;n!==qr&&(r=O(r,new er(qr,qr,rr(n,this.tail_size))));var i=_(r,e);return new sr(i,o,t.tail_size)}var u=this;return t.forEach(function(t){u=u.insert(t)}),u},lr.prototype=Object.create(Pr),Mr.Queue=function(t){return vr(k(t))},lr.prototype[Kr]=function(t){return m("Queue",t)},lr.prototype[Lr]=g,lr.prototype.isEmpty=function(){return this.left===qr&&this.right===qr},lr.prototype.forEach=function(t){this.left.forEach(t),this.right.forEachRev(t)},lr.prototype[Jr]=function(t){if(null===t.hash){var r=[];t.forEach(function(t){r.push(p(t))}),t.hash="(Queue"+a(r,"  ")+")"}return t.hash},lr.prototype.size=function(){return this.len},lr.prototype.peek=function(t){if(this.isEmpty()){if(1===arguments.length)return t;throw Error("Cannot peek from an empty queue")}return this.left.car},lr.prototype.push=function(t){return this.isEmpty()?new lr(new W(t,this.left),this.right,this.len+1):new lr(this.left,new W(t,this.right),this.len+1)},lr.prototype.pop=function(){if(this.isEmpty())throw Error("Cannot pop from an empty queue");var t=this.left.cdr;if(t===qr){var r=qr;return this.right.forEach(function(t){r=new W(t,r)}),new lr(r,qr,this.len-1)}return new lr(t,this.right,this.len-1)},lr.prototype.concat=function(t){var r=this;return t.forEach(function(t){r=r.push(t)}),r},gr.prototype=Object.create(Pr),Mr.Stack=function(t){return Er(k(t))},gr.prototype[Kr]=function(t){return m("Stack",t)},gr.prototype[Lr]=g,gr.prototype.isEmpty=function(){return this.root===qr},gr.prototype[Jr]=function(t){if(null===t.hash){var r=[];t.forEach(function(t){r.push(p(t))}),t.hash="(Stack"+a(r,"  ")+")"}return t.hash},gr.prototype.forEach=function(t){this.root.forEachRev(t)},gr.prototype.size=function(){return this.len},gr.prototype.peek=function(t){if(this.isEmpty()){if(1===arguments.length)return t;throw Error("Cannot peek from an empty stack")}return this.root.car},gr.prototype.push=function(t){return new gr(new W(t,this.root),this.len+1)},gr.prototype.pop=function(){if(this.isEmpty())throw Error("Cannot pop from an empty stack");return new gr(this.root.cdr,this.len-1)},gr.prototype.concat=function(t){var r=this;return t.forEach(function(t){r=r.push(t)}),r},mr.prototype=Object.create(Pr),Mr.Record=function(t){return kr(b(t))},mr.prototype[Kr]=function(t){return w("Record",t)},mr.prototype[Lr]=v,mr.prototype[Jr]=function(t){return null===t.hash&&(t.hash="(Record"+l(t,"  ")+")"),t.hash},mr.prototype.forEach=function(t){var r=this.keys,n=this.values;for(var e in r){var o=r[e];t([e,n[o]])}},mr.prototype.get=function(t){wr(t);var r=this.keys[t];if(null==r)throw Error("Key "+t+" not found");return this.values[r]},mr.prototype.set=function(t,r){return this.modify(t,function(){return r})},mr.prototype.modify=function(t,r){wr(t);var n=this.keys,e=n[t];if(null==e)throw Error("Key "+t+" not found");var o=this.values,i=H(o,e,r);return i===o?this:new mr(n,i)},mr.prototype.update=function(t){var r=this;return u(t)?Object.keys(t).forEach(function(n){r=r.set(n,t[n])}):t.forEach(function(t){var n=t[0],e=t[1];r=r.set(n,e)}),r};var Hr=0;zr.prototype=Object.create($r),zr.prototype[Jr]=function(t){return"(Ref "+p(t._id)+")"},zr.prototype.get=function(){return this._value},zr.prototype.set=function(t){var r=this._value;t!==r&&(this._value=t,null!=this._onchange&&this._onchange(r,t))},zr.prototype.modify=function(t){this.set(t(this.get()))},function(t,r){"function"==typeof define&&define.amd?define(["exports"],r):"object"==typeof exports?r(exports):(t.Immutable={},r(t.Immutable))}(this,function(t){t.equal=Or,t.fromJS=Ir,t.toJS=y,t.isDict=J,t.isSet=q,t.isSortedDict=N,t.isSortedSet=$,t.isList=cr,t.isQueue=yr,t.isStack=dr,t.isImmutable=jr,t.SortedDict=L,t.SortedSet=P,t.Dict=M,t.Set=F,t.List=pr,t.Queue=vr,t.Stack=Er,t.simpleSort=j,t.isRecord=br,t.Record=kr,t.toJSON=E,t.fromJSON=d,t.deref=Sr,t.Ref=xr,t.isRef=_r,t.isTag=r,t.isUUIDTag=n,t.Tag=e,t.UUIDTag=o})}).call(this);