(function(){"use strict";function t(t){return"string"==typeof t&&tn.test(t)}function r(t){var r=typeof t;return"symbol"===r||"string"===r&&(rn.test(t)||nn.test(t))}function n(t){return"string"==typeof t&&nn.test(t)}function e(){if(0===arguments.length)return"(Tag "+Xr+" "+ ++Yr+")";throw Error("Expected 0 arguments but got "+arguments.length)}function i(r){if(1===arguments.length){if(t(r))return"(UUIDTag "+r+")";throw Error("Expected a lower-case UUID, but got: "+r)}throw Error("Expected 1 argument but got "+arguments.length)}function o(t){return Object(t)===t}function u(t){if(o(t)){var r=Object.getPrototypeOf(t);return null===r||r===Object.prototype}return!1}function f(t,r){return Array(r+1).join(t)}function s(t,r,n){var e=Math.max(0,r-t.length);return t+f(n,e)}function a(t){return t}function h(t){var r=0;return{next:function(){return r<t.length?{value:t[r++]}:{done:!0}}}}function c(t){var r;if(null!=(r=t[on]))return r.call(t);if(null!==en&&null!=(r=t[en]))return r.call(t);if(Array.isArray(t))return h(t);if("string"==typeof t)return h(t);throw Error("Cannot iter: "+t)}function p(t){var r={};return r[on]=t,r}function l(t,r){for(;;){var n=t.next();if(n.done)break;r(n.value)}}function v(t,r){return{next:function(){var n=t.next();return n.done?{done:!0}:{value:r(n.value)}}}}function y(t,r){var n=!1,e=!1;return{next:function(){for(;;)if(n){if(e)return{done:!0};var i=r.next();if(!i.done)return i;e=!0}else{var i=t.next();if(!i.done)return i;n=!0}}}}function g(t){var r=[];l(t,function(t){r.push(t)});var n=r.length;return{next:function(){return n?{value:r[--n]}:{done:!0}}}}function d(t,r,n){return x(t,function(t){r=n(r,t)}),r}function w(t,r,n){return d(_(t),r,function(t,r){return n(r,t)})}function m(t){var r=[];return x(t,function(t){r.push(t)}),r}function b(t,r){return null==r&&(r=""),m(t).join(r)}function E(t,r){var n=!1,e=null;return{next:function(){for(;;){if(n)return{done:!0};if(null===e){var i=t.next();i.done?n=!0:e=r(i.value)}else{var i=e.next();if(!i.done)return i;e=null}}}}}function k(t){return u(t)?z(Object.keys(t),function(r){return[r,t[r]]}):t}function x(t,r){l(c(t),r)}function S(t,r,n){for(var e=c(t),i=0;;){var o=e.next();if(o.done){if(3===arguments.length)return n;throw Error("findIndex did not find anything")}if(r(o.value))return i;++i}}function z(t,r){return p(function(){return v(c(t),r)})}function _(t){return p(function(){return g(c(t))})}function O(t,r){return p(function(){var n=c(t);return{next:function(){for(;;){var t=n.next();if(t.done)return{done:!0};if(r(t.value))return t}}}})}function I(t){return'"'+t.replace(/[\\\"\n]/g,function(t){return"\n"===t?t+" ":"\\"+t})+'"'}function j(t){var n=typeof t;if("string"===n)return r(t)?t:I(t);if("number"===n||"boolean"===n||"undefined"===n||null===t)return""+t;var e=t[un];if(null!=e)return e(t);var i="(Mutable "+ ++fn+")";return Object.defineProperty(t,un,{configurable:!1,enumerable:!1,writable:!1,value:function(){return i}}),i}function D(t,r){var n=0,e=[];x(t,function(t){var r=j(t[0]),i=j(t[1]);r=r.split(/\n/),x(r,function(t){n=Math.max(n,t.length)}),e.push({key:r,value:i})});var r="  ";return e=z(e,function(t){var r=t.key.length-1;t.key[r]=s(t.key[r],n," ");var e=b(t.key,"\n"),i=t.value.replace(/\n/g,"\n"+f(" ",n+3));return e+" = "+i}),T(e,r)}function T(t,r){var n="\n"+r;return b(z(t,function(t){return n+t.replace(/\n/g,n)}))}function U(t){if(o(t)){var r=t[sn];return null!=r?r(t):t}return t}function A(t){var r={};return x(t,function(t){var n=t[0],e=t[1];if("string"!=typeof n)throw Error("Cannot convert to JavaScript: expected key to be string or Tag but got "+n);r[n]=U(e)}),r}function C(t){var r=[];return x(t,function(t){r.push(U(t))}),r}function R(t){if(o(t)){var e=t[hn];if(null!=e){var i=an[e];if(null!=i)return i(t);throw Error("Cannot handle type "+e)}return t}if(r(t)){if(n(t))return t;throw Error("Cannot convert Tag from JSON, use UUIDTag instead: "+t)}return t}function J(t){if(o(t)){var e=t[cn];return null!=e?e(t):t}if(r(t)){if(n(t))return t;throw Error("Cannot convert Tag to JSON, use UUIDTag instead: "+t)}return t}function N(t,r){var n={};return n[hn]=t,n.keys=[],n.values=[],x(r,function(t){var r=t[0],e=t[1];n.keys.push(J(r)),n.values.push(J(e))}),n}function L(t,r){var n={};return n[hn]=t,n.values=[],x(r,function(t){n.values.push(J(t))}),n}function M(t){for(var r=t.keys,n=t.values,e=r.length,i=Array(e),o=0;e>o;++o)i[o]=[R(r[o]),R(n[o])];return i}function Q(t){for(var r=t.values,n=r.length,e=Array(n),i=0;n>i;++i)e[i]=R(r[i]);return e}function K(t,r){return t>r?t:r}function q(t,r,n){var e=r.depth,i=n.depth;if(e>i+1){var o=r.left,u=r.right;return u.depth>o.depth?u.copy(r.copy(o,u.left),t.copy(u.right,n)):r.copy(o,t.copy(u,n))}if(i>e+1){var f=n.right,s=n.left;return s.depth>f.depth?s.copy(t.copy(r,s.left),n.copy(s.right,f)):n.copy(t.copy(r,s),f)}return t.copy(r,n)}function $(t,r){if(t===pn)return r;if(r===pn)return t;if(t.depth<r.depth){var n=$(t,r.left);return q(r,n,r.right)}var e=$(t.right,r);return q(t,t.left,e)}function P(t,r){return t===pn?r:q(t,P(t.left,r),t.right)}function F(t,r){return t===pn?r:q(t,t.left,F(t.right,r))}function B(t){for(var r=[];t!==pn;)r.push(t),t=t.left;return{next:function(){if(r.length){var n=r.pop();for(t=n.right;t!==pn;)r.push(t),t=t.left;return{value:n}}return{done:!0}}}}function G(t,r){return t===r?0:r>t?-1:1}function H(t,r,n){for(;t!==pn;){var e=r(n,t.hash);if(0===e)break;t=0>e?t.left:t.right}return t}function V(t,r,n,e){if(t===pn)return e;var i=t.left,o=t.right,u=r(n,t.hash);if(0===u)return t.modify(e);if(0>u){var f=V(i,r,n,e);return f===i?t:q(t,f,o)}var f=V(o,r,n,e);return f===o?t:q(t,i,f)}function W(t,r,n,e,i){if(t===pn)throw Error("Key "+e+" not found");var o=t.left,u=t.right,f=r(n,t.hash);if(0===f)return t.modify({key:e,hash:n,value:i(t.value)});if(0>f){var s=W(o,r,n,e,i);return s===o?t:q(t,s,u)}var s=W(u,r,n,e,i);return s===u?t:q(t,o,s)}function X(t,r,n){if(t===pn)return t;var e=t.left,i=t.right,o=r(n,t.hash);if(0===o)return $(e,i);if(0>o){var u=X(e,r,n);return u===e?t:q(t,u,i)}var u=X(i,r,n);return u===i?t:q(t,e,u)}function Y(){return j(this)}function Z(t,r,n,e,i){this.left=t,this.right=r,this.hash=n,this.key=e,this.value=i,this.depth=K(t.depth,r.depth)+1}function tr(t,r,n){this.root=t,this.sort=r,this.hash_fn=n,this.hash=null}function rr(t){return t instanceof tr}function nr(t){return rr(t)&&t.hash_fn===a}function er(t,r){return null!=r?nr(r)&&r.sort===t?r:new tr(pn,t,a).merge(r):new tr(pn,t,a)}function ir(t){return null!=t?rr(t)&&!nr(t)?t:new tr(pn,G,j).merge(t):new tr(pn,G,j)}function or(t,r,n,e){this.left=t,this.right=r,this.hash=n,this.key=e,this.depth=K(t.depth,r.depth)+1}function ur(t,r,n){this.root=t,this.sort=r,this.hash_fn=n,this.hash=null}function fr(t){return t instanceof ur}function sr(t){return fr(t)&&t.hash_fn===a}function ar(t,r){return null!=r?sr(r)&&r.sort===t?r:new ur(pn,t,a).union(r):new ur(pn,t,a)}function hr(t){return null!=t?fr(t)&&!sr(t)?t:new ur(pn,G,j).union(t):new ur(pn,G,j)}function cr(t){for(var r=t.length,n=Array(r),e=0;r>e;++e)n[e]=t[e];return n}function pr(t,r,n){for(var e=t.length+1,i=Array(e),o=0;r>o;)i[o]=t[o],++o;for(i[o]=n,++o;e>o;)i[o]=t[o-1],++o;return i}function lr(t,r,n){var e=t[r],i=n(e);if(e===i)return t;var o=cr(t);return o[r]=i,o}function vr(t,r){for(var n=t.length-1,e=Array(n),i=0;r>i;)e[i]=t[i],++i;for(;n>i;)e[i]=t[i+1],++i;return e}function yr(t,r){this.car=t,this.cdr=r}function gr(t){return{next:function(){if(t===pn)return{done:!0};var r=t.car;return t=t.cdr,{value:r}}}}function dr(t,r){for(;t!==pn;)r(t.car),t=t.cdr}function wr(t,r){if(t.length){var n=t[t.length-1];n.length+r.length<=yn?t[t.length-1]=n.concat(r):t.push(r)}else t.push(r)}function mr(t,r,n){if(n>r){var e=dn((r+n)/2),i=mr(t,r,e),o=mr(t,e+1,n);return new Sr(i,o,t[e])}return pn}function br(t){return mr(t,0,t.length)}function Er(t,r,n){0>r&&(r=0);var e=t.length;return n>e&&(n=e),0===r&&n===e?t:t.slice(r,n)}function kr(t,r){for(var n=Array(r);r--;)n[r]=t.car,t=t.cdr;return n}function xr(t,r,n){for(;--r!==n;)t=t.cdr;return t.car}function Sr(t,r,n){this.left=t,this.right=r,this.array=n,this.size=t.size+r.size+n.length,this.depth=K(t.depth,r.depth)+1}function zr(t,r){return t>=0&&r>t}function _r(t,r){for(;;){var n=t.left,e=n.size;if(e>r)t=n;else{r-=e;var i=t.array,o=i.length;if(o>r)return i[r];r-=o,t=t.right}}}function Or(t,r,n){if(t===pn)return new Sr(pn,pn,[n]);var e=t.left,i=t.right,o=e.size;if(o>r){var u=Or(e,r,n);return q(t,u,i)}r-=o;var f=t.array,s=f.length;if(s>=r){if(f=pr(f,r,n),s===yn){var a=gn(f.length/2),h=f.slice(0,a),c=f.slice(a);return e.depth<i.depth?new Sr(F(e,new Sr(pn,pn,h)),i,c):new Sr(e,P(i,new Sr(pn,pn,c)),h)}return new Sr(e,i,f)}var u=Or(i,r-s,n);return q(t,e,u)}function Ir(t,r,n){var e=t.left,i=t.right,o=e.size;if(o>r){var u=Ir(e,r,n);return u===e?t:t.copy(u,i)}r-=o;var f=t.array,s=f.length;if(s>r){var a=lr(f,r,n);return a===f?t:new Sr(e,i,a)}var u=Ir(i,r-s,n);return u===i?t:t.copy(e,u)}function jr(t,r){var n=t.left,e=t.right,i=n.size;if(i>r){var o=jr(n,r);return q(t,o,e)}r-=i;var u=t.array,f=u.length;if(f>r)return u=vr(u,r),0===u.length?$(n,e):new Sr(n,e,u);var o=jr(e,r-f);return q(t,n,o)}function Dr(t,r,n,e){if(r!==pn){var i=r.left,o=i.size;o>n&&Dr(t,i,n,e);var u=r.array,f=u.length;n-=o,e-=o,f>n&&e>0&&wr(t,Er(u,n,e)),e>f&&Dr(t,r.right,n-f,e-f)}}function Tr(t,r,n){this.root=t,this.tail=r,this.tail_size=n,this.hash=null}function Ur(t){return t instanceof Tr}function Ar(t){return null!=t?t instanceof Tr?t:new Tr(pn,pn,0).concat(t):new Tr(pn,pn,0)}function Cr(t,r,n){this.left=t,this.right=r,this.len=n,this.hash=null}function Rr(t){return t instanceof Cr}function Jr(t){return null!=t?t instanceof Cr?t:new Cr(pn,pn,0).concat(t):new Cr(pn,pn,0)}function Nr(t,r){this.root=t,this.len=r,this.hash=null}function Lr(t){return t instanceof Nr}function Mr(t){return null!=t?t instanceof Nr?t:new Nr(pn,0).concat(t):new Nr(pn,0)}function Qr(t){if("string"!=typeof t)throw Error("Expected key to be a string or Tag but got "+t)}function Kr(t,r){this.keys=t,this.values=r,this.hash=null}function qr(t){return t instanceof Kr}function $r(t){var r={},n=[];if(null!=t){if(qr(t))return t;x(k(t),function(t){var e=t[0],i=t[1];Qr(e),r[e]=n.push(i)-1})}return new Kr(r,n)}function Pr(t,r){this._id=++wn,this._value=t,this._onchange=r}function Fr(t){return Br(t)?t.get():t}function Br(t){return t instanceof Pr}function Gr(t,r){if(arguments.length<1||arguments.length>2)throw Error("Expected 1 to 2 arguments but got "+arguments.length);return new Pr(t,r)}function Hr(t,r){return t===r||j(t)===j(r)}function Vr(t){if(o(t))return Object.isFrozen(t)||rr(t)||fr(t)||Ur(t)||Rr(t)||Lr(t)||qr(t);var r=typeof t;return"string"===r||"number"===r||"boolean"===r||"symbol"===r||null==t}function Wr(t){if(Array.isArray(t)){for(var r=Ar(),n=0,e=t.length;e>n;++n)r=r.insert(Wr(t[n]));return r}if(u(t)){var r=ir();for(var i in t)r=r.set(i,Wr(t[i]));return r}return t}var Xr="48de6fff-9d11-472d-a76f-ed77a59a5cbc",Yr=0,Zr="[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}",tn=RegExp("^"+Zr+"$"),rn=RegExp("^\\(Tag "+Xr+" [0-9]+\\)$"),nn=RegExp("^\\(UUIDTag "+Zr+"\\)$"),en="undefined"!=typeof Symbol&&void 0!==Symbol.iterator?Symbol.iterator:null,on=i("6199065c-b518-4cb3-8b41-ab70a9769ec3"),un=i("e1c3818d-4c4f-4703-980a-00969e4ca900"),fn=0,sn=i("1b75a273-16bd-4248-be8a-e4b5e8c4b523"),an={},hn=i("89d8297c-d95e-4ce9-bc9b-6b6f73fa6a37"),cn=i("99e14916-bc99-4c48-81aa-299cf1ad6de3"),pn={};pn.depth=0,pn.size=0;var ln={},vn={};ln.toString=vn.toString=Y,ln.inspect=vn.inspect=Y,null!==en&&(ln[en]=vn[en]=function(){return c(this)}),Z.prototype.copy=function(t,r){return new Z(t,r,this.hash,this.key,this.value)},Z.prototype.modify=function(t){var r=t.hash,n=t.key,e=t.value;return this.hash===r&&this.key===n&&this.value===e?this:new Z(this.left,this.right,r,n,e)},tr.prototype=Object.create(vn),tr.prototype[on]=function(){return v(B(this.root),function(t){return[t.key,t.value]})},tr.prototype[un]=function(t){return null===t.hash&&(t.hash=rr(t)&&!nr(t)?"(Dict"+D(t,"  ")+")":"(SortedDict "+j(t.sort)+D(t,"  ")+")"),t.hash},an.Dict=function(t){return ir(M(t))},tr.prototype[cn]=function(t){if(rr(t)&&!nr(t))return N("Dict",t);throw Error("Cannot convert SortedDict to JSON")},tr.prototype[sn]=A,tr.prototype.isEmpty=function(){return this.root===pn},tr.prototype.has=function(t){return H(this.root,this.sort,this.hash_fn(t))!==pn},tr.prototype.get=function(t,r){var n=H(this.root,this.sort,this.hash_fn(t));if(n===pn){if(2===arguments.length)return r;throw Error("Key "+t+" not found")}return n.value},tr.prototype.set=function(t,r){var n=this.root,e=this.sort,i=this.hash_fn,o=i(t),u=V(n,e,o,new Z(pn,pn,o,t,r));return u===n?this:new tr(u,e,i)},tr.prototype.remove=function(t){var r=this.root,n=this.sort,e=this.hash_fn,i=X(r,n,e(t));return i===r?this:new tr(i,n,e)},tr.prototype.modify=function(t,r){var n=this.root,e=this.sort,i=this.hash_fn,o=W(n,e,i(t),t,r);return o===n?this:new tr(o,e,i)},tr.prototype.merge=function(t){return d(k(t),this,function(t,r){var n=r[0],e=r[1];return t.set(n,e)})},or.prototype.copy=function(t,r){return new or(t,r,this.hash,this.key)},or.prototype.modify=function(t){var r=t.hash,n=t.key;return this.hash===r&&this.key===n?this:new or(this.left,this.right,r,n)},ur.prototype=Object.create(vn),an.Set=function(t){return hr(Q(t))},ur.prototype[on]=function(){return v(B(this.root),function(t){return t.key})},ur.prototype[cn]=function(t){if(fr(t)&&!sr(t))return L("Set",t);throw Error("Cannot convert SortedSet to JSON")},ur.prototype[un]=function(t){if(null===t.hash){var r=z(t,function(t){return j(t)}),n="  ";t.hash=fr(t)&&!sr(t)?"(Set"+T(r,n)+")":"(SortedSet "+j(t.sort)+T(r,n)+")"}return t.hash},ur.prototype[sn]=C,ur.prototype.isEmpty=function(){return this.root===pn},ur.prototype.removeAll=function(){return new ur(pn,this.sort,this.hash_fn)},ur.prototype.has=function(t){return H(this.root,this.sort,this.hash_fn(t))!==pn},ur.prototype.add=function(t){var r=this.root,n=this.sort,e=this.hash_fn,i=e(t),o=V(r,n,i,new or(pn,pn,i,t));return o===r?this:new ur(o,n,e)},ur.prototype.remove=function(t){var r=this.root,n=this.sort,e=this.hash_fn,i=X(r,n,e(t));return i===r?this:new ur(i,n,e)},ur.prototype.union=function(t){return d(t,this,function(t,r){return t.add(r)})},ur.prototype.intersect=function(t){var r=this;if(r.isEmpty())return r;var n=r.removeAll();return d(t,n,function(t,n){return r.has(n)?t.add(n):t})},ur.prototype.disjoint=function(t){var r=this;return d(t,r,function(t,n){return r.has(n)?t.remove(n):t.add(n)})},ur.prototype.subtract=function(t){return this.isEmpty()?this:d(t,this,function(t,r){return t.remove(r)})};var yn=125,gn=Math.ceil,dn=Math.floor;Sr.prototype.copy=function(t,r){return new Sr(t,r,this.array)},Tr.prototype=Object.create(vn),an.List=function(t){return Ar(Q(t))},Tr.prototype[cn]=function(t){return L("List",t)},Tr.prototype[un]=function(t){if(null===t.hash){var r=z(t,function(t){return j(t)});t.hash="(List"+T(r,"  ")+")"}return t.hash},Tr.prototype[sn]=C,Tr.prototype[on]=function(){var t=E(B(this.root),function(t){return c(t.array)});return y(t,g(gr(this.tail)))},Tr.prototype.isEmpty=function(){return this.root===pn&&this.tail===pn},Tr.prototype.size=function(){return this.root.size+this.tail_size},Tr.prototype.has=function(t){var r=this.size();return 0>t&&(t+=r),zr(t,r)},Tr.prototype.get=function(t,r){var n=this.size();if(0>t&&(t+=n),zr(t,n)){var e=this.root,i=e.size;return i>t?_r(e,t):xr(this.tail,this.tail_size,t-i)}if(2===arguments.length)return r;throw Error("Index "+t+" is not valid")},Tr.prototype.insert=function(t,r){1===arguments.length&&(r=-1);var n=this.size();0>r&&(r+=n+1);var e=this.root,i=this.tail,o=this.tail_size;if(r===n){if(o===yn){var u=F(e,new Sr(pn,pn,kr(i,o)));return new Tr(u,new yr(t,pn),1)}return new Tr(e,new yr(t,i),o+1)}if(zr(r,n)){var f=e.size;if(f>r)return new Tr(Or(e,r,t),i,o);var s=pr(kr(i,o),r-f,t),u=F(e,new Sr(pn,pn,s));return new Tr(u,pn,0)}throw Error("Index "+r+" is not valid")},Tr.prototype.remove=function(t){0===arguments.length&&(t=-1);var r=this.size();0>t&&(t+=r);var n=this.root,e=this.tail,i=this.tail_size;if(e!==pn&&t===r-1)return new Tr(n,e.cdr,i-1);if(zr(t,r)){var o=n.size;if(o>t)return new Tr(jr(n,t),e,i);var u=vr(kr(e,i),t-o),f=F(n,new Sr(pn,pn,u));return new Tr(f,pn,0)}throw Error("Index "+t+" is not valid")},Tr.prototype.modify=function(t,r){var n=this.size();if(0>t&&(t+=n),zr(t,n)){var e=this.root,i=this.tail,o=this.tail_size,u=e.size;if(i!==pn&&t===n-1){var f=r(i.car);return f===i.car?this:new Tr(e,new yr(f,i.cdr),o)}if(u>t){var s=Ir(e,t,r);return s===e?this:new Tr(s,i,o)}var a=kr(i,o),h=lr(a,t-u,r);if(h===a)return this;var s=F(e,new Sr(pn,pn,h));return new Tr(s,pn,0)}throw Error("Index "+t+" is not valid")},Tr.prototype.slice=function(t,r){var n=this.size();if(null==t&&(t=0),null==r&&(r=n),0>t&&(t+=n),0>r&&(r+=n),0===t&&r===n)return this;if(t>r)throw Error("Index "+t+" is greater than index "+r);if(zr(t,n)){if(t===r)return new Tr(pn,pn,0);if(r>0&&n>=r){var e=this.root,i=e.size,o=[];if(i>=t&&Dr(o,e,t,r),r>i){var u=kr(this.tail,this.tail_size);wr(o,Er(u,t-i,r-i))}return new Tr(br(o),pn,0)}throw Error("Index "+r+" is not valid")}throw Error("Index "+t+" is not valid")},Tr.prototype.concat=function(t){if(t instanceof Tr){var r=this.root,n=this.tail,e=t.root,i=t.tail;if(e===pn&&i===pn)return this;if(r===pn&&n===pn)return t;n!==pn&&(r=F(r,new Sr(pn,pn,kr(n,this.tail_size))));var o=$(r,e);return new Tr(o,i,t.tail_size)}return d(t,this,function(t,r){return t.insert(r)})},Cr.prototype=Object.create(vn),an.Queue=function(t){return Jr(Q(t))},Cr.prototype[cn]=function(t){return L("Queue",t)},Cr.prototype[sn]=C,Cr.prototype.isEmpty=function(){return this.left===pn&&this.right===pn},Cr.prototype[on]=function(){return y(gr(this.left),g(gr(this.right)))},Cr.prototype[un]=function(t){if(null===t.hash){var r=z(t,function(t){return j(t)});t.hash="(Queue"+T(r,"  ")+")"}return t.hash},Cr.prototype.size=function(){return this.len},Cr.prototype.peek=function(t){if(this.isEmpty()){if(1===arguments.length)return t;throw Error("Cannot peek from an empty queue")}return this.left.car},Cr.prototype.push=function(t){return this.isEmpty()?new Cr(new yr(t,this.left),this.right,this.len+1):new Cr(this.left,new yr(t,this.right),this.len+1)},Cr.prototype.pop=function(){if(this.isEmpty())throw Error("Cannot pop from an empty queue");var t=this.left.cdr;if(t===pn){var r=pn;return dr(this.right,function(t){r=new yr(t,r)}),new Cr(r,pn,this.len-1)}return new Cr(t,this.right,this.len-1)},Cr.prototype.concat=function(t){return d(t,this,function(t,r){return t.push(r)})},Nr.prototype=Object.create(vn),an.Stack=function(t){return Mr(Q(t))},Nr.prototype[on]=function(){return g(gr(this.root))},Nr.prototype[cn]=function(t){return L("Stack",t)},Nr.prototype[sn]=C,Nr.prototype.isEmpty=function(){return this.root===pn},Nr.prototype[un]=function(t){if(null===t.hash){var r=z(t,function(t){return j(t)});t.hash="(Stack"+T(r,"  ")+")"}return t.hash},Nr.prototype.size=function(){return this.len},Nr.prototype.peek=function(t){if(this.isEmpty()){if(1===arguments.length)return t;throw Error("Cannot peek from an empty stack")}return this.root.car},Nr.prototype.push=function(t){return new Nr(new yr(t,this.root),this.len+1)},Nr.prototype.pop=function(){if(this.isEmpty())throw Error("Cannot pop from an empty stack");return new Nr(this.root.cdr,this.len-1)},Nr.prototype.concat=function(t){return d(t,this,function(t,r){return t.push(r)})},Kr.prototype=Object.create(vn),an.Record=function(t){return $r(M(t))},Kr.prototype[cn]=function(t){return N("Record",t)},Kr.prototype[sn]=A,Kr.prototype[un]=function(t){return null===t.hash&&(t.hash="(Record"+D(t,"  ")+")"),t.hash},Kr.prototype[on]=function(){var t=this.keys,r=this.values;return c(z(k(t),function(t){var n=t[0],e=t[1];return[n,r[e]]}))},Kr.prototype.get=function(t){Qr(t);var r=this.keys[t];if(null==r)throw Error("Key "+t+" not found");return this.values[r]},Kr.prototype.set=function(t,r){return this.modify(t,function(){return r})},Kr.prototype.modify=function(t,r){Qr(t);var n=this.keys,e=n[t];if(null==e)throw Error("Key "+t+" not found");var i=this.values,o=lr(i,e,r);return o===i?this:new Kr(n,o)},Kr.prototype.update=function(t){return d(k(t),this,function(t,r){var n=r[0],e=r[1];return t.set(n,e)})};var wn=0;Pr.prototype=Object.create(ln),Pr.prototype[un]=function(t){return"(Ref "+j(t._id)+")"},Pr.prototype.get=function(){return this._value},Pr.prototype.set=function(t){var r=this._value;t!==r&&(this._value=t,null!=this._onchange&&this._onchange(r,t))},Pr.prototype.modify=function(t){this.set(t(this.get()))},function(t,r){"function"==typeof define&&define.amd?define(["exports"],r):"object"==typeof exports?r(exports):(t.Immutable={},r(t.Immutable))}(this,function(t){t.equal=Hr,t.fromJS=Wr,t.toJS=U,t.isDict=rr,t.isSet=fr,t.isSortedDict=nr,t.isSortedSet=sr,t.isList=Ur,t.isQueue=Rr,t.isStack=Lr,t.isImmutable=Vr,t.SortedDict=er,t.SortedSet=ar,t.Dict=ir,t.Set=hr,t.List=Ar,t.Queue=Jr,t.Stack=Mr,t.simpleSort=G,t.isRecord=qr,t.Record=$r,t.toJSON=J,t.fromJSON=R,t.deref=Fr,t.Ref=Gr,t.isRef=Br,t.isTag=r,t.isUUIDTag=n,t.Tag=e,t.UUIDTag=i,t.each=x,t.map=z,t.keep=O,t.findIndex=S,t.reverse=_,t.foldl=d,t.foldr=w,t.join=b})}).call(this);