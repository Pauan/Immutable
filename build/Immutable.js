(function(){"use strict";function t(t){return"string"==typeof t&&Wr.test(t)}function r(t){var r=typeof t;return"symbol"===r||"string"===r&&(Xr.test(t)||Yr.test(t))}function n(t){return"string"==typeof t&&Yr.test(t)}function e(){if(0===arguments.length)return"(Tag "+Gr+" "+ ++Hr+")";throw Error("Expected 0 arguments but got "+arguments.length)}function i(r){if(1===arguments.length){if(t(r))return"(UUIDTag "+r+")";throw Error("Expected a lower-case UUID, but got: "+r)}throw Error("Expected 1 argument but got "+arguments.length)}function o(t){return Object(t)===t}function u(t){if(o(t)){var r=Object.getPrototypeOf(t);return null===r||r===Object.prototype}return!1}function f(t,r){return Array(r+1).join(t)}function a(t,r,n){var e=Math.max(0,r-t.length);return t+f(n,e)}function s(t,r){if(t.length){var n="\n"+r;return n+t.map(function(t){return t.replace(/\n/g,n)}).join(n)}return""}function h(t){return t}function c(t){var r=0;return{next:function(){return r<t.length?{value:t[r++]}:{done:!0}}}}function p(t){var r=t[Zr];if(null!=r)return r.call(t);if(Array.isArray(t))return c(t);if("string"==typeof t)return c(t);throw Error("Cannot iter: "+t)}function l(t){var r={};return r[Zr]=t,r}function v(t,r){for(;;){var n=t.next();if(n.done)break;r(n.value)}}function y(t,r){return{next:function(){var n=t.next();return n.done?{done:!0}:{value:r(n.value)}}}}function g(t,r){var n=!1,e=!1;return{next:function(){for(;;)if(n){if(e)return{done:!0};var i=r.next();if(!i.done)return i;e=!0}else{var i=t.next();if(!i.done)return i;n=!0}}}}function d(t){var r=[];v(t,function(t){r.push(t)});var n=r.length;return{next:function(){return n?{value:r[--n]}:{done:!0}}}}function w(t,r){var n=!1,e=null;return{next:function(){for(;;){if(n)return{done:!0};if(null===e){var i=t.next();i.done?n=!0:e=r(i.value)}else{var i=e.next();if(!i.done)return i;e=null}}}}}function m(t){return u(t)?k(Object.keys(t),function(r){return[r,t[r]]}):t}function b(t,r){v(p(t),r)}function E(t,r,n){for(var e=p(t),i=0;;){var o=e.next();if(o.done){if(3===arguments.length)return n;throw Error("findIndex did not find anything")}if(r(o.value))return i;++i}}function k(t,r){return l(function(){return y(p(t),r)})}function x(t){return l(function(){return d(p(t))})}function S(t,r){return l(function(){var n=p(t);return{next:function(){for(;;){var t=n.next();if(t.done)return{done:!0};if(r(t.value))return t}}}})}function z(t){return'"'+t.replace(/[\\\"\n]/g,function(t){return"\n"===t?t+" ":"\\"+t})+'"'}function _(t){var n=typeof t;if("string"===n)return r(t)?t:z(t);if("number"===n||"boolean"===n||"undefined"===n||null===t)return""+t;var e=t[tn];if(null!=e)return e(t);var i="(Mutable "+ ++rn+")";return Object.defineProperty(t,tn,{configurable:!1,enumerable:!1,writable:!1,value:function(){return i}}),i}function O(t,r){var n=[],e=0;b(t,function(t){var r=_(t[0]),i=_(t[1]);r=r.split(/\n/),b(r,function(t){e=Math.max(e,t.length)}),n.push({key:r,value:i})});var r="  ";return n=n.map(function(t){var r=t.key.length-1;t.key[r]=a(t.key[r],e," ");var n=t.key.join("\n"),i=t.value.replace(/\n/g,"\n"+f(" ",e+3));return n+" = "+i}),s(n,r)}function I(t){if(o(t)){var r=t[nn];return null!=r?r(t):t}return t}function j(t){var r={};return b(t,function(t){var n=t[0],e=t[1];if("string"!=typeof n)throw Error("Cannot convert to JavaScript: expected key to be string or Tag but got "+n);r[n]=I(e)}),r}function D(t){var r=[];return b(t,function(t){r.push(I(t))}),r}function T(t){if(o(t)){var e=t[on];if(null!=e){var i=en[e];if(null!=i)return i(t);throw Error("Cannot handle type "+e)}return t}if(r(t)){if(n(t))return t;throw Error("Cannot convert Tag from JSON, use UUIDTag instead: "+t)}return t}function U(t){if(o(t)){var e=t[un];return null!=e?e(t):t}if(r(t)){if(n(t))return t;throw Error("Cannot convert Tag to JSON, use UUIDTag instead: "+t)}return t}function A(t,r){var n={};return n[on]=t,n.keys=[],n.values=[],b(r,function(t){var r=t[0],e=t[1];n.keys.push(U(r)),n.values.push(U(e))}),n}function C(t,r){var n={};return n[on]=t,n.values=[],b(r,function(t){n.values.push(U(t))}),n}function R(t){for(var r=t.keys,n=t.values,e=r.length,i=Array(e),o=0;e>o;++o)i[o]=[T(r[o]),T(n[o])];return i}function J(t){for(var r=t.values,n=r.length,e=Array(n),i=0;n>i;++i)e[i]=T(r[i]);return e}function N(t,r){return t>r?t:r}function L(t,r,n){var e=r.depth,i=n.depth;if(e>i+1){var o=r.left,u=r.right;return u.depth>o.depth?u.copy(r.copy(o,u.left),t.copy(u.right,n)):r.copy(o,t.copy(u,n))}if(i>e+1){var f=n.right,a=n.left;return a.depth>f.depth?a.copy(t.copy(r,a.left),n.copy(a.right,f)):n.copy(t.copy(r,a),f)}return t.copy(r,n)}function M(t,r){if(t===fn)return r;if(r===fn)return t;if(t.depth<r.depth){var n=M(t,r.left);return L(r,n,r.right)}var e=M(t.right,r);return L(t,t.left,e)}function Q(t,r){return t===fn?r:L(t,Q(t.left,r),t.right)}function K(t,r){return t===fn?r:L(t,t.left,K(t.right,r))}function q(t){for(var r=[];t!==fn;)r.push(t),t=t.left;return{next:function(){if(r.length){var n=r.pop();for(t=n.right;t!==fn;)r.push(t),t=t.left;return{value:n}}return{done:!0}}}}function $(t,r){return t===r?0:r>t?-1:1}function P(t,r,n){for(;t!==fn;){var e=r(n,t.hash);if(0===e)break;t=0>e?t.left:t.right}return t}function F(t,r,n,e){if(t===fn)return e;var i=t.left,o=t.right,u=r(n,t.hash);if(0===u)return t.modify(e);if(0>u){var f=F(i,r,n,e);return f===i?t:L(t,f,o)}var f=F(o,r,n,e);return f===o?t:L(t,i,f)}function B(t,r,n,e,i){if(t===fn)throw Error("Key "+e+" not found");var o=t.left,u=t.right,f=r(n,t.hash);if(0===f)return t.modify({key:e,hash:n,value:i(t.value)});if(0>f){var a=B(o,r,n,e,i);return a===o?t:L(t,a,u)}var a=B(u,r,n,e,i);return a===u?t:L(t,o,a)}function G(t,r,n){if(t===fn)return t;var e=t.left,i=t.right,o=r(n,t.hash);if(0===o)return M(e,i);if(0>o){var u=G(e,r,n);return u===e?t:L(t,u,i)}var u=G(i,r,n);return u===i?t:L(t,e,u)}function H(){return _(this)}function V(t,r,n,e,i){this.left=t,this.right=r,this.hash=n,this.key=e,this.value=i,this.depth=N(t.depth,r.depth)+1}function W(t,r,n){this.root=t,this.sort=r,this.hash_fn=n,this.hash=null}function X(t){return t instanceof W}function Y(t){return X(t)&&t.hash_fn===h}function Z(t,r){return null!=r?Y(r)&&r.sort===t?r:new W(fn,t,h).merge(r):new W(fn,t,h)}function tr(t){return null!=t?X(t)&&!Y(t)?t:new W(fn,$,_).merge(t):new W(fn,$,_)}function rr(t,r,n,e){this.left=t,this.right=r,this.hash=n,this.key=e,this.depth=N(t.depth,r.depth)+1}function nr(t,r,n){this.root=t,this.sort=r,this.hash_fn=n,this.hash=null}function er(t){return t instanceof nr}function ir(t){return er(t)&&t.hash_fn===h}function or(t,r){return null!=r?ir(r)&&r.sort===t?r:new nr(fn,t,h).union(r):new nr(fn,t,h)}function ur(t){return null!=t?er(t)&&!ir(t)?t:new nr(fn,$,_).union(t):new nr(fn,$,_)}function fr(t){for(var r=t.length,n=Array(r),e=0;r>e;++e)n[e]=t[e];return n}function ar(t,r,n){for(var e=t.length+1,i=Array(e),o=0;r>o;)i[o]=t[o],++o;for(i[o]=n,++o;e>o;)i[o]=t[o-1],++o;return i}function sr(t,r,n){var e=t[r],i=n(e);if(e===i)return t;var o=fr(t);return o[r]=i,o}function hr(t,r){for(var n=t.length-1,e=Array(n),i=0;r>i;)e[i]=t[i],++i;for(;n>i;)e[i]=t[i+1],++i;return e}function cr(t,r){this.car=t,this.cdr=r}function pr(t){return{next:function(){if(t===fn)return{done:!0};var r=t.car;return t=t.cdr,{value:r}}}}function lr(t,r){for(;t!==fn;)r(t.car),t=t.cdr}function vr(t,r){if(t.length){var n=t[t.length-1];n.length+r.length<=hn?t[t.length-1]=n.concat(r):t.push(r)}else t.push(r)}function yr(t,r,n){if(n>r){var e=pn((r+n)/2),i=yr(t,r,e),o=yr(t,e+1,n);return new br(i,o,t[e])}return fn}function gr(t){return yr(t,0,t.length)}function dr(t,r,n){0>r&&(r=0);var e=t.length;return n>e&&(n=e),0===r&&n===e?t:t.slice(r,n)}function wr(t,r){for(var n=Array(r);r--;)n[r]=t.car,t=t.cdr;return n}function mr(t,r,n){for(;--r!==n;)t=t.cdr;return t.car}function br(t,r,n){this.left=t,this.right=r,this.array=n,this.size=t.size+r.size+n.length,this.depth=N(t.depth,r.depth)+1}function Er(t,r){return t>=0&&r>t}function kr(t,r){for(;;){var n=t.left,e=n.size;if(e>r)t=n;else{r-=e;var i=t.array,o=i.length;if(o>r)return i[r];r-=o,t=t.right}}}function xr(t,r,n){if(t===fn)return new br(fn,fn,[n]);var e=t.left,i=t.right,o=e.size;if(o>r){var u=xr(e,r,n);return L(t,u,i)}r-=o;var f=t.array,a=f.length;if(a>=r){if(f=ar(f,r,n),a===hn){var s=cn(f.length/2),h=f.slice(0,s),c=f.slice(s);return e.depth<i.depth?new br(K(e,new br(fn,fn,h)),i,c):new br(e,Q(i,new br(fn,fn,c)),h)}return new br(e,i,f)}var u=xr(i,r-a,n);return L(t,e,u)}function Sr(t,r,n){var e=t.left,i=t.right,o=e.size;if(o>r){var u=Sr(e,r,n);return u===e?t:t.copy(u,i)}r-=o;var f=t.array,a=f.length;if(a>r){var s=sr(f,r,n);return s===f?t:new br(e,i,s)}var u=Sr(i,r-a,n);return u===i?t:t.copy(e,u)}function zr(t,r){var n=t.left,e=t.right,i=n.size;if(i>r){var o=zr(n,r);return L(t,o,e)}r-=i;var u=t.array,f=u.length;if(f>r)return u=hr(u,r),0===u.length?M(n,e):new br(n,e,u);var o=zr(e,r-f);return L(t,n,o)}function _r(t,r,n,e){if(r!==fn){var i=r.left,o=i.size;o>n&&_r(t,i,n,e);var u=r.array,f=u.length;n-=o,e-=o,f>n&&e>0&&vr(t,dr(u,n,e)),e>f&&_r(t,r.right,n-f,e-f)}}function Or(t,r,n){this.root=t,this.tail=r,this.tail_size=n,this.hash=null}function Ir(t){return t instanceof Or}function jr(t){return null!=t?t instanceof Or?t:new Or(fn,fn,0).concat(t):new Or(fn,fn,0)}function Dr(t,r,n){this.left=t,this.right=r,this.len=n,this.hash=null}function Tr(t){return t instanceof Dr}function Ur(t){return null!=t?t instanceof Dr?t:new Dr(fn,fn,0).concat(t):new Dr(fn,fn,0)}function Ar(t,r){this.root=t,this.len=r,this.hash=null}function Cr(t){return t instanceof Ar}function Rr(t){return null!=t?t instanceof Ar?t:new Ar(fn,0).concat(t):new Ar(fn,0)}function Jr(t){if("string"!=typeof t)throw Error("Expected key to be a string or Tag but got "+t)}function Nr(t,r){this.keys=t,this.values=r,this.hash=null}function Lr(t){return t instanceof Nr}function Mr(t){var r={},n=[];if(null!=t){if(Lr(t))return t;b(m(t),function(t){var e=t[0],i=t[1];Jr(e),r[e]=n.push(i)-1})}return new Nr(r,n)}function Qr(t,r){this._id=++ln,this._value=t,this._onchange=r}function Kr(t){return qr(t)?t.get():t}function qr(t){return t instanceof Qr}function $r(t,r){if(arguments.length<1||arguments.length>2)throw Error("Expected 1 to 2 arguments but got "+arguments.length);return new Qr(t,r)}function Pr(t,r){return t===r||_(t)===_(r)}function Fr(t){if(o(t))return Object.isFrozen(t)||X(t)||er(t)||Ir(t)||Tr(t)||Cr(t)||Lr(t);var r=typeof t;return"string"===r||"number"===r||"boolean"===r||"symbol"===r||null==t}function Br(t){if(Array.isArray(t)){for(var r=jr(),n=0,e=t.length;e>n;++n)r=r.insert(Br(t[n]));return r}if(u(t)){var r=tr();for(var i in t)r=r.set(i,Br(t[i]));return r}return t}var Gr="48de6fff-9d11-472d-a76f-ed77a59a5cbc",Hr=0,Vr="[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}",Wr=RegExp("^"+Vr+"$"),Xr=RegExp("^\\(Tag "+Gr+" [0-9]+\\)$"),Yr=RegExp("^\\(UUIDTag "+Vr+"\\)$"),Zr="undefined"!=typeof Symbol&&void 0!==Symbol.iterator?Symbol.iterator:i("6199065c-b518-4cb3-8b41-ab70a9769ec3"),tn=i("e1c3818d-4c4f-4703-980a-00969e4ca900"),rn=0,nn=i("1b75a273-16bd-4248-be8a-e4b5e8c4b523"),en={},on=i("89d8297c-d95e-4ce9-bc9b-6b6f73fa6a37"),un=i("99e14916-bc99-4c48-81aa-299cf1ad6de3"),fn={};fn.depth=0,fn.size=0;var an={},sn={};an.toString=sn.toString=H,an.inspect=sn.inspect=H,V.prototype.copy=function(t,r){return new V(t,r,this.hash,this.key,this.value)},V.prototype.modify=function(t){var r=t.hash,n=t.key,e=t.value;return this.hash===r&&this.key===n&&this.value===e?this:new V(this.left,this.right,r,n,e)},W.prototype=Object.create(sn),W.prototype[Zr]=function(){return y(q(this.root),function(t){return[t.key,t.value]})},W.prototype[tn]=function(t){return null===t.hash&&(t.hash=X(t)&&!Y(t)?"(Dict"+O(t,"  ")+")":"(SortedDict "+_(t.sort)+O(t,"  ")+")"),t.hash},en.Dict=function(t){return tr(R(t))},W.prototype[un]=function(t){if(X(t)&&!Y(t))return A("Dict",t);throw Error("Cannot convert SortedDict to JSON")},W.prototype[nn]=j,W.prototype.isEmpty=function(){return this.root===fn},W.prototype.has=function(t){return P(this.root,this.sort,this.hash_fn(t))!==fn},W.prototype.get=function(t,r){var n=P(this.root,this.sort,this.hash_fn(t));if(n===fn){if(2===arguments.length)return r;throw Error("Key "+t+" not found")}return n.value},W.prototype.set=function(t,r){var n=this.root,e=this.sort,i=this.hash_fn,o=i(t),u=F(n,e,o,new V(fn,fn,o,t,r));return u===n?this:new W(u,e,i)},W.prototype.remove=function(t){var r=this.root,n=this.sort,e=this.hash_fn,i=G(r,n,e(t));return i===r?this:new W(i,n,e)},W.prototype.modify=function(t,r){var n=this.root,e=this.sort,i=this.hash_fn,o=B(n,e,i(t),t,r);return o===n?this:new W(o,e,i)},W.prototype.merge=function(t){var r=this;return b(m(t),function(t){var n=t[0],e=t[1];r=r.set(n,e)}),r},rr.prototype.copy=function(t,r){return new rr(t,r,this.hash,this.key)},rr.prototype.modify=function(t){var r=t.hash,n=t.key;return this.hash===r&&this.key===n?this:new rr(this.left,this.right,r,n)},nr.prototype=Object.create(sn),en.Set=function(t){return ur(J(t))},nr.prototype[Zr]=function(){return y(q(this.root),function(t){return t.key})},nr.prototype[un]=function(t){if(er(t)&&!ir(t))return C("Set",t);throw Error("Cannot convert SortedSet to JSON")},nr.prototype[tn]=function(t){if(null===t.hash){var r=[];b(t,function(t){r.push(_(t))});var n="  ";t.hash=er(t)&&!ir(t)?"(Set"+s(r,n)+")":"(SortedSet "+_(t.sort)+s(r,n)+")"}return t.hash},nr.prototype[nn]=D,nr.prototype.isEmpty=function(){return this.root===fn},nr.prototype.has=function(t){return P(this.root,this.sort,this.hash_fn(t))!==fn},nr.prototype.add=function(t){var r=this.root,n=this.sort,e=this.hash_fn,i=e(t),o=F(r,n,i,new rr(fn,fn,i,t));return o===r?this:new nr(o,n,e)},nr.prototype.remove=function(t){var r=this.root,n=this.sort,e=this.hash_fn,i=G(r,n,e(t));return i===r?this:new nr(i,n,e)},nr.prototype.union=function(t){var r=this;return b(t,function(t){r=r.add(t)}),r},nr.prototype.intersect=function(t){var r=this;if(r.isEmpty())return r;var n=new nr(fn,r.sort,r.hash_fn);return b(t,function(t){r.has(t)&&(n=n.add(t))}),n},nr.prototype.disjoint=function(t){var r=this;return b(t,function(t){r=r.has(t)?r.remove(t):r.add(t)}),r},nr.prototype.subtract=function(t){var r=this;return r.isEmpty()||b(t,function(t){r=r.remove(t)}),r};var hn=125,cn=Math.ceil,pn=Math.floor;br.prototype.copy=function(t,r){return new br(t,r,this.array)},Or.prototype=Object.create(sn),en.List=function(t){return jr(J(t))},Or.prototype[un]=function(t){return C("List",t)},Or.prototype[tn]=function(t){if(null===t.hash){var r=[];b(t,function(t){r.push(_(t))}),t.hash="(List"+s(r,"  ")+")"}return t.hash},Or.prototype[nn]=D,Or.prototype[Zr]=function(){var t=w(q(this.root),function(t){return p(t.array)});return g(t,d(pr(this.tail)))},Or.prototype.isEmpty=function(){return this.root===fn&&this.tail===fn},Or.prototype.size=function(){return this.root.size+this.tail_size},Or.prototype.has=function(t){var r=this.size();return 0>t&&(t+=r),Er(t,r)},Or.prototype.get=function(t,r){var n=this.size();if(0>t&&(t+=n),Er(t,n)){var e=this.root,i=e.size;return i>t?kr(e,t):mr(this.tail,this.tail_size,t-i)}if(2===arguments.length)return r;throw Error("Index "+t+" is not valid")},Or.prototype.insert=function(t,r){1===arguments.length&&(r=-1);var n=this.size();0>r&&(r+=n+1);var e=this.root,i=this.tail,o=this.tail_size;if(r===n){if(o===hn){var u=K(e,new br(fn,fn,wr(i,o)));return new Or(u,new cr(t,fn),1)}return new Or(e,new cr(t,i),o+1)}if(Er(r,n)){var f=e.size;if(f>r)return new Or(xr(e,r,t),i,o);var a=ar(wr(i,o),r-f,t),u=K(e,new br(fn,fn,a));return new Or(u,fn,0)}throw Error("Index "+r+" is not valid")},Or.prototype.remove=function(t){0===arguments.length&&(t=-1);var r=this.size();0>t&&(t+=r);var n=this.root,e=this.tail,i=this.tail_size;if(e!==fn&&t===r-1)return new Or(n,e.cdr,i-1);if(Er(t,r)){var o=n.size;if(o>t)return new Or(zr(n,t),e,i);var u=hr(wr(e,i),t-o),f=K(n,new br(fn,fn,u));return new Or(f,fn,0)}throw Error("Index "+t+" is not valid")},Or.prototype.modify=function(t,r){var n=this.size();if(0>t&&(t+=n),Er(t,n)){var e=this.root,i=this.tail,o=this.tail_size,u=e.size;if(i!==fn&&t===n-1){var f=r(i.car);return f===i.car?this:new Or(e,new cr(f,i.cdr),o)}if(u>t){var a=Sr(e,t,r);return a===e?this:new Or(a,i,o)}var s=wr(i,o),h=sr(s,t-u,r);if(h===s)return this;var a=K(e,new br(fn,fn,h));return new Or(a,fn,0)}throw Error("Index "+t+" is not valid")},Or.prototype.slice=function(t,r){var n=this.size();if(null==t&&(t=0),null==r&&(r=n),0>t&&(t+=n),0>r&&(r+=n),0===t&&r===n)return this;if(t>r)throw Error("Index "+t+" is greater than index "+r);if(Er(t,n)){if(t===r)return new Or(fn,fn,0);if(r>0&&n>=r){var e=this.root,i=e.size,o=[];if(i>=t&&_r(o,e,t,r),r>i){var u=wr(this.tail,this.tail_size);vr(o,dr(u,t-i,r-i))}return new Or(gr(o),fn,0)}throw Error("Index "+r+" is not valid")}throw Error("Index "+t+" is not valid")},Or.prototype.concat=function(t){if(t instanceof Or){var r=this.root,n=this.tail,e=t.root,i=t.tail;if(e===fn&&i===fn)return this;if(r===fn&&n===fn)return t;n!==fn&&(r=K(r,new br(fn,fn,wr(n,this.tail_size))));var o=M(r,e);return new Or(o,i,t.tail_size)}var u=this;return b(t,function(t){u=u.insert(t)}),u},Dr.prototype=Object.create(sn),en.Queue=function(t){return Ur(J(t))},Dr.prototype[un]=function(t){return C("Queue",t)},Dr.prototype[nn]=D,Dr.prototype.isEmpty=function(){return this.left===fn&&this.right===fn},Dr.prototype[Zr]=function(){return g(pr(this.left),d(pr(this.right)))},Dr.prototype[tn]=function(t){if(null===t.hash){var r=[];b(t,function(t){r.push(_(t))}),t.hash="(Queue"+s(r,"  ")+")"}return t.hash},Dr.prototype.size=function(){return this.len},Dr.prototype.peek=function(t){if(this.isEmpty()){if(1===arguments.length)return t;throw Error("Cannot peek from an empty queue")}return this.left.car},Dr.prototype.push=function(t){return this.isEmpty()?new Dr(new cr(t,this.left),this.right,this.len+1):new Dr(this.left,new cr(t,this.right),this.len+1)},Dr.prototype.pop=function(){if(this.isEmpty())throw Error("Cannot pop from an empty queue");var t=this.left.cdr;if(t===fn){var r=fn;return lr(this.right,function(t){r=new cr(t,r)}),new Dr(r,fn,this.len-1)}return new Dr(t,this.right,this.len-1)},Dr.prototype.concat=function(t){var r=this;return b(t,function(t){r=r.push(t)}),r},Ar.prototype=Object.create(sn),en.Stack=function(t){return Rr(J(t))},Ar.prototype[Zr]=function(){return d(pr(this.root))},Ar.prototype[un]=function(t){return C("Stack",t)},Ar.prototype[nn]=D,Ar.prototype.isEmpty=function(){return this.root===fn},Ar.prototype[tn]=function(t){if(null===t.hash){var r=[];b(t,function(t){r.push(_(t))}),t.hash="(Stack"+s(r,"  ")+")"}return t.hash},Ar.prototype.size=function(){return this.len},Ar.prototype.peek=function(t){if(this.isEmpty()){if(1===arguments.length)return t;throw Error("Cannot peek from an empty stack")}return this.root.car},Ar.prototype.push=function(t){return new Ar(new cr(t,this.root),this.len+1)},Ar.prototype.pop=function(){if(this.isEmpty())throw Error("Cannot pop from an empty stack");return new Ar(this.root.cdr,this.len-1)},Ar.prototype.concat=function(t){var r=this;return b(t,function(t){r=r.push(t)}),r},Nr.prototype=Object.create(sn),en.Record=function(t){return Mr(R(t))},Nr.prototype[un]=function(t){return A("Record",t)},Nr.prototype[nn]=j,Nr.prototype[tn]=function(t){return null===t.hash&&(t.hash="(Record"+O(t,"  ")+")"),t.hash},Nr.prototype[Zr]=function(){var t=this.keys,r=this.values;return p(k(m(t),function(t){var n=t[0],e=t[1];return[n,r[e]]}))},Nr.prototype.get=function(t){Jr(t);var r=this.keys[t];if(null==r)throw Error("Key "+t+" not found");return this.values[r]},Nr.prototype.set=function(t,r){return this.modify(t,function(){return r})},Nr.prototype.modify=function(t,r){Jr(t);var n=this.keys,e=n[t];if(null==e)throw Error("Key "+t+" not found");var i=this.values,o=sr(i,e,r);return o===i?this:new Nr(n,o)},Nr.prototype.update=function(t){var r=this;return b(m(t),function(t){var n=t[0],e=t[1];r=r.set(n,e)}),r};var ln=0;Qr.prototype=Object.create(an),Qr.prototype[tn]=function(t){return"(Ref "+_(t._id)+")"},Qr.prototype.get=function(){return this._value},Qr.prototype.set=function(t){var r=this._value;t!==r&&(this._value=t,null!=this._onchange&&this._onchange(r,t))},Qr.prototype.modify=function(t){this.set(t(this.get()))},function(t,r){"function"==typeof define&&define.amd?define(["exports"],r):"object"==typeof exports?r(exports):(t.Immutable={},r(t.Immutable))}(this,function(t){t.equal=Pr,t.fromJS=Br,t.toJS=I,t.isDict=X,t.isSet=er,t.isSortedDict=Y,t.isSortedSet=ir,t.isList=Ir,t.isQueue=Tr,t.isStack=Cr,t.isImmutable=Fr,t.SortedDict=Z,t.SortedSet=or,t.Dict=tr,t.Set=ur,t.List=jr,t.Queue=Ur,t.Stack=Rr,t.simpleSort=$,t.isRecord=Lr,t.Record=Mr,t.toJSON=U,t.fromJSON=T,t.deref=Kr,t.Ref=$r,t.isRef=qr,t.isTag=r,t.isUUIDTag=n,t.Tag=e,t.UUIDTag=i,t.each=b,t.map=k,t.keep=S,t.findIndex=E,t.reverse=x})}).call(this);