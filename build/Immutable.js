(function(){"use strict";function t(t){return Object(t)===t}function r(r){if(t(r)){var n=Object.getPrototypeOf(r);return null===n||n===Object.prototype}return!1}function n(t,r){return Array(r+1).join(t)}function e(t,r,e){var o=Math.max(0,r-t.length);return t+n(e,o)}function o(t,r){if(t.length){var n="\n"+r;return n+t.map(function(t){return t.replace(/\n/g,n)}).join(n)}return""}function i(t){var r=typeof t;if("string"===r)return'"'+t.replace(/\\/g,"\\\\").replace(/\"/g,'\\"').replace(/\n/g,"\n ")+'"';if("number"===r||"boolean"===r||"undefined"===r||null===t)return""+t;var n=t[pr];if(null!=n)return n(t);var e="(Mutable "+ ++lr+")";return Object.defineProperty(t,pr,{configurable:!1,enumerable:!1,writable:!1,value:function(){return e}}),e}function u(t,r){var u=[],h=0;t.forEach(function(t){var r=i(t[0]),n=i(t[1]);r=r.split(/\n/),r.forEach(function(t){h=Math.max(h,t.length)}),u.push({key:r,value:n})});var r="  ";return u=u.map(function(t){var r=t.key.length-1;t.key[r]=e(t.key[r],h," ");var o=t.key.join("\n"),i=t.value.replace(/\n/g,"\n"+n(" ",h+3));return o+" = "+i}),o(u,r)}function h(r){if(t(r)){var n=r[yr];return null!=n?n(r):r}return r}function f(t){var r={};return t.forEach(function(t){var n=t[0],e=t[1];if("string"!=typeof n)throw Error("Cannot convert to JavaScript: expected string key but got "+n);r[n]=h(e)}),r}function s(t){var r=[];return t.forEach(function(t){r.push(h(t))}),r}function a(t,r){return t>r?t:r}function c(t,r,n){var e=r.depth,o=n.depth;if(e>o+1){var i=r.left,u=r.right;return u.depth>i.depth?u.copy(r.copy(i,u.left),t.copy(u.right,n)):r.copy(i,t.copy(u,n))}if(o>e+1){var h=n.right,f=n.left;return f.depth>h.depth?f.copy(t.copy(r,f.left),n.copy(f.right,h)):n.copy(t.copy(r,f),h)}return t.copy(r,n)}function p(t,r){if(t===vr)return r;if(r===vr)return t;if(t.depth<r.depth){var n=p(t,r.left);return c(r,n,r.right)}var e=p(t.right,r);return c(t,t.left,e)}function l(t,r){return t===vr?r:c(t,l(t.left,r),t.right)}function y(t,r){return t===vr?r:c(t,t.left,y(t.right,r))}function v(t,r){return t===r?0:r>t?-1:1}function g(t,r){return t=i(t),r=i(r),v(t,r)}function E(t,r,n){for(;t!==vr;){var e=r(n,t.key);if(0===e)break;t=0>e?t.left:t.right}return t}function d(t,r,n,e){if(t===vr)return e;var o=t.left,i=t.right,u=r(n,t.key);if(0===u)return t.modify(e);if(0>u){var h=d(o,r,n,e);return h===o?t:c(t,h,i)}var h=d(i,r,n,e);return h===i?t:c(t,o,h)}function w(t,r,n,e){if(t===vr)throw Error("Key "+n+" not found");var o=t.left,i=t.right,u=r(n,t.key);if(0===u)return t.modify({key:n,value:e(t.value)});if(0>u){var h=w(o,r,n,e);return h===o?t:c(t,h,i)}var h=w(i,r,n,e);return h===i?t:c(t,o,h)}function m(t,r,n){if(t===vr)return t;var e=t.left,o=t.right,i=r(n,t.key);if(0===i)return p(e,o);if(0>i){var u=m(e,r,n);return u===e?t:c(t,u,o)}var u=m(o,r,n);return u===o?t:c(t,e,u)}function k(t,r,n,e){this.left=t,this.right=r,this.key=n,this.value=e,this.depth=a(t.depth,r.depth)+1}function z(t,r){this.root=t,this.sort=r,this.hash=null}function b(t,r,n){this.left=t,this.right=r,this.key=n,this.depth=a(t.depth,r.depth)+1}function S(t,r){this.root=t,this.sort=r,this.hash=null}function _(t){for(var r=t.length,n=Array(r),e=0;r>e;++e)n[e]=t[e];return n}function x(t,r,n){for(var e=t.length+1,o=Array(e),i=0;r>i;)o[i]=t[i],++i;for(o[i]=n,++i;e>i;)o[i]=t[i-1],++i;return o}function j(t,r,n){var e=t[r],o=n(e);if(e===o)return t;var i=_(t);return i[r]=o,i}function O(t,r){for(var n=t.length-1,e=Array(n),o=0;r>o;)e[o]=t[o],++o;for(;n>o;)e[o]=t[o+1],++o;return e}function A(t,r){this.car=t,this.cdr=r}function C(t,r){if(t.length){var n=t[t.length-1];n.length+r.length<=Er?t[t.length-1]=n.concat(r):t.push(r)}else t.push(r)}function D(t,r,n){if(n>r){var e=wr((r+n)/2),o=D(t,r,e),i=D(t,e+1,n);return new J(o,i,t[e])}return vr}function I(t){return D(t,0,t.length)}function R(t,r,n){0>r&&(r=0);var e=t.length;return n>e&&(n=e),0===r&&n===e?t:t.slice(r,n)}function M(t,r){for(var n=Array(r);r--;)n[r]=t.car,t=t.cdr;return n}function B(t,r,n){for(;--r!==n;)t=t.cdr;return t.car}function J(t,r,n){this.left=t,this.right=r,this.array=n,this.size=t.size+r.size+n.length,this.depth=a(t.depth,r.depth)+1}function K(t,r){return t>=0&&r>t}function q(t,r){for(;;){var n=t.left,e=n.size;if(e>r)t=n;else{r-=e;var o=t.array,i=o.length;if(i>r)return o[r];r-=i,t=t.right}}}function L(t,r,n){if(t===vr)return new J(vr,vr,[n]);var e=t.left,o=t.right,i=e.size;if(i>r){var u=L(e,r,n);return c(t,u,o)}r-=i;var h=t.array,f=h.length;if(f>=r){if(h=x(h,r,n),f===Er){var s=dr(h.length/2),a=h.slice(0,s),p=h.slice(s);return e.depth<o.depth?new J(y(e,new J(vr,vr,a)),o,p):new J(e,l(o,new J(vr,vr,p)),a)}return new J(e,o,h)}var u=L(o,r-f,n);return c(t,e,u)}function Q(t,r,n){var e=t.left,o=t.right,i=e.size;if(i>r){var u=Q(e,r,n);return u===e?t:t.copy(u,o)}r-=i;var h=t.array,f=h.length;if(f>r){var s=j(h,r,n);return s===h?t:new J(e,o,s)}var u=Q(o,r-f,n);return u===o?t:t.copy(e,u)}function P(t,r){var n=t.left,e=t.right,o=n.size;if(o>r){var i=P(n,r);return c(t,i,e)}r-=o;var u=t.array,h=u.length;if(h>r)return u=O(u,r),0===u.length?p(n,e):new J(n,e,u);var i=P(e,r-h);return c(t,n,i)}function F(t,r,n,e){if(r!==vr){var o=r.left,i=o.size;i>n&&F(t,o,n,e);var u=r.array,h=u.length;n-=i,e-=i,h>n&&e>0&&C(t,R(u,n,e)),e>h&&F(t,r.right,n-h,e-h)}}function G(t,r,n){this.root=t,this.tail=r,this.tail_size=n,this.hash=null}function H(t,r,n){this.left=t,this.right=r,this.len=n,this.hash=null}function N(t,r){this.root=t,this.len=r,this.hash=null}function T(t,r){this.keys=t,this.values=r,this.hash=null}function U(t,r){return t===r||i(t)===i(r)}function V(t){return t instanceof z}function W(t){return t instanceof S}function X(t){return V(t)&&t.sort!==g}function Y(t){return W(t)&&t.sort!==g}function Z(t){return t instanceof G}function $(t){return t instanceof H}function tr(t){return t instanceof N}function rr(t){return t instanceof T}function nr(t){return V(t)||W(t)||Z(t)||$(t)||tr(t)||rr(t)}function er(t){if(Array.isArray(t)){for(var n=sr(),e=0,o=t.length;o>e;++e)n=n.insert(er(t[e]));return n}if(r(t)){var n=hr();for(var i in t)n=n.set(i,er(t[i]));return n}return t}function or(t){var n={},e=[];if(null!=t){if(t instanceof T)return t;r(t)?Object.keys(t).forEach(function(r){if("string"!=typeof r)throw Error("Expected string key but got "+r);n[r]=e.push(t[r])-1}):t.forEach(function(t){var r=t[0],o=t[1];if("string"!=typeof r)throw Error("Expected string key but got "+r);n[r]=e.push(o)-1})}return new T(n,e)}function ir(t,n){if(null!=n){if(n instanceof z&&n.sort===t)return n;var e=new z(vr,t);return r(n)?Object.keys(n).forEach(function(t){e=e.set(t,n[t])}):n.forEach(function(t){var r=t[0],n=t[1];e=e.set(r,n)}),e}return new z(vr,t)}function ur(t,r){if(null!=r){if(r instanceof S&&r.sort===t)return r;var n=new S(vr,t);return r.forEach(function(t){n=n.add(t)}),n}return new S(vr,t)}function hr(t){return ir(g,t)}function fr(t){return ur(g,t)}function sr(t){if(null!=t){if(t instanceof G)return t;var r=new G(vr,vr,0);return t.forEach(function(t){r=r.insert(t)}),r}return new G(vr,vr,0)}function ar(t){if(null!=t){if(t instanceof H)return t;var r=new H(vr,vr,0);return t.forEach(function(t){r=r.push(t)}),r}return new H(vr,vr,0)}function cr(t){if(null!=t){if(t instanceof N)return t;var r=new N(vr,0);return t.forEach(function(t){r=r.push(t)}),r}return new N(vr,0)}var pr="__CFB38D33-7CD8-419E-A1B6-61D1B8AC7C83_hash__",lr=0,yr="__DEE5921D-20A6-40D0-9A74-40C5BAC8C663_toJS__",vr={};vr.depth=0,vr.size=0,vr.forEach=function(){},vr.forEachRev=function(){};var gr={};gr.toString=function(){return i(this)},gr.inspect=gr.toString,k.prototype.copy=function(t,r){return new k(t,r,this.key,this.value)},k.prototype.modify=function(t){var r=t.key,n=t.value;return this.key===r&&this.value===n?this:new k(this.left,this.right,r,n)},k.prototype.forEach=function(t){this.left.forEach(t),t([this.key,this.value]),this.right.forEach(t)},z.prototype=Object.create(gr),z.prototype[pr]=function(t){return null===t.hash&&(t.hash=t.sort===g?"(Dict"+u(t,"  ")+")":"(SortedDict "+i(t.sort)+u(t,"  ")+")"),t.hash},z.prototype[yr]=f,z.prototype.forEach=function(t){this.root.forEach(t)},z.prototype.isEmpty=function(){return this.root===vr},z.prototype.has=function(t){return E(this.root,this.sort,t)!==vr},z.prototype.get=function(t,r){var n=E(this.root,this.sort,t);if(n===vr){if(2===arguments.length)return r;throw Error("Key "+t+" not found")}return n.value},z.prototype.set=function(t,r){var n=this.root,e=this.sort,o=d(n,e,t,new k(vr,vr,t,r));return o===n?this:new z(o,e)},z.prototype.remove=function(t){var r=this.root,n=this.sort,e=m(r,n,t);return e===r?this:new z(e,n)},z.prototype.modify=function(t,r){var n=this.root,e=this.sort,o=w(n,e,t,r);return o===n?this:new z(o,e)},b.prototype.copy=function(t,r){return new b(t,r,this.key)},b.prototype.modify=function(t){var r=t.key;return this.key===r?this:new b(this.left,this.right,r)},b.prototype.forEach=function(t){this.left.forEach(t),t(this.key),this.right.forEach(t)},S.prototype=Object.create(gr),S.prototype[pr]=function(t){if(null===t.hash){var r=[];t.forEach(function(t){r.push(i(t))});var n="  ";t.hash=t.sort===g?"(Set"+o(r,n)+")":"(SortedSet "+i(t.sort)+o(r,n)+")"}return t.hash},S.prototype[yr]=s,S.prototype.forEach=function(t){this.root.forEach(t)},S.prototype.isEmpty=function(){return this.root===vr},S.prototype.has=function(t){return E(this.root,this.sort,t)!==vr},S.prototype.add=function(t){var r=this.root,n=this.sort,e=d(r,n,t,new b(vr,vr,t));return e===r?this:new S(e,n)},S.prototype.remove=function(t){var r=this.root,n=this.sort,e=m(r,n,t);return e===r?this:new S(e,n)},S.prototype.union=function(t){var r=this;return t.forEach(function(t){r=r.add(t)}),r},S.prototype.intersect=function(t){var r=this;if(r.root===vr)return r;var n=new S(vr,r.sort);return t.forEach(function(t){r.has(t)&&(n=n.add(t))}),n},S.prototype.disjoint=function(t){var r=this;return t.forEach(function(t){r=r.has(t)?r.remove(t):r.add(t)}),r},S.prototype.subtract=function(t){var r=this;return r.root!==vr&&t.forEach(function(t){r=r.remove(t)}),r},A.prototype.forEach=function(t){for(var r=this;r!==vr;)t(r.car),r=r.cdr},A.prototype.forEachRev=function(t){this.cdr.forEachRev(t),t(this.car)};var Er=125,dr=Math.ceil,wr=Math.floor;J.prototype.copy=function(t,r){return new J(t,r,this.array)},J.prototype.forEach=function(t){this.left.forEach(t),this.array.forEach(function(r){t(r)}),this.right.forEach(t)},G.prototype=Object.create(gr),G.prototype[pr]=function(t){if(null===t.hash){var r=[];t.forEach(function(t){r.push(i(t))}),t.hash="(List"+o(r,"  ")+")"}return t.hash},G.prototype[yr]=s,G.prototype.forEach=function(t){this.root.forEach(t),this.tail.forEachRev(t)},G.prototype.isEmpty=function(){return this.root===vr&&this.tail===vr},G.prototype.size=function(){return this.root.size+this.tail_size},G.prototype.has=function(t){var r=this.size();return 0>t&&(t+=r),K(t,r)},G.prototype.get=function(t,r){var n=this.size();if(0>t&&(t+=n),K(t,n)){var e=this.root,o=e.size;return o>t?q(e,t):B(this.tail,this.tail_size,t-o)}if(2===arguments.length)return r;throw Error("Index "+t+" is not valid")},G.prototype.insert=function(t,r){1===arguments.length&&(r=-1);var n=this.size();0>r&&(r+=n+1);var e=this.root,o=this.tail,i=this.tail_size;if(r===n){if(i===Er){var u=y(e,new J(vr,vr,M(o,i)));return new G(u,new A(t,vr),1)}return new G(e,new A(t,o),i+1)}if(K(r,n)){var h=e.size;if(h>r)return new G(L(e,r,t),o,i);var f=x(M(o,i),r-h,t),u=y(e,new J(vr,vr,f));return new G(u,vr,0)}throw Error("Index "+r+" is not valid")},G.prototype.remove=function(t){0===arguments.length&&(t=-1);var r=this.size();0>t&&(t+=r);var n=this.root,e=this.tail,o=this.tail_size;if(e!==vr&&t===r-1)return new G(n,e.cdr,o-1);if(K(t,r)){var i=n.size;if(i>t)return new G(P(n,t),e,o);var u=O(M(e,o),t-i),h=y(n,new J(vr,vr,u));return new G(h,vr,0)}throw Error("Index "+t+" is not valid")},G.prototype.modify=function(t,r){var n=this.size();if(0>t&&(t+=n),K(t,n)){var e=this.root,o=this.tail,i=this.tail_size,u=e.size;if(o!==vr&&t===n-1){var h=r(o.car);return h===o.car?this:new G(e,new A(h,o.cdr),i)}if(u>t){var f=Q(e,t,r);return f===e?this:new G(f,o,i)}var s=M(o,i),a=j(s,t-u,r);if(a===s)return this;var f=y(e,new J(vr,vr,a));return new G(f,vr,0)}throw Error("Index "+t+" is not valid")},G.prototype.slice=function(t,r){var n=this.size();if(null==t&&(t=0),null==r&&(r=n),0>t&&(t+=n),0>r&&(r+=n),0===t&&r===n)return this;if(t>r)throw Error("Index "+t+" is greater than index "+r);if(K(t,n)){if(t===r)return new G(vr,vr,0);if(r>0&&n>=r){var e=this.root,o=e.size,i=[];if(o>=t&&F(i,e,t,r),r>o){var u=M(this.tail,this.tail_size);C(i,R(u,t-o,r-o))}return new G(I(i),vr,0)}throw Error("Index "+r+" is not valid")}throw Error("Index "+t+" is not valid")},G.prototype.concat=function(t){if(t instanceof G){var r=this.root,n=this.tail,e=t.root,o=t.tail;if(e===vr&&o===vr)return this;if(r===vr&&n===vr)return t;n!==vr&&(r=y(r,new J(vr,vr,M(n,this.tail_size))));var i=p(r,e);return new G(i,o,t.tail_size)}var u=this;return t.forEach(function(t){u=u.insert(t)}),u},H.prototype=Object.create(gr),H.prototype[yr]=s,H.prototype.isEmpty=function(){return this.left===vr&&this.right===vr},H.prototype.forEach=function(t){this.left.forEach(t),this.right.forEachRev(t)},H.prototype[pr]=function(t){if(null===t.hash){var r=[];t.forEach(function(t){r.push(i(t))}),t.hash="(Queue"+o(r,"  ")+")"}return t.hash},H.prototype.size=function(){return this.len},H.prototype.peek=function(t){if(this.isEmpty()){if(1===arguments.length)return t;throw Error("Cannot peek from an empty queue")}return this.left.car},H.prototype.push=function(t){return this.isEmpty()?new H(new A(t,this.left),this.right,this.len+1):new H(this.left,new A(t,this.right),this.len+1)},H.prototype.pop=function(){if(this.isEmpty())throw Error("Cannot pop from an empty queue");var t=this.left.cdr;if(t===vr){var r=vr;return this.right.forEach(function(t){r=new A(t,r)}),new H(r,vr,this.len-1)}return new H(t,this.right,this.len-1)},H.prototype.concat=function(t){var r=this;return t.forEach(function(t){r=r.push(t)}),r},N.prototype=Object.create(gr),N.prototype[yr]=s,N.prototype.isEmpty=function(){return this.root===vr},N.prototype[pr]=function(t){if(null===t.hash){var r=[];t.forEach(function(t){r.push(i(t))}),t.hash="(Stack"+o(r,"  ")+")"}return t.hash},N.prototype.forEach=function(t){this.root.forEachRev(t)},N.prototype.size=function(){return this.len},N.prototype.peek=function(t){if(this.isEmpty()){if(1===arguments.length)return t;throw Error("Cannot peek from an empty stack")}return this.root.car},N.prototype.push=function(t){return new N(new A(t,this.root),this.len+1)},N.prototype.pop=function(){if(this.isEmpty())throw Error("Cannot pop from an empty stack");return new N(this.root.cdr,this.len-1)},N.prototype.concat=function(t){var r=this;return t.forEach(function(t){r=r.push(t)}),r},T.prototype=Object.create(gr),T.prototype[yr]=f,T.prototype[pr]=function(t){return null===t.hash&&(t.hash="(Record"+u(t,"  ")+")"),t.hash},T.prototype.forEach=function(t){var r=this.keys,n=this.values;for(var e in r){var o=r[e];t([e,n[o]])}},T.prototype.get=function(t){if("string"!=typeof t)throw Error("Expected string key but got "+t);var r=this.keys[t];if(null==r)throw Error("Key "+t+" not found");return this.values[r]},T.prototype.set=function(t,r){return this.modify(t,function(){return r})},T.prototype.modify=function(t,r){if("string"!=typeof t)throw Error("Expected string key but got "+t);var n=this.keys,e=n[t];if(null==e)throw Error("Key "+t+" not found");var o=this.values,i=j(o,e,r);return i===o?this:new T(n,i)},function(t,r){"function"==typeof define&&define.amd?define(["exports"],r):"object"==typeof exports?r(exports):(t.Immutable={},r(t.Immutable))}(this,function(t){t.equal=U,t.fromJS=er,t.toJS=h,t.isDict=V,t.isSet=W,t.isSortedDict=X,t.isSortedSet=Y,t.isList=Z,t.isQueue=$,t.isStack=tr,t.isImmutable=nr,t.SortedDict=ir,t.SortedSet=ur,t.Dict=hr,t.Set=fr,t.List=sr,t.Queue=ar,t.Stack=cr,t.simpleSort=v,t.defaultSort=g,t.isRecord=rr,t.Record=or})}).call(this);